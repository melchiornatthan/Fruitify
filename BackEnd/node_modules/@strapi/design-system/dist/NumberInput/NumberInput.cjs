"use strict";var Q=Object.defineProperty;var F=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var S=(e,a,r)=>a in e?Q(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,x=(e,a)=>{for(var r in a||(a={}))h.call(a,r)&&S(e,r,a[r]);if(F)for(var r of F(a))k.call(a,r)&&S(e,r,a[r]);return e};var _=(e,a)=>{var r={};for(var o in e)h.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&F)for(var o of F(e))a.indexOf(o)<0&&k.call(e,o)&&(r[o]=e[o]);return r};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("react"),Z=require("prop-types"),ee=require("@strapi/icons/CarretDown"),te=require("styled-components"),re=require("../themes/sizes.cjs"),A=require("@internationalized/number"),ae=require("../Field/Field.cjs"),ne=require("../Field/FieldLabel.cjs"),le=require("../Field/FieldInput.cjs"),oe=require("../Field/FieldHint.cjs"),ie=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const se=require("../Stack/Stack.cjs"),L=require("../Icon/Icon.cjs"),ue=require("../helpers/useId.cjs"),R=require("../helpers/keyboardKeys.cjs"),K=require("../helpers/getDefaultLocale.cjs"),q=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},n=q(g),t=q(Z),P=q(ee),de=q(te),z=de.default.button`
  display: flex;
  height: 1rem;
  align-items: ${({reverse:e})=>e?"flex-end":"flex-start"};
  transform: translateY(${({reverse:e})=>e?"-2px":"2px"});
  cursor: ${({disabled:e})=>e?"not-allowed":void 0};
  svg {
    display: block;
    height: ${4/16}rem;
    transform: ${({reverse:e})=>e?"rotateX(180deg)":void 0};
  }
`,O="",v=n.default.forwardRef((ce,U)=>{var D=ce,{size:e,startAction:a,name:r,hint:o,error:T,label:j,labelAction:V,locale:$,id:B,onValueChange:f,value:d,step:i,required:H,disabled:p}=D,M=_(D,["size","startAction","name","hint","error","label","labelAction","locale","id","onValueChange","value","step","required","disabled"]);const[l,s]=g.useState(d==null?O:String(d)),C=ue.useId("numberinput",B),W=$||K.getDefaultLocale(),y=g.useRef(new A.NumberParser(W)),I=g.useRef(new A.NumberFormatter(K.getDefaultLocale(),{maximumFractionDigits:20})),X=u=>{const c=u.target.value;if(y.current.isValidPartialNumber(c)){const b=c===""?void 0:y.current.parse(c);b===void 0||isNaN(b)?f(void 0):f(b),s(u.target.value)}},E=u=>{if(l===void 0){f(i),s(String(i));return}if(isNaN(l)){const c=y.current.parse(l),m=(isNaN(c)?0:c)+i,N=I.current.format(m);f(m),s(u?String(m):N);return}f(d+i),s(String(d+i))},w=u=>{if(l===void 0){f(-i),s(String(-i));return}if(isNaN(l)){const c=y.current.parse(l),m=(isNaN(c)?0:c)-i,N=I.current.format(m);f(m),s(u?String(m):N);return}f(d-i),s(String(d-i))},Y=u=>{if(!p)switch(u.key){case R.KeyboardKeys.DOWN:{u.preventDefault(),w(!0);break}case R.KeyboardKeys.UP:{u.preventDefault(),E(!0);break}}},G=()=>{s(l!=null?l:O)},J=()=>{s(d===void 0?void 0:I.current.format(d))};return n.default.createElement(ae.Field,{name:r,hint:o,error:T,id:C},n.default.createElement(se.Stack,{spacing:1},j&&n.default.createElement(ne.FieldLabel,{required:H,action:V},j),n.default.createElement(le.FieldInput,x({ref:U,startAction:a,disabled:p,type:"text",inputmode:"decimal",onChange:X,onKeyDown:Y,onBlur:J,onFocus:G,value:l!=null?l:"",size:e,endAction:n.default.createElement(n.default.Fragment,null,n.default.createElement(z,{disabled:p,"aria-hidden":!0,reverse:!0,onClick:()=>{E()},tabIndex:-1,type:"button","data-testid":"ArrowUp"},n.default.createElement(L.Icon,{as:P.default,color:"neutral500"})),n.default.createElement(z,{disabled:p,"aria-hidden":!0,onClick:()=>{w()},tabIndex:-1,type:"button","data-testid":"ArrowDown"},n.default.createElement(L.Icon,{as:P.default,color:"neutral500"})))},M)),n.default.createElement(oe.FieldHint,null),n.default.createElement(ie.FieldError,null)))});v.displayName="NumberInput";v.defaultProps={"aria-label":void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:void 0,labelAction:void 0,required:!1,size:"M",startAction:void 0,step:1,value:void 0};v.propTypes={"aria-label":t.default.string,disabled:t.default.bool,error:t.default.string,hint:t.default.oneOfType([t.default.string,t.default.node,t.default.arrayOf(t.default.node)]),id:t.default.string,label:t.default.string,labelAction:t.default.element,locale:t.default.string,name:t.default.string.isRequired,onValueChange:t.default.func.isRequired,required:t.default.bool,size:t.default.oneOf(Object.keys(re.sizes.input)),startAction:t.default.element,step:t.default.number,value:t.default.number};exports.NumberInput=v;
