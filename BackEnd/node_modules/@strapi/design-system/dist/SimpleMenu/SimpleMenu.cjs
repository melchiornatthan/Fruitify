"use strict";var G=Object.defineProperty;var T=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(e,r,t)=>r in e?G(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,E=(e,r)=>{for(var t in r||(r={}))M.call(r,t)&&w(e,t,r[t]);if(T)for(var t of T(r))O.call(r,t)&&w(e,t,r[t]);return e};var k=(e,r)=>{var t={};for(var u in e)M.call(e,u)&&r.indexOf(u)<0&&(t[u]=e[u]);if(e!=null&&T)for(var u of T(e))r.indexOf(u)<0&&O.call(e,u)&&(t[u]=e[u]);return t};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("react"),H=require("prop-types"),J=require("styled-components"),Q=require("@strapi/icons/CarretDown"),X=require("react-router-dom"),_=require("../Typography/Typography.cjs"),q=require("../Box/Box.cjs"),Y=require("../Flex/Flex.cjs"),j=require("../Button/Button.cjs"),F=require("../Popover/Popover.cjs"),A=require("./utils.cjs"),Z=require("../helpers/useId.cjs"),c=require("../helpers/keyboardKeys.cjs"),x=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},a=x(l),o=x(H),D=x(J),ee=x(Q),te=D.default.button`
  border: none;
  padding: 0;
  background: transparent;
  cursor: pointer;
  ${A.getOptionStyle}
`,ne=D.default(X.NavLink)`
  text-decoration: none;
  ${A.getOptionStyle}
`,oe=D.default.span`
  display: flex;
  align-items: center;
  svg {
    height: 4px;
    width: 6px;
  }
`,re=D.default(j.Button)`
  padding: ${({theme:e})=>`${e.spaces[1]} ${e.spaces[3]}`};
`,v=B=>{var K=B,{children:e,onClick:r,to:t,isFocused:u}=K,h=k(K,["children","onClick","to","isFocused"]);const d=l.useRef();l.useEffect(()=>{u&&d.current&&d.current.focus()},[u]);const P=E({tabIndex:u?0:-1,ref:d,role:"menuitem"},h),C=f=>{(f.key===c.KeyboardKeys.SPACE||f.key===c.KeyboardKeys.ENTER)&&r()};return t?a.default.createElement(ne,E({to:t},P),a.default.createElement(q.Box,{padding:2},a.default.createElement(_.Typography,null,e))):a.default.createElement(te,E({onKeyDown:C,onMouseDown:r,type:"button"},P),a.default.createElement(q.Box,{padding:2},a.default.createElement(_.Typography,null,e)))};v.defaultProps={onClick:()=>{},isFocused:!1,to:void 0};v.propTypes={as:o.default.elementType,children:o.default.node.isRequired,isFocused:o.default.bool,onClick:o.default.func,to:o.default.string};const g=C=>{var f=C,{label:e,children:r,id:t,as:u,onOpen:h=()=>{},onClose:B=()=>{},size:K,popoverPlacement:d}=f,P=k(f,["label","children","id","as","onOpen","onClose","size","popoverPlacement"]);const i=l.useRef(),R=Z.useId("simplemenu",t),p=l.useRef(!1),[y,m]=l.useState(!1),[I,S]=l.useState(0),b=l.Children.toArray(r),N=K==="S"?re:j.Button,$=u||N;l.useEffect(()=>{if(["string","number"].includes(typeof e)){const n=b.findIndex(s=>s.props.children===e);n!==-1&&S(n)}},[e]),l.useEffect(()=>{p!=null&&p.current?y&&typeof h=="function"?h():typeof B=="function"&&B():p.current=!0},[p,y]),l.useEffect(()=>{a.default.isValidElement(e)&&I==-1&&i.current.focus()},[e,I]);const L=n=>{y&&(n.key===c.KeyboardKeys.ESCAPE&&(n.stopPropagation(),m(!1),i.current.focus()),n.key===c.KeyboardKeys.DOWN&&S(s=>s===b.length-1?0:s+1),n.key===c.KeyboardKeys.UP&&S(s=>s===0?b.length-1:s-1))},V=n=>{(n.key===c.KeyboardKeys.ENTER||n.key===c.KeyboardKeys.SPACE)&&m(s=>!s)},W=n=>{n.preventDefault(),n.currentTarget.contains(n.relatedTarget)||m(!1)},z=n=>{n.preventDefault(),m(s=>!s)},U=b.map((n,s)=>a.default.createElement(Y.Flex,{as:"li",key:s,justifyContent:"center",role:"menuitem"},l.cloneElement(n,{onClick:()=>{n.props.onClick(),m(!1),i.current.focus()},isFocused:I===s})));return a.default.createElement("div",{onKeyDown:L},a.default.createElement($,E({label:a.default.isValidElement(e)?null:e,"aria-haspopup":!0,"aria-expanded":y,"aria-controls":R,onKeyDown:V,onMouseDown:z,ref:i,type:"button",variant:"ghost",endIcon:a.default.createElement(oe,null,a.default.createElement(ee.default,{"aria-hidden":!0}))},P),e),y&&a.default.createElement(F.Popover,{onBlur:W,placement:d,source:i,spacing:4},a.default.createElement(q.Box,{role:"menu",as:"ul",padding:1,id:R},U)))};g.defaultProps={as:void 0};g.displayName="SimpleMenu";g.defaultProps={popoverPlacement:"bottom-start",size:"M"};g.propTypes={as:o.default.any,children:o.default.oneOfType([o.default.arrayOf(o.default.node),o.default.node]).isRequired,id:o.default.string,label:o.default.oneOfType([o.default.string,o.default.number,o.default.element]).isRequired,onClose:o.default.func,onOpen:o.default.func,popoverPlacement:o.default.oneOf(F.POPOVER_PLACEMENTS),size:o.default.oneOf(["S","M"])};exports.MenuItem=v;exports.SimpleMenu=g;
