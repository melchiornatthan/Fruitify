"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[695],{67963:(k,D,t)=>{t.r(D),t.d(D,{SettingsPage:()=>j,default:()=>q});var e=t(32735),M=t(99357),l=t(5636),g=t(88425),m=t(66456),h=t(62345),P=t(36320),E=t(9139),x=t(88860),I=t(41415),z=t(27649),O=t(27677),d=t(15335),r=t(5803),c=t(28356),p=t(17e3),N=t(96709),F=t(43653),G=t.n(F),L=t(89793),Z=t.n(L),u=t(88133);const n=s=>s;var i=t(97889),o=t(3040),v=t.n(o);const b={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},H=(s,T)=>(0,i.default)(s,f=>{switch(T.type){case"CANCEL_CHANGES":{f.modifiedData=s.initialData;break}case"GET_DATA_SUCCEEDED":{f.isLoading=!1,f.initialData=T.data,f.modifiedData=T.data;break}case"ON_CHANGE":{v()(f,["modifiedData",...T.keys.split(".")],T.value);break}case"ON_SUBMIT":{f.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{f.initialData=s.modifiedData,f.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{f.isSubmiting=!1;break}default:return s}});var w=t(93826),K=t(98399),U=(s,T,f)=>new Promise(($,W)=>{var V=y=>{try{A(f.next(y))}catch(R){W(R)}},X=y=>{try{A(f.throw(y))}catch(R){W(R)}},A=y=>y.done?$(y.value):Promise.resolve(y.value).then(V,X);A((f=f.apply(s,T)).next())});const j=()=>{const{formatMessage:s}=(0,l.useIntl)(),{lockApp:T,unlockApp:f}=(0,g.useOverlayBlocker)(),$=(0,g.useNotification)();(0,g.useFocusWhenNavigate)();const[{initialData:W,isLoading:V,isSubmiting:X,modifiedData:A},y]=(0,e.useReducer)(H,b,n),R=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const S=G().CancelToken.source(),ee=()=>U(void 0,null,function*(){try{const{data:{data:Q}}=yield u.be.get((0,u.IF)("settings"),{cancelToken:S.token});y({type:"GET_DATA_SUCCEEDED",data:Q})}catch(Q){K.error(Q)}});return R.current&&ee(),()=>{S.cancel("Operation canceled by the user."),R.current=!1}},[]);const Y=Z()(W,A),_=B=>U(void 0,null,function*(){if(B.preventDefault(),!Y){T(),y({type:"ON_SUBMIT"});try{yield u.be.put((0,u.IF)("settings"),A),y({type:"SUBMIT_SUCCEEDED"}),$({type:"success",message:{id:"notification.form.success.fields"}})}catch(S){K.error(S),y({type:"ON_SUBMIT_ERROR"})}f()}}),J=({target:{name:B,value:S}})=>{y({type:"ON_CHANGE",keys:B,value:S})};return e.createElement(z.o,{tabIndex:-1},e.createElement(M.Helmet,{title:s({id:(0,u.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),e.createElement("form",{onSubmit:_},e.createElement(c.T,{title:s({id:(0,u.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:e.createElement(I.z,{disabled:Y,"data-testid":"save-button",loading:X,type:"submit",startIcon:e.createElement(m.Z,null),size:"S"},s({id:"global.save",defaultMessage:"Save"})),subtitle:s({id:(0,u.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),e.createElement(p.D,null,V?e.createElement(g.LoadingIndicatorPage,null):e.createElement(N.A,null,e.createElement(O.K,{spacing:12},e.createElement(h.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(O.K,{spacing:4},e.createElement(P.k,null,e.createElement(x.Z,{variant:"delta",as:"h2"},s({id:(0,u.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),e.createElement(d.r,{gap:6},e.createElement(r.P,{col:6,s:12},e.createElement(E.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:A.responsiveDimensions,hint:s({id:(0,u.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:s({id:(0,u.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:B=>{J({target:{name:"responsiveDimensions",value:B.target.checked}})}})),e.createElement(r.P,{col:6,s:12},e.createElement(E.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:A.sizeOptimization,hint:s({id:(0,u.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:s({id:(0,u.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:B=>{J({target:{name:"sizeOptimization",value:B.target.checked}})}})),e.createElement(r.P,{col:6,s:12},e.createElement(E.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:A.autoOrientation,hint:s({id:(0,u.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:s({id:(0,u.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:B=>{J({target:{name:"autoOrientation",value:B.target.checked}})}}))))))))))},q=()=>e.createElement(g.CheckPagePermissions,{permissions:w.Z.settings},e.createElement(j,null))},17e3:(k,D,t)=>{t.d(D,{D:()=>g});var e=t(32735),M=t(60216),l=t(62345);const g=({children:m})=>e.createElement(l.x,{paddingLeft:10,paddingRight:10},m);g.propTypes={children:M.node.isRequired}},28356:(k,D,t)=>{t.d(D,{T:()=>L});var e=t(32735),M=t(83292),l=t(60216),g=t(88860),m=t(62345),h=t(36320);const P=a=>{const n=(0,e.useRef)(null),[i,o]=(0,e.useState)(!0),v=([b])=>{o(b.isIntersecting)};return(0,e.useEffect)(()=>{const b=n.current,C=new IntersectionObserver(v,a);return b&&C.observe(n.current),()=>{b&&C.disconnect()}},[n,a]),[n,i]},E=(a,n)=>{(0,e.useLayoutEffect)(()=>{const i=new ResizeObserver(n);return Array.isArray(a)?a.map(o=>{o.current&&i.observe(o.current)}):a.current&&i.observe(a.current),()=>{i.disconnect()}},[])};var x=Object.defineProperty,I=Object.defineProperties,z=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,c=(a,n,i)=>n in a?x(a,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[n]=i,p=(a,n)=>{for(var i in n||(n={}))d.call(n,i)&&c(a,i,n[i]);if(O)for(var i of O(n))r.call(n,i)&&c(a,i,n[i]);return a},N=(a,n)=>I(a,z(n)),F=(a,n)=>{var i={};for(var o in a)d.call(a,o)&&n.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&O)for(var o of O(a))n.indexOf(o)<0&&r.call(a,o)&&(i[o]=a[o]);return i};const G=()=>{const a=(0,e.useRef)(null),[n,i]=(0,e.useState)(null),[o,v]=P({root:null,rootMargin:"0px",threshold:0});return E(o,()=>{o.current&&i(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&i(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:v,baseHeaderLayoutRef:a,headerSize:n}},L=a=>{const{containerRef:n,isVisible:i,baseHeaderLayoutRef:o,headerSize:v}=G();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:v==null?void 0:v.height},ref:n},i&&e.createElement(u,p({ref:o},a))),!i&&e.createElement(u,N(p({},a),{sticky:!0,width:v==null?void 0:v.width})))};L.displayName="HeaderLayout";const Z=(0,M.default)(m.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,u=e.forwardRef((a,n)=>{var i=a,{navigationAction:o,primaryAction:v,secondaryAction:b,subtitle:C,title:H,sticky:w,width:K}=i,U=F(i,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const j=typeof C=="string";return w?e.createElement(Z,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:K,"data-strapi-header-sticky":!0},e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,o&&e.createElement(m.x,{paddingRight:3},o),e.createElement(m.x,null,e.createElement(g.Z,p({variant:"beta",as:"h1"},U),H),j?e.createElement(g.Z,{variant:"pi",textColor:"neutral600"},C):C),b?e.createElement(m.x,{paddingLeft:4},b):null),e.createElement(h.k,null,v?e.createElement(m.x,{paddingLeft:2},v):void 0))):e.createElement(m.x,{ref:n,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:o?6:8,background:"neutral100","data-strapi-header":!0},o?e.createElement(m.x,{paddingBottom:2},o):null,e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,e.createElement(g.Z,p({as:"h1",variant:"alpha"},U),H),b?e.createElement(m.x,{paddingLeft:4},b):null),v),j?e.createElement(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},C):C)});u.displayName="BaseHeaderLayout",u.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},u.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,sticky:l.bool,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired,width:l.number},L.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},L.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired}},96709:(k,D,t)=>{t.d(D,{A:()=>P});var e=t(32735),M=t(60216),l=t(83292),g=t(62345);const m=(0,l.default)(g.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:E})=>E?"auto 1fr":"1fr"};
`,h=(0,l.default)(g.x)`
  overflow-x: hidden;
`,P=({sideNav:E,children:x})=>e.createElement(m,{hasSideNav:Boolean(E)},E,e.createElement(h,{paddingBottom:10},x));P.defaultProps={sideNav:void 0},P.propTypes={children:M.node.isRequired,sideNav:M.node}},27649:(k,D,t)=>{t.d(D,{o:()=>O});var e=t(32735),M=t(60216),l=t(83292),g=Object.defineProperty,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,E=(d,r,c)=>r in d?g(d,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[r]=c,x=(d,r)=>{for(var c in r||(r={}))h.call(r,c)&&E(d,c,r[c]);if(m)for(var c of m(r))P.call(r,c)&&E(d,c,r[c]);return d},I=(d,r)=>{var c={};for(var p in d)h.call(d,p)&&r.indexOf(p)<0&&(c[p]=d[p]);if(d!=null&&m)for(var p of m(d))r.indexOf(p)<0&&P.call(d,p)&&(c[p]=d[p]);return c};const z=l.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,O=d=>{var r=d,{labelledBy:c}=r,p=I(r,["labelledBy"]);const N=c||"main-content-title";return e.createElement(z,x({"aria-labelledby":N,id:"main-content",tabIndex:-1},p))};O.defaultProps={labelledBy:void 0},O.propTypes={labelledBy:M.string}}}]);
