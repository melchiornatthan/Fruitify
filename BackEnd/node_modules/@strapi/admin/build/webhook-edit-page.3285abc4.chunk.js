"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5162],{41513:(Pe,$,n)=>{n.d($,{Z:()=>le});var e=n(32735),o=n(88425),k=n(27649),T=n(84968),K=n(5141),W=n(775),P=n(17247),f=n(60216),c=n.n(f),v=n(29439),U=n(66456),Q=Object.defineProperty,E=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,M=(r,t,a)=>t in r?Q(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,Oe=(r,t)=>{for(var a in t||(t={}))O.call(t,a)&&M(r,a,t[a]);if(E)for(var a of E(t))y.call(t,a)&&M(r,a,t[a]);return r};function ce(r){return e.createElement("svg",Oe({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),e.createElement("path",{d:"M4 20.252V3.748a1 1 0 011.507-.862l14.028 8.252a1 1 0 010 1.724L5.507 21.113A1 1 0 014 20.252z",fill:"#212134"}))}var rt=n(28356),ue=n(17e3),me=n(62345),pe=n(41415),Z=n(27677),Me=n(10369),xe=n(15335),G=n(5803),J=n(83281),q=n(5636),je=n(76437),N=n(88860),Be=n(83292),ge=n(44426),Fe=n(8284),Ke=n(23940),We=n.n(Ke);const fe=({disabledEvents:r,name:t,events:a,inputValue:s,handleChange:g,handleChangeAll:I})=>{const F=a.filter(m=>!r.includes(m)),i=s.length===F.length,b=s.length>0,R=({target:{name:m}})=>{I({target:{name:m,value:!i}})};return e.createElement("tr",null,e.createElement("td",null,e.createElement(Fe.X,{indeterminate:b&&!i,"aria-label":"Select all entries",name:t,onChange:R,value:i},We()(t))),a.map(m=>e.createElement("td",{key:m},e.createElement(ge.C,{disabled:r.includes(m),"aria-label":m,name:m,value:s.includes(m),onValueChange:S=>g({target:{name:m,value:S}})}))))};fe.defaultProps={disabledEvents:[],events:[],inputValue:[],handleChange(){},handleChangeAll(){}},fe.propTypes={disabledEvents:c().array,events:c().array,inputValue:c().array,handleChange:c().func,handleChangeAll:c().func,name:c().string.isRequired};const Ue=fe,se=r=>r.reduce((t,a)=>{const s=a.split(".")[0];return t[s]||(t[s]=[]),t[s].push(a),t},{}),Se=Be.default.table`
  td {
    height: ${52/16}rem;
    width: 10%;
    vertical-align: middle;
    text-align: center;
  }

  tbody tr:nth-child(odd) {
    background: ${({theme:r})=>r.colors.neutral100};
  }

  tbody tr td:first-child {
    padding-left: ${({theme:r})=>r.spaces[7]};
  }
`,l={headers:{default:[{id:"Settings.webhooks.events.create",defaultMessage:"Create"},{id:"Settings.webhooks.events.update",defaultMessage:"Update"},{id:"app.utils.delete",defaultMessage:"Delete"}],draftAndPublish:[{id:"Settings.webhooks.events.create",defaultMessage:"Create"},{id:"Settings.webhooks.events.update",defaultMessage:"Update"},{id:"app.utils.delete",defaultMessage:"Delete"},{id:"app.utils.publish",defaultMessage:"Publish"},{id:"app.utils.unpublish",defaultMessage:"Unpublish"}]},events:{default:{entry:["entry.create","entry.update","entry.delete"],media:["media.create","media.update","media.delete"]},draftAndPublish:{entry:["entry.create","entry.update","entry.delete","entry.publish","entry.unpublish"],media:["media.create","media.update","media.delete"]}}},d=({isDraftAndPublish:r})=>{const t=r?l.headers.draftAndPublish:l.headers.default,a=r?l.events.draftAndPublish:l.events.default,{formatMessage:s}=(0,q.useIntl)(),{values:g,handleChange:I}=(0,J.useFormikContext)(),F="events",i=g.events,b=[],R=se(i),m=({target:{name:C,value:te}})=>{let V=new Set(i);te?V.add(C):V.delete(C),I({target:{name:F,value:Array.from(V)}})},S=({target:{name:C,value:te}})=>{let V=new Set(i);te?a[C].forEach(re=>{b.includes(re)||V.add(re)}):a[C].forEach(re=>V.delete(re)),I({target:{name:F,value:Array.from(V)}})};return e.createElement(Z.K,{spacing:1},e.createElement(je.Q,null,s({id:"Settings.webhooks.form.events",defaultMessage:"Events"})),e.createElement(Se,null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("td",null),t.map(C=>C==="app.utils.publish"||C==="app.utils.unpublish"?e.createElement("td",{key:C.id,title:s({id:"Settings.webhooks.event.publish-tooltip",defaultMessage:"This event only exists for contents with Draft/Publish system enabled"})},e.createElement(N.Z,{variant:"sigma",textColor:"neutral600"},s(C))):e.createElement("td",{key:C.id},e.createElement(N.Z,{variant:"sigma",textColor:"neutral600"},s(C)))))),e.createElement("tbody",null,Object.keys(a).map(C=>e.createElement(Ue,{disabledEvents:b,key:C,name:C,events:a[C],inputValue:R[C],handleChange:m,handleChangeAll:S})))))};d.propTypes={isDraftAndPublish:c().bool.isRequired};const p=d;var x=n(19406),A=n(36320),at=n(7563),z=n(21590),Ie=n(90333);const Re=["A-IM","Accept","Accept-Charset","Accept-Encoding","Accept-Language","Accept-Datetime","Access-Control-Request-Method","Access-Control-Request-Headers","Authorization","Cache-Control","Connection","Content-Length","Content-Type","Cookie","Date","Expect","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","User-Agent","Upgrade","Via","Warning"];var ne=Object.defineProperty,nt=Object.defineProperties,De=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ae=(r,t,a)=>t in r?ne(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,ot=(r,t)=>{for(var a in t||(t={}))Ve.call(t,a)&&Ae(r,a,t[a]);if(ve)for(var a of ve(t))Te.call(t,a)&&Ae(r,a,t[a]);return r},Ze=(r,t)=>nt(r,De(t)),lt=(r,t)=>{var a={};for(var s in r)Ve.call(r,s)&&t.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&ve)for(var s of ve(r))t.indexOf(s)<0&&Te.call(r,s)&&(a[s]=r[s]);return a};const Le=r=>{var t=r,{name:a,onChange:s,value:g}=t,I=lt(t,["name","onChange","value"]);const[F,i]=(0,e.useState)(g?[...Re,g]:Re),b=m=>{s({target:{name:a,value:m}})},R=m=>{i(S=>[...S,m]),s({target:{name:a,value:m}})};return e.createElement(z.X,Ze(ot({},I),{onChange:b,onCreateOption:R,placeholder:"",value:g}),F.map(m=>e.createElement(Ie.O,{value:m,key:m},m)))};Le.defaultProps={value:void 0},Le.propTypes={name:c().string.isRequired,onChange:c().func.isRequired,value:c().string};const st=Le,it=()=>{const{formatMessage:r}=(0,q.useIntl)(),{values:t,errors:a}=(0,J.useFormikContext)();return e.createElement(Z.K,{spacing:1},e.createElement(je.Q,null,r({id:"Settings.webhooks.form.headers",defaultMessage:"Headers"})),e.createElement(me.x,{padding:8,background:"neutral100",hasRadius:!0},e.createElement(J.FieldArray,{validateOnChange:!1,name:"headers",render:({push:s,remove:g})=>{var I;return e.createElement(xe.r,{gap:4},(I=t.headers)==null?void 0:I.map((F,i)=>{var b,R,m,S,C,te,V,re,et,tt;return e.createElement(e.Fragment,{key:i},e.createElement(G.P,{col:6},e.createElement(J.Field,{as:st,name:`headers.${i}.key`,"aria-label":`row ${i+1} key`,label:r({id:"Settings.webhooks.key",defaultMessage:"Key"}),error:((R=(b=a.headers)==null?void 0:b[i])==null?void 0:R.key)&&r({id:(m=a.headers[i])==null?void 0:m.key,defaultMessage:(S=a.headers[i])==null?void 0:S.key})})),e.createElement(G.P,{col:6},e.createElement(A.k,{alignItems:"flex-end"},e.createElement(me.x,{style:{flex:1}},e.createElement(J.Field,{as:Me.o,"aria-label":`row ${i+1} value`,label:r({id:"Settings.webhooks.value",defaultMessage:"Value"}),name:`headers.${i}.value`,error:((te=(C=a.headers)==null?void 0:C[i])==null?void 0:te.value)&&r({id:(V=a.headers[i])==null?void 0:V.value,defaultMessage:(re=a.headers[i])==null?void 0:re.value})})),e.createElement(A.k,{paddingLeft:2,style:{alignSelf:"center"},paddingTop:(tt=(et=a.headers)==null?void 0:et[i])!=null&&tt.value?0:5},e.createElement(o.RemoveRoundedButton,{onClick:()=>t.headers.length!==1&&g(i),label:r({id:"Settings.webhooks.headers.remove",defaultMessage:"Remove header row {number}"},{number:i+1})})))))}),e.createElement(G.P,{col:12},e.createElement(at.A,{type:"button",onClick:()=>{s({key:"",value:""})},startIcon:e.createElement(x.default,null)},r({id:"Settings.webhooks.create.header",defaultMessage:"Create new header"}))))}})))};var Ne=n(35331),w=n(27169);const ie=Be.default.svg(({theme:r,color:t})=>`
  width: ${12/16}rem;
  height: ${12/16}rem;

  path {
    fill: ${r.colors[t]};
  }
`),we=({isPending:r,statusCode:t})=>{const{formatMessage:a}=(0,q.useIntl)();return r?e.createElement(Z.K,{horizontal:!0,spacing:2,style:{alignItems:"center"}},e.createElement(ie,{as:w.default}),e.createElement(N.Z,null,a({id:"Settings.webhooks.trigger.pending",defaultMessage:"pending"}))):t>=200&&t<300?e.createElement(Z.K,{horizontal:!0,spacing:2,style:{alignItems:"center"}},e.createElement(ie,{as:U.Z,color:"success700"}),e.createElement(N.Z,null,a({id:"Settings.webhooks.trigger.success",defaultMessage:"success"}))):t>=300?e.createElement(Z.K,{horizontal:!0,spacing:2,style:{alignItems:"center"}},e.createElement(ie,{as:Ne.default,color:"danger700"}),e.createElement(N.Z,null,a({id:"Settings.error",defaultMessage:"error"})," ",t)):null};we.propTypes={isPending:c().bool.isRequired,statusCode:c().number},we.defaultProps={statusCode:void 0};const $e=({statusCode:r,message:t})=>{const{formatMessage:a}=(0,q.useIntl)();return r>=200&&r<300?e.createElement(A.k,{justifyContent:"flex-end"},e.createElement(N.Z,{textColor:"neutral600",ellipsis:!0},a({id:"Settings.webhooks.trigger.success.label",defaultMessage:"Trigger succeeded"}))):r>=300?e.createElement(A.k,{justifyContent:"flex-end"},e.createElement(A.k,{maxWidth:(0,o.pxToRem)(250),justifyContent:"flex-end",title:t},e.createElement(N.Z,{ellipsis:!0,textColor:"neutral600"},t))):null};$e.propTypes={statusCode:c().number,message:c().string},$e.defaultProps={statusCode:void 0,message:void 0};const j=({onCancel:r})=>{const{formatMessage:t}=(0,q.useIntl)();return e.createElement(A.k,{justifyContent:"flex-end"},e.createElement("button",{onClick:r,type:"button"},e.createElement(Z.K,{horizontal:!0,spacing:2,style:{alignItems:"center"}},e.createElement(N.Z,{textColor:"neutral400"},t({id:"Settings.webhooks.trigger.cancel",defaultMessage:"cancel"})),e.createElement(ie,{as:Ne.default,color:"neutral400"}))))};j.propTypes={onCancel:c().func.isRequired};const he=({isPending:r,onCancel:t,response:a})=>{const{statusCode:s,message:g}=a,{formatMessage:I}=(0,q.useIntl)();return e.createElement(me.x,{background:"neutral0",padding:5,shadow:"filterShadow",hasRadius:!0},e.createElement(xe.r,{gap:4,style:{alignItems:"center"}},e.createElement(G.P,{col:3},e.createElement(N.Z,null,I({id:"Settings.webhooks.trigger.test",defaultMessage:"Test-trigger"}))),e.createElement(G.P,{col:3},e.createElement(we,{isPending:r,statusCode:s})),e.createElement(G.P,{col:6},r?e.createElement(j,{onCancel:t}):e.createElement($e,{statusCode:s,message:g}))))};he.defaultProps={isPending:!1,onCancel(){},response:{}},he.propTypes={isPending:c().bool,onCancel:c().func,response:c().object};const oe=he;var H=n(5173);const L=/(^$)|(^[A-Za-z][_0-9A-Za-z ]*$)/,Ee=/(^$)|((https?:\/\/.*)(d*)\/?(.*))/,be=H.Ry().shape({name:H.Z_(o.translatedErrors.string).required(o.translatedErrors.required).matches(L,o.translatedErrors.regex),url:H.Z_(o.translatedErrors.string).required(o.translatedErrors.required).matches(Ee,o.translatedErrors.regex),headers:H.Vo(r=>{let t=H.IX();if(r.length===1){const{key:a,value:s}=r[0];if(!a&&!s)return t}return t.of(H.Ry().shape({key:H.Z_().required(o.translatedErrors.required),value:H.Z_().required(o.translatedErrors.required)}))}),events:H.IX()}),ee=({handleSubmit:r,data:t,triggerWebhook:a,isCreating:s,isTriggering:g,triggerResponse:I,isDraftAndPublishEvents:F})=>{const{formatMessage:i}=(0,q.useIntl)(),[b,R]=(0,e.useState)(!1);return e.createElement(J.Formik,{onSubmit:r,initialValues:{name:(t==null?void 0:t.name)||"",url:(t==null?void 0:t.url)||"",headers:Object.keys((t==null?void 0:t.headers)||[]).length?Object.entries(t.headers).map(([m,S])=>({key:m,value:S})):[{key:"",value:""}],events:(t==null?void 0:t.events)||[]},validationSchema:be,validateOnChange:!1,validateOnBlur:!1},({handleSubmit:m,errors:S})=>e.createElement(o.Form,{noValidate:!0},e.createElement(rt.T,{primaryAction:e.createElement(Z.K,{horizontal:!0,spacing:2},e.createElement(pe.z,{onClick:()=>{a(),R(!0)},variant:"tertiary",startIcon:e.createElement(ce,null),disabled:s||g,size:"L"},i({id:"Settings.webhooks.trigger",defaultMessage:"Trigger"})),e.createElement(pe.z,{startIcon:e.createElement(U.Z,null),onClick:m,type:"submit",size:"L"},i({id:"global.save",defaultMessage:"Save"}))),title:s?i({id:"Settings.webhooks.create",defaultMessage:"Create a webhook"}):t==null?void 0:t.name,navigationAction:e.createElement(o.Link,{startIcon:e.createElement(v.Z,null),to:"/settings/webhooks"},i({id:"global.back",defaultMessage:"Back"}))}),e.createElement(ue.D,null,e.createElement(Z.K,{spacing:4},b&&e.createElement("div",{className:"trigger-wrapper"},e.createElement(oe,{isPending:g,response:I,onCancel:()=>R(!1)})),e.createElement(me.x,{background:"neutral0",padding:8,shadow:"filterShadow",hasRadius:!0},e.createElement(Z.K,{spacing:6},e.createElement(xe.r,{gap:6},e.createElement(G.P,{col:6},e.createElement(J.Field,{as:Me.o,name:"name",error:S.name&&i({id:S.name}),label:i({id:"global.name",defaultMessage:"Name"}),required:!0})),e.createElement(G.P,{col:12},e.createElement(J.Field,{as:Me.o,name:"url",error:S.url&&i({id:S.url}),label:i({id:"Settings.roles.form.input.url",defaultMessage:"Url"}),required:!0}))),e.createElement(it,null),e.createElement(p,{isDraftAndPublish:F})))))))};ee.propTypes={data:c().object,handleSubmit:c().func.isRequired,triggerWebhook:c().func.isRequired,isCreating:c().bool.isRequired,isDraftAndPublishEvents:c().bool.isRequired,isTriggering:c().bool.isRequired,triggerResponse:c().object},ee.defaultProps={data:void 0,triggerResponse:void 0};const ze=ee;var dt=n(92891),He=Object.defineProperty,B=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,Ge=(r,t,a)=>t in r?He(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,Je=(r,t)=>{for(var a in t||(t={}))Qe.call(t,a)&&Ge(r,a,t[a]);if(Xe)for(var a of Xe(t))ct.call(t,a)&&Ge(r,a,t[a]);return r},ye=(r,t)=>B(r,ke(t));const ut=r=>{const t=Je({},r);return(0,dt.set)(t,"headers",Ye(r.headers)),t},Ye=r=>r.reduce((t,a)=>{const{key:s,value:g}=a;return s!==""?ye(Je({},t),{[s]:g}):t},{}),Ce=ut;var X=n(98399),mt=Object.defineProperty,qe=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,_e=(r,t,a)=>t in r?mt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,u=(r,t)=>{for(var a in t||(t={}))pt.call(t,a)&&_e(r,a,t[a]);if(qe)for(var a of qe(t))gt.call(t,a)&&_e(r,a,t[a]);return r},h=(r,t,a)=>new Promise((s,g)=>{var I=b=>{try{i(a.next(b))}catch(R){g(R)}},F=b=>{try{i(a.throw(b))}catch(R){g(R)}},i=b=>b.done?s(b.value):Promise.resolve(b.value).then(I,F);i((a=a.apply(r,t)).next())});const le=()=>{const{params:{id:r}}=(0,K.useRouteMatch)("/settings/webhooks/:id"),{replace:t}=(0,K.useHistory)(),{lockApp:a,unlockApp:s}=(0,o.useOverlayBlocker)(),g=(0,o.useNotification)(),I=(0,T.useQueryClient)(),{isLoading:F,collectionTypes:i}=(0,W.bP)(),b=r==="create",R=(0,e.useCallback)(Y=>h(void 0,null,function*(){const[ae,{data:yt}]=yield(0,o.to)((0,o.request)(`/admin/webhooks/${Y}`,{method:"GET"}));return ae?(g({type:"warning",message:{id:"notification.error"}}),null):yt}),[g]),{isLoading:m,data:S}=(0,T.useQuery)(["get-webhook",r],()=>R(r),{enabled:!b}),{isLoading:C,data:te,isIdle:V,mutate:re}=(0,T.useMutation)(()=>P.be.post(`/admin/webhooks/${r}/trigger`)),et=()=>re(null,{onError(){g({type:"warning",message:{id:"notification.error"}})}}),tt=(0,T.useMutation)(Y=>(0,o.request)("/admin/webhooks",{method:"POST",body:Y})),ht=(0,T.useMutation)(({id:Y,body:ae})=>(0,o.request)(`/admin/webhooks/${Y}`,{method:"PUT",body:ae})),Et=Y=>h(void 0,null,function*(){b?(a(),tt.mutate(Ce(Y),{onSuccess(ae){g({type:"success",message:{id:"Settings.webhooks.created"}}),t(`/settings/webhooks/${ae.data.id}`),s()},onError(ae){g({type:"warning",message:{id:"notification.error"}}),X.log(ae),s()}})):(a(),ht.mutate({id:r,body:Ce(Y)},{onSuccess(){I.invalidateQueries(["get-webhook",r]),g({type:"success",message:{id:"notification.form.success.fields"}}),s()},onError(ae){g({type:"warning",message:{id:"notification.error"}}),X.log(ae),s()}}))}),bt=(0,e.useMemo)(()=>i.some(Y=>Y.options.draftAndPublish===!0),[i]);return m||F?e.createElement(o.LoadingIndicatorPage,null):e.createElement(k.o,null,e.createElement(o.SettingsPageTitle,{name:"Webhooks"}),e.createElement(ze,u({},{handleSubmit:Et,data:S,triggerWebhook:et,isCreating:b,isTriggering:C,isTriggerIdle:V,triggerResponse:te==null?void 0:te.data.data,isDraftAndPublishEvents:bt})))}},33238:(Pe,$,n)=>{n.r($),n.d($,{default:()=>P});var e=n(32735),o=n(88425),k=n.n(o),T=n(83983),K=n(41513);const P=()=>e.createElement(o.CheckPagePermissions,{permissions:T.Z.settings.webhooks.create},e.createElement(K.Z,null))},59021:(Pe,$,n)=>{n.r($),n.d($,{default:()=>P});var e=n(32735),o=n(88425),k=n.n(o),T=n(83983),K=n(41513);const P=()=>e.createElement(o.CheckPagePermissions,{permissions:T.Z.settings.webhooks.update},e.createElement(K.Z,null))},21590:(Pe,$,n)=>{n.d($,{h:()=>se,X:()=>Se});var e=n(32735),o=n(60216),k=n(59002),T=n(16899),K=n(35331),W=n(96892),P=n(94486);const f={Close:"Close",CloseSelect:"CloseSelect",First:"First",Last:"Last",Next:"Next",Open:"Open",PageDown:"PageDown",PageUp:"PageUp",Previous:"Previous",Select:"Select",Space:"Space",Type:"Type"},c={Close:"Close",First:"First",Last:"Last",Next:"Next",Open:"Open",Previous:"Previous",Select:"Select",UpLevel:"UpLevel"};function v(l=[],d,p=[]){const x=String(d!=null?d:"").toLowerCase();return x?l.filter(A=>A.props.children.toString().toLowerCase().includes(x)&&p.indexOf(A)<0):l}function U(l,d){if(!d&&l===P.y.DOWN)return f.Open;if(l===P.y.DOWN)return f.Next;if(l===P.y.UP)return f.Previous;if(l===P.y.HOME)return f.First;if(l===P.y.END)return f.Last;if(l===P.y.ESCAPE)return f.Close;if(l===P.y.ENTER)return f.CloseSelect;if(l===P.y.BACKSPACE||l===P.y.CLEAR||l.length===1)return f.Type}function Q(l,d,p){switch(p){case f.First:return 0;case f.Last:return d;case f.Previous:return Math.max(0,l-1);case f.Next:return Math.min(d,l+1);default:return l}}function E(l){W(l,{scrollMode:"if-needed",block:"nearest",inline:"nearest"}).forEach(({el:d,top:p,left:x})=>{d.scrollTop=p,d.scrollLeft=x})}var O=n(36320),y=n(93958),M=n(46406),Oe=n(62345),ce=n(88860),rt=n(97405),ue=n(91225),me=n(90333);const pe=({options:l,activeOptionRef:d})=>((0,e.useEffect)(()=>{d.current&&E(d.current)},[]),l);pe.defaultProps={activeOptionRef:void 0},pe.propTypes={options:o.array.isRequired};var Z=n(87107),Me=n(76437),xe=n(67014),G=n(47851),J=n(27677),q=n(3685),je=Object.defineProperty,N=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,We=(l,d,p)=>d in l?je(l,d,{enumerable:!0,configurable:!0,writable:!0,value:p}):l[d]=p,fe=(l,d)=>{for(var p in d||(d={}))Fe.call(d,p)&&We(l,p,d[p]);if(ge)for(var p of ge(d))Ke.call(d,p)&&We(l,p,d[p]);return l},Ue=(l,d)=>N(l,Be(d)),ft=(l,d)=>{var p={};for(var x in l)Fe.call(l,x)&&d.indexOf(x)<0&&(p[x]=l[x]);if(l!=null&&ge)for(var x of ge(l))d.indexOf(x)<0&&Ke.call(l,x)&&(p[x]=l[x]);return p};const se=l=>{var d=l,{children:p,clearLabel:x,creatable:A,createMessage:at,disabled:z,error:Ie,hasMoreItems:vt,hint:Re,label:ne,labelAction:nt,loading:De,loadingMessage:ve,noOptionsMessage:Ve,onChange:Te,onClear:Ae,onCreateOption:ot,onInputChange:Ze,onLoadMore:lt,placeholder:Le,required:st,value:_}=d,it=ft(d,["children","clearLabel","creatable","createMessage","disabled","error","hasMoreItems","hint","label","labelAction","loading","loadingMessage","noOptionsMessage","onChange","onClear","onCreateOption","onInputChange","onLoadMore","placeholder","required","value"]);const Ne=()=>{var u;return(u=p.find(h=>{var D;return((D=h.props)==null?void 0:D.value.toLowerCase())===_.toLowerCase()}).props)==null?void 0:u.children},[w,ie]=(0,e.useState)(0),[we,$e]=(0,e.useState)(null),[j,he]=(0,e.useState)(p),[oe,H]=(0,e.useState)(!1),[L,Ee]=(0,e.useState)(""),de=(0,e.useRef)(),be=(0,e.useRef)(!1),ee=(0,e.useRef)(),ze=(0,e.useRef)(),dt=(0,e.useRef)(),He=(0,e.useRef)(!0),B=(0,k.M)("combobox"),ke=`${B}-label`;if(!ne&&!it["aria-label"])throw new Error('The Combobox component needs a "label" or an "aria-label" props');(0,e.useEffect)(()=>{he(v(p,L))},[L,p]),(0,e.useEffect)(()=>{oe&&de.current&&E(de.current)},[w]),(0,e.useLayoutEffect)(()=>{if(He.current){He.current=!1;return}},[_]);const Xe=oe?`${B}-${w}`:"",Qe=()=>{Te(null),Ee("")},ct=u=>{Ze&&Ze(u);const h=ee.current.value;he(v(p,h)),ie(0),$e(null),L!==h&&Ee(h),oe||X(!0,!1)},Ge=u=>{const{key:h}=u,D=A&&L?j.length:j.length-1,le=U(h,oe);switch(_&&!L&&h===P.y.BACKSPACE&&Qe(),le){case f.Next:return ye(w===D?0:Q(w,D,le));case f.Previous:return ye(w===0?D:Q(w,D,le));case f.Last:case f.First:return ye(w===D?0:Q(w,D,le));case f.CloseSelect:u.preventDefault(),Ce(w);return;case f.Close:return u.preventDefault(),X(!1);case f.Open:return X(!0);default:return}},Je=u=>{if(u.preventDefault(),_&&!be.current&&Ee(""),be.current){be.current=!1;return}X(!1,!1)},ye=u=>{ie(u)},ut=u=>{ye(u),Ce(u)},Ye=()=>{be.current=!0},Ce=u=>{const h=j[u];if(Ee(""),h)return Te(h.props.value),X(!1);A&&(ot(L),X(!1))},X=(u,h=!0)=>{H(u),h&&ee.current.focus()},mt=e.Children.toArray(j).map((u,h)=>{const D=w===h;return(0,e.cloneElement)(u,{id:`${B}-${h}`,"aria-selected":we===h,"aria-posinset":h+1,"aria-setsize":e.Children.toArray(j).length,ref:le=>{D&&(de.current=le)},onClick:()=>ut(h),onMouseDown:Ye,isSelected:D})}),qe=()=>{ee.current.focus(),Ae&&Ae(),Qe()},pt=()=>{ee.current.focus(),X(!0)},gt=()=>{const u=j.findIndex(h=>{var D;return((D=h.props)==null?void 0:D.children)===L});return L&&u===-1},_e=u=>{u.preventDefault(),X(u,!0)};return e.createElement(Z.g,{hint:Re,error:Ie,id:B},e.createElement(q.T,{"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text"},_),e.createElement(J.K,{spacing:ne||Re||Ie?1:0},ne&&e.createElement(Me.Q,{action:nt,required:st,id:ke},ne),e.createElement(ue.d8,{ref:ze,$disabled:z,hasError:Ie},e.createElement(ue.fv,{wrap:"wrap"},!L&&_&&e.createElement(ue.K7,{id:`${B}-selected-value`},e.createElement(ce.Z,null,Ne())),e.createElement(ue.II,{"aria-activedescendant":Xe,"aria-autocomplete":"list","aria-controls":`${B}-listbox`,"aria-disabled":z,"aria-expanded":oe,"aria-haspopup":"listbox","aria-labelledby":ne?ke:void 0,id:B,onBlur:z?void 0:Je,onClick:z?void 0:_e,onInput:z?void 0:ct,onKeyDown:z?void 0:Ge,placeholder:_?"":Le,readOnly:z,ref:ee,role:"combobox",autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"text",value:L})),e.createElement(O.k,null,(_||L)&&e.createElement(y.zb,{id:`${B}-clear`,"aria-label":x,disabled:z,paddingLeft:3,as:"button",onClick:qe,type:"button"},e.createElement(K.default,null)),e.createElement(y.AV,{disabled:z,paddingLeft:3,"aria-hidden":!0,as:"button",onClick:pt,tabIndex:-1,type:"button"},e.createElement(T.default,null)))),e.createElement(xe.J,null),e.createElement(G.c,null)),oe&&e.createElement(M.J,{id:`${B}-popover`,source:ze,spacing:4,fullWidth:!0,intersectionId:`${B}-listbox-popover-intersection`,onReachEnd:vt&&!De?lt:void 0},e.createElement("div",{role:"listbox",ref:dt,id:`${B}-listbox`,"aria-labelledby":ne?ke:void 0},(Boolean(j.length)||A)&&e.createElement(e.Fragment,null,e.createElement(pe,{activeOptionRef:de,options:mt}),gt()&&A&&e.createElement(me.O,{isSelected:w===j.length,ref:u=>{w===j.length&&(de.current=u)},onMouseDown:Ye,onClick:()=>Ce(),taindex:0},at(L))),!Boolean(j.length)&&!A&&!De&&e.createElement(Oe.x,{paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,ref:de},e.createElement(ce.Z,{textColor:"neutral800"},Ve(L))),De&&e.createElement(O.k,{justifyContent:"center",alignItems:"center",paddingTop:2,paddingBottom:2},e.createElement(rt.a,{small:!0},ve)))))},Se=l=>e.createElement(se,Ue(fe({},l),{creatable:!0}));se.defaultProps=Se.defaultProps={"aria-label":void 0,clearLabel:"clear",creatable:!1,createMessage:l=>`Create "${l}"`,disabled:!1,error:void 0,hasMoreItems:!1,hint:void 0,label:void 0,loading:!1,loadingMessage:"Loading content...",noOptionsMessage:()=>"No results found",onClear:void 0,onCreateOption:void 0,onInputChange:void 0,onLoadMore:void 0,placeholder:"Select or enter a value",value:void 0},se.propTypes={"aria-label":o.string,children:o.oneOfType([o.arrayOf(o.node),o.node]),clearLabel:o.string,creatable:o.bool,createMessage:o.func,disabled:o.bool,error:o.string,hasMoreItems:o.bool,hint:o.oneOfType([o.string,o.node,o.arrayOf(o.node)]),label:o.string,labelAction:o.element,loading:o.bool,loadingMessage:o.string,noOptionsMessage:o.func,onChange:o.func.isRequired,onClear:o.func,onCreateOption:o.func,onInputChange:o.func,onLoadMore:o.func,placeholder:o.string,value:o.string},Se.propTypes=Ue(fe({},se.propTypes),{onCreateOption:o.func.isRequired})},90333:(Pe,$,n)=>{n.d($,{O:()=>Q});var e=n(32735),o=n(60216),k=n(88860),T=n(91225),K=Object.defineProperty,W=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,c=(E,O,y)=>O in E?K(E,O,{enumerable:!0,configurable:!0,writable:!0,value:y}):E[O]=y,v=(E,O)=>{for(var y in O||(O={}))P.call(O,y)&&c(E,y,O[y]);if(W)for(var y of W(O))f.call(O,y)&&c(E,y,O[y]);return E},U=(E,O)=>{var y={};for(var M in E)P.call(E,M)&&O.indexOf(M)<0&&(y[M]=E[M]);if(E!=null&&W)for(var M of W(E))O.indexOf(M)<0&&f.call(E,M)&&(y[M]=E[M]);return y};const Q=(0,e.forwardRef)((E,O)=>{var y=E,{isSelected:M,children:Oe}=y,ce=U(y,["isSelected","children"]);return e.createElement(T.Zq,v({hasRadius:!0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,role:"option",background:"neutral0",isSelected:M,ref:O},ce),e.createElement(k.Z,{textColor:M?"primary600":"neutral800",fontWeight:M?"bold":null},Oe))});Q.defaultProps={isSelected:!1},Q.propTypes={children:o.oneOfType([o.string,o.number]).isRequired,isSelected:o.bool},Q.displayName="ComboboxOption"},91225:(Pe,$,n)=>{n.d($,{II:()=>f,K7:()=>W,Zq:()=>c,d8:()=>K,fv:()=>P});var e=n(62345),o=n(36320),k=n(83292),T=n(30350);const K=(0,k.default)(o.k)`
  position: relative;
  border: 1px solid ${({theme:v,hasError:U})=>U?v.colors.danger600:v.colors.neutral200};
  padding-right: ${({theme:v})=>v.spaces[3]};
  padding-left: ${({theme:v})=>v.spaces[3]};
  border-radius: ${({theme:v})=>v.borderRadius};
  background: ${({theme:v})=>v.colors.neutral0};

  ${({theme:v,$disabled:U})=>U?`
    color: ${v.colors.neutral600};
    background: ${v.colors.neutral150};
  `:void 0}

  ${(0,T.k3)()}
`,W=k.default.div`
  padding: 1px 2px;
  grid-area: 1 / 1 / 2 / 3;
`,P=(0,k.default)(o.k)`
  display: grid;
  flex: 1 1 0%;
  position: relative;
`,f=k.default.input`
  display: inline-grid;
  grid-area: 1 / 1 / 2 / 3;
  grid-template-columns: 0px min-content;
  background: transparent;
  min-height: ${40/16}rem;
  border: none;
  flex: 1;
  font-size: ${14/16}rem;
  color: ${({theme:v})=>v.colors.neutral800};
  outline: none;
  &:focus-visible {
    outline: none;
    box-shadow: none;
    outline-offset: 0;
  }
  &[aria-disabled='true'] {
    background: inherit;
    color: inherit;
    cursor: not-allowed;
  }
`,c=(0,k.default)(e.x)`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  ${({isSelected:v,theme:U})=>v&&`background: ${U.colors.primary100};`}

  &:hover {
    background: ${({theme:v})=>v.colors.primary100};
  }
`}}]);
