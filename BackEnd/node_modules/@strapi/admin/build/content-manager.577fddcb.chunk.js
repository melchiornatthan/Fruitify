(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[994],{37475:(Vc,ut)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(g,re,ue,he,V,le,Ae){var de=le.length-1;switch(V){case 1:this.$=g.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(g);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=le[de-1];case 13:this.$={};break;case 14:this.$=le[de-1];break;case 15:this.$=[le[de-2],le[de]];break;case 16:this.$={},this.$[le[de][0]]=le[de][1];break;case 17:this.$=le[de-2],le[de-2][le[de][0]]=le[de][1];break;case 18:this.$=[];break;case 19:this.$=le[de-1];break;case 20:this.$=[le[de]];break;case 21:this.$=le[de-2],le[de-2].push(le[de]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(g,re){throw new Error(g)},parse:function(g){var re=this,ue=[0],he=[null],V=[],le=this.table,Ae="",de=0,Nt=0,C=0,je=2,xe=1;this.lexer.setInput(g),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var s=this.lexer.yylloc;V.push(s),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function vo(Z){ue.length=ue.length-2*Z,he.length=he.length-Z,V.length=V.length-Z}function Pt(){var Z;return Z=re.lexer.lex()||1,typeof Z!="number"&&(Z=re.symbols_[Z]||Z),Z}for(var Oe,He,Me,Te,wn,Ot,rt={},Ke,Be,Le,F;;){Me=ue[ue.length-1],this.defaultActions[Me]?Te=this.defaultActions[Me]:(Oe==null&&(Oe=Pt()),Te=le[Me]&&le[Me][Oe]);e:if(typeof Te=="undefined"||!Te.length||!Te[0]){if(!C){F=[];for(Ke in le[Me])this.terminals_[Ke]&&Ke>2&&F.push("'"+this.terminals_[Ke]+"'");var T="";this.lexer.showPosition?T="Parse error on line "+(de+1)+`:
`+this.lexer.showPosition()+`
Expecting `+F.join(", ")+", got '"+this.terminals_[Oe]+"'":T="Parse error on line "+(de+1)+": Unexpected "+(Oe==1?"end of input":"'"+(this.terminals_[Oe]||Oe)+"'"),this.parseError(T,{text:this.lexer.match,token:this.terminals_[Oe]||Oe,line:this.lexer.yylineno,loc:s,expected:F})}if(C==3){if(Oe==xe)throw new Error(T||"Parsing halted.");Nt=this.lexer.yyleng,Ae=this.lexer.yytext,de=this.lexer.yylineno,s=this.lexer.yylloc,Oe=Pt()}for(;!(je.toString()in le[Me]);){if(Me==0)throw new Error(T||"Parsing halted.");vo(1),Me=ue[ue.length-1]}He=Oe,Oe=je,Me=ue[ue.length-1],Te=le[Me]&&le[Me][je],C=3}if(Te[0]instanceof Array&&Te.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Me+", token: "+Oe);switch(Te[0]){case 1:ue.push(Oe),he.push(this.lexer.yytext),V.push(this.lexer.yylloc),ue.push(Te[1]),Oe=null,He?(Oe=He,He=null):(Nt=this.lexer.yyleng,Ae=this.lexer.yytext,de=this.lexer.yylineno,s=this.lexer.yylloc,C>0&&C--);break;case 2:if(Be=this.productions_[Te[1]][1],rt.$=he[he.length-Be],rt._$={first_line:V[V.length-(Be||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(Be||1)].first_column,last_column:V[V.length-1].last_column},Ot=this.performAction.call(rt,Ae,Nt,de,this.yy,Te[1],he,V),typeof Ot!="undefined")return Ot;Be&&(ue=ue.slice(0,-1*Be*2),he=he.slice(0,-1*Be),V=V.slice(0,-1*Be)),ue.push(this.productions_[Te[1]][0]),he.push(rt.$),V.push(rt._$),Le=le[ue[ue.length-2]][ue[ue.length-1]],ue.push(Le);break;case 3:return!0}}return!0}},dt=function(){var X={EOF:1,parseError:function(re,ue){if(this.yy.parseError)this.yy.parseError(re,ue);else throw new Error(re)},setInput:function(g){return this._input=g,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.match+=g,this.matched+=g;var re=g.match(/\n/);return re&&this.yylineno++,this._input=this._input.slice(1),g},unput:function(g){return this._input=g+this._input,this},more:function(){return this._more=!0,this},less:function(g){this._input=this.match.slice(g)+this._input},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),re=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+re+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,re,ue,he,V,le;this._more||(this.yytext="",this.match="");for(var Ae=this._currentRules(),de=0;de<Ae.length&&(ue=this._input.match(this.rules[Ae[de]]),!(ue&&(!re||ue[0].length>re[0].length)&&(re=ue,he=de,!this.options.flex)));de++);if(re)return le=re[0].match(/\n.*/g),le&&(this.yylineno+=le.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:le?le[le.length-1].length-1:this.yylloc.last_column+re[0].length},this.yytext+=re[0],this.match+=re[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(re[0].length),this.matched+=re[0],g=this.performAction.call(this,this.yy,this,Ae[he],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var re=this.next();return typeof re!="undefined"?re:this.lex()},begin:function(re){this.conditionStack.push(re)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(re){this.begin(re)}};return X.options={},X.performAction=function(re,ue,he,V){var le=V;switch(he){case 0:break;case 1:return 6;case 2:return ue.yytext=ue.yytext.substr(1,ue.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},X.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],X.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},X}();return r.lexer=dt,r}();ut.parser=p,ut.parse=function(){return p.parse.apply(p,arguments)},ut.main=function(dt){if(!dt[1])throw new Error("Usage: "+dt[0]+" FILE")}},67846:(Vc,ut,p)=>{"use strict";p.r(ut),p.d(ut,{App:()=>$c,default:()=>NC});var r=p(32735),dt=p(99357),X=p(5141),g=p(88425),re=p(28356),ue=p(96709),he=p(27649),V=p(5636),le=p(98978),Ae=p.n(le),de=p(83983);const C=e=>`content-manager.${e}`;var je=p(74506),xe=p(60216),s=p.n(xe);const Pt=(0,r.createContext)();var Oe=Object.defineProperty,He=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,wn=(e,t,n)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ot=(e,t)=>{for(var n in t||(t={}))Me.call(t,n)&&wn(e,n,t[n]);if(He)for(var n of He(t))Te.call(t,n)&&wn(e,n,t[n]);return e},rt=(e,t)=>{var n={};for(var o in e)Me.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&He)for(var o of He(e))t.indexOf(o)<0&&Te.call(e,o)&&(n[o]=e[o]);return n};function Ke(e){var t=e,{attributes:n,buttonData:o,children:a,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:f,relationsLayout:y,removeField:m,selectedItemName:h,setEditFieldToSelect:b}=t,E=rt(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(Pt.Provider,{value:Ot({attributes:n,buttonData:o,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:f,relationsLayout:y,removeField:m,selectedItemName:h,setEditFieldToSelect:b},E)},a)}Ke.defaultProps={attributes:{},buttonData:[],goTo(){},layout:[],metadatas:{},moveItem(){},moveRow(){},onAddData(){},relationsLayout:[],removeField(){},selectedItemName:null,setEditFieldToSelect(){}},Ke.propTypes={attributes:s().object,buttonData:s().array,children:s().node.isRequired,goTo:s().func,layout:s().array,metadatas:s().object,moveItem:s().func,moveRow:s().func,onAddData:s().func,relationsLayout:s().array,removeField:s().func,selectedItemName:s().string,setEditFieldToSelect:s().func};const Be=Ke,Le={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var F=p(83292),T=p(62345),Z=p(36320),z=p(88860),Re=p(50563),We=p(4038),pt=p(47081),Eo=p(16899);const qc=(0,F.default)(T.x)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Bc=(0,F.default)(T.x)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Zc=F.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,Co=({displayedValue:e})=>r.createElement(qc,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,g.pxToRem)(300)},r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(Zc,{type:"button"},r.createElement(Z.k,null,r.createElement(Bc,{background:"neutral200"},r.createElement(Eo.default,null)),r.createElement(T.x,{paddingLeft:6,maxWidth:(0,g.pxToRem)(150)},r.createElement(z.Z,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(T.x,{paddingLeft:3},r.createElement(Z.k,null,r.createElement(Re.h,{icon:r.createElement(We.default,null)}),r.createElement(T.x,{paddingLeft:2},r.createElement(Re.h,{icon:r.createElement(pt.Z,null)}))))));Co.propTypes={displayedValue:s().string.isRequired};const zc=Co;var ce=p(27677),mt=p(68625),Mn=p(35331);const Po=e=>e.length>20?`${e.substring(0,20)}...`:e,Tn=(0,F.default)(Z.k)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Oo=(0,F.default)(Tn)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Wc=(0,F.default)(Z.k)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${z.Z} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${Oo} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,In=({labelField:e,transparent:t,isSibling:n})=>{const o=Po(e);return r.createElement(Wc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(ce.K,{horizontal:!0,spacing:3},r.createElement(Oo,{alignItems:"center"},r.createElement(pt.Z,null)),r.createElement(z.Z,{fontWeight:"bold"},o)),r.createElement(Z.k,{paddingLeft:3},r.createElement(Tn,{alignItems:"center"},r.createElement(mt.Z,null)),r.createElement(Tn,{alignItems:"center"},r.createElement(Mn.default,null))))};In.defaultProps={isSibling:!1,transparent:!1},In.propTypes={isSibling:s().bool,labelField:s().string.isRequired,transparent:s().bool};const Dn=In,_c={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function Uc(e,t,n){if(!e||!t)return{display:"none"};const{x:o,y:a}=n,l=`translate(${o}px, ${a}px)`;return{transform:l,WebkitTransform:l}}const Hc=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:o,currentOffset:a,mouseOffset:l}=(0,je.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return t?r.createElement(Be,null,r.createElement("div",{style:_c},r.createElement("div",{style:Uc(o,a,l),className:"col-md-2"},[Le.EDIT_RELATION,Le.EDIT_FIELD,Le.FIELD].includes(e)&&r.createElement(Dn,{labelField:n.labelField}),e===Le.COMPONENT&&r.createElement(zc,{displayedValue:n.displayedValue})))):null},Ro=(0,r.createContext)();var Gc=p(47533),Y=p(92891);const wo=(0,r.createContext)(),JC=(0,r.createContext)(),XC=null;var ge=p(4409);const Mo=e=>e["content-manager_editViewLayoutManager"].currentLayout;var Kc=Object.defineProperty,Qc=Object.defineProperties,Yc=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Jc=Object.prototype.hasOwnProperty,Xc=Object.prototype.propertyIsEnumerable,Io=(e,t,n)=>t in e?Kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eu=(e,t)=>{for(var n in t||(t={}))Jc.call(t,n)&&Io(e,n,t[n]);if(To)for(var n of To(t))Xc.call(t,n)&&Io(e,n,t[n]);return e},tu=(e,t)=>Qc(e,Yc(t));const Qe=()=>{const e=(0,ge.useSelector)(Mo),t=(0,r.useCallback)(n=>(0,Y.get)(e,["components",n],{}),[e]);return tu(eu({},e),{getComponentLayout:t})};var nu=p(43653),$e=p.n(nu),me=p(17247),ru=p(99381),Ze=p.n(ru);const Vt=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const o=Ze()(e),a=o.splice(t,1);return o.splice(n,0,a[0]),o}return e},Do=e=>{const t=e.type;return t==="relation"?!(0,Y.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},Lo=(e,t)=>Object.keys(e).reduce((n,o)=>{const a=(0,Y.get)(e,[o],{}),{default:l,component:i,type:c,required:u,min:d,repeatable:f}=a;if(c==="json"&&(n[o]=null),c==="json"&&u===!0&&(n[o]={}),l!==void 0&&(n[o]=l),c==="component"){const y=(0,Y.get)(t,[i,"attributes"],{}),m=Lo(y,t);if(u===!0&&(n[o]=f===!0?[]:m),d&&f===!0&&u){n[o]=[];for(let h=0;h<d;h+=1)n[o].push(m)}}return c==="dynamiczone"&&u===!0&&(n[o]=[]),n},{}),qt=Lo;var ou=Object.defineProperty,su=Object.defineProperties,au=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,ko=(e,t,n)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ln=(e,t)=>{for(var n in t||(t={}))So.call(t,n)&&ko(e,n,t[n]);if(Bt)for(var n of Bt(t))xo.call(t,n)&&ko(e,n,t[n]);return e},Sn=(e,t)=>su(e,au(t)),iu=(e,t)=>{var n={};for(var o in e)So.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Bt)for(var o of Bt(e))t.indexOf(o)<0&&xo.call(e,o)&&(n[o]=e[o]);return n};const Zt=e=>{var t=e,{layouts:n,metadatas:o}=t,a=iu(t,["layouts","metadatas"]);const l=n.list.map(u=>u.name?u.name:u),i=Object.keys(o).reduce((u,d)=>{const f=(0,Y.get)(o,[d],{});let y=f.edit;return y.mainField&&(y=Sn(Ln({},y),{mainField:f.edit.mainField.name})),Sn(Ln({},u),{[d]:{edit:y,list:(0,Y.omit)(f.list,["mainField"])}})},{}),c=n.edit.map(u=>u.map(({name:d,size:f})=>({name:d,size:f})));return Sn(Ln({},a),{layouts:{edit:c,list:l},metadatas:i})};var lu=Object.defineProperty,cu=Object.defineProperties,uu=Object.getOwnPropertyDescriptors,Fo=Object.getOwnPropertySymbols,du=Object.prototype.hasOwnProperty,pu=Object.prototype.propertyIsEnumerable,Ao=(e,t,n)=>t in e?lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mu=(e,t)=>{for(var n in t||(t={}))du.call(t,n)&&Ao(e,n,t[n]);if(Fo)for(var n of Fo(t))pu.call(t,n)&&Ao(e,n,t[n]);return e},fu=(e,t)=>cu(e,uu(t));const gu=(e,t)=>e.map(n=>fu(mu({},n),{subject:t})),jo=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,o)=>(n[o]=gu(t[o],e),n),{})},$o=e=>e.split(".").filter(t=>(0,Y.isNaN)(parseInt(t,10))),No=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),fe=e=>`/content-manager/${e}`;var yu=Object.defineProperty,Vo=Object.getOwnPropertySymbols,hu=Object.prototype.hasOwnProperty,bu=Object.prototype.propertyIsEnumerable,qo=(e,t,n)=>t in e?yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zt=(e,t)=>{for(var n in t||(t={}))hu.call(t,n)&&qo(e,n,t[n]);if(Vo)for(var n of Vo(t))bu.call(t,n)&&qo(e,n,t[n]);return e};const Bo=(e,t,n)=>{const o=c=>t.find(u=>u.uid===c),a=Object.assign({},e),l=e[n].uid,i=o(l);return(0,Y.set)(a,[n],zt(zt({},e[n]),i)),Object.keys(e.components).forEach(c=>{const u=o(c);(0,Y.set)(a,["components",c],zt(zt({},e.components[c]),u))}),a};var vu=Object.defineProperty,Eu=Object.defineProperties,Cu=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,Pu=Object.prototype.hasOwnProperty,Ou=Object.prototype.propertyIsEnumerable,zo=(e,t,n)=>t in e?vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wo=(e,t)=>{for(var n in t||(t={}))Pu.call(t,n)&&zo(e,n,t[n]);if(Zo)for(var n of Zo(t))Ou.call(t,n)&&zo(e,n,t[n]);return e},_o=(e,t)=>Eu(e,Cu(t));const Rt=(e,t)=>e&&Object.keys(e).reduce((n,o)=>{const a=n[o];return a===null?n:Array.isArray(a)?Array.isArray(n)?(n[o]=Rt(a,t),n):_o(Wo({},n),{[o]:a.map(l=>Rt(l,t))}):typeof a=="object"?Array.isArray(n)?(n[o]=Rt(a,t),n):_o(Wo({},n),{[o]:Rt(a,t)}):(o===t&&delete n[o],n)},e),Ru=Rt,Uo=(e,t,n)=>{const o=(a,l)=>Object.keys(a).reduce((i,c)=>{const u=(0,g.getType)(l,c),d=(0,Y.get)(a,c),f=(0,g.getOtherInfos)(l,[c,"component"]),y=(0,g.getOtherInfos)(l,[c,"repeatable"]);return u==="dynamiczone"?(i[c]=d.map(m=>o(m,n[m.__component])),i):u==="component"?(y?i[c]=d&&d.map(m=>o(m,n[f])):i[c]=d&&o(d,n[f]),i):(u!=="password"&&(i[c]=d),i)},{});return o(e,t)};var wu=Object.defineProperty,Mu=Object.defineProperties,Tu=Object.getOwnPropertyDescriptors,Ho=Object.getOwnPropertySymbols,Iu=Object.prototype.hasOwnProperty,Du=Object.prototype.propertyIsEnumerable,Go=(e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wt=(e,t)=>{for(var n in t||(t={}))Iu.call(t,n)&&Go(e,n,t[n]);if(Ho)for(var n of Ho(t))Du.call(t,n)&&Go(e,n,t[n]);return e},Mt=(e,t)=>Mu(e,Tu(t));const Ko=(e,t)=>t.find(n=>n.uid===e),Lu=(e,t)=>{const n=Su(e,t),o=Qo(n.contentType,t),a=xu(n.contentType,n.components);return(0,Y.set)(n,["contentType","layouts","edit"],o),(0,Y.set)(n,["contentType","layouts","list"],a),Object.keys(n.components).forEach(l=>{const i=Qo(n.components[l],t);(0,Y.set)(n,["components",l,"layouts","edit"],i)}),n},Su=(e,t)=>{const n=Bo((0,Y.cloneDeep)(e),t,"contentType"),{components:o,contentType:a}=n,l=i=>Object.keys(i.metadatas).reduce((c,u)=>{const d=(0,Y.get)(i,["attributes",u],{});let f=i.metadatas[u];if(d.type==="relation"){const y=Ko(d.targetModel,t),m=f.edit.mainField,h={name:m,schema:(0,Y.get)(y,["attributes",m])};f={list:Mt(wt({},f.list),{mainField:h}),edit:Mt(wt({},f.edit),{mainField:h})}}return c[u]=f,c},{});return(0,Y.set)(n,["contentType","metadatas"],l(a)),Object.keys(o).forEach(i=>{const c=o[i],u=l(c);(0,Y.set)(n,["components",i,"metadatas"],u)}),n},Qo=(e,t)=>e.layouts.edit.reduce((n,o)=>{const a=o.map(l=>{const i=(0,Y.get)(e,["attributes",l.name],{}),c=Mt(wt({},l),{fieldSchema:i,metadatas:(0,Y.get)(e,["metadatas",l.name,"edit"],{})});if(i.type==="relation"){const d=Ko(i.targetModel,t).pluginOptions||{};(0,Y.set)(c,"targetModelPluginOptions",d),(0,Y.set)(c,"queryInfos",{shouldDisplayRelationLink:ku(e,l.name,t)})}return c});return n.push(a),n},[]),xu=(e,t)=>e.layouts.list.reduce((o,a)=>{const l=(0,Y.get)(e,["attributes",a],{}),i=(0,Y.get)(e,["metadatas",a,"list"],{}),c=l.type;if(c==="relation")return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i}),o;if(c==="component"){const u=t[l.component],d=u.settings.mainField,f=u.attributes[d];return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:Mt(wt({},i),{mainField:Mt(wt({},f),{name:d})})}),o}return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i}),o},[]),ku=(e,t,n)=>{const o=(0,Y.get)(e,["attributes",t,"targetModel"],"");return Fu(n).includes(o)},Fu=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),Yo=Lu;var Wt=p(97889),Au=Object.defineProperty,ju=Object.defineProperties,$u=Object.getOwnPropertyDescriptors,Jo=Object.getOwnPropertySymbols,Nu=Object.prototype.hasOwnProperty,Vu=Object.prototype.propertyIsEnumerable,Xo=(e,t,n)=>t in e?Au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t)=>{for(var n in t||(t={}))Nu.call(t,n)&&Xo(e,n,t[n]);if(Jo)for(var n of Jo(t))Vu.call(t,n)&&Xo(e,n,t[n]);return e},es=(e,t)=>ju(e,$u(t));const qu={error:null,isLoading:!0,layout:{},layouts:{}},Bu=(e,t)=>(0,Wt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const o=t.data.contentType.uid;n.layout=t.data,n.layouts[o]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const o=e.layout;n.layout=es(_t({},o),{contentType:_t({uid:o.contentType.uid},t.newLayout.contentType)}),n.layouts[o.contentType.uid]=es(_t({},o),{contentType:_t({uid:o.contentType.uid},t.newLayout.contentType)});break}default:return n}});var xn=p(98178),Zu=p(34947);const Tt=()=>e=>e["content-manager_app"]||Zu.E,pP=()=>createSelector(Tt(),e=>e),mP=()=>createSelector(Tt(),e=>e.models),zu=()=>(0,xn.P1)(Tt(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),kn=()=>(0,xn.P1)(Tt(),({components:e,models:t})=>({schemas:[...e,...t]})),fP=null;var Wu=p(98399),_u=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const ts=e=>{const[{error:t,isLoading:n,layout:o,layouts:a},l]=(0,r.useReducer)(Bu,qu),i=(0,r.useMemo)(kn,[]),{schemas:c}=(0,ge.useSelector)(y=>i(y),ge.shallowEqual),u=(0,r.useRef)(!0),d=(0,r.useCallback)((y,m)=>_u(void 0,null,function*(){if(a[y]){l({type:"SET_LAYOUT_FROM_STATE",uid:y});return}l({type:"GET_DATA"});try{const h=fe(`content-types/${y}/configuration`),{data:{data:b}}=yield me.be.get(h,{cancelToken:m.token});l({type:"GET_DATA_SUCCEEDED",data:Yo(b,c)})}catch(h){if($e().isCancel(h))return;u.current&&Wu.error(h),u.current&&l({type:"GET_DATA_ERROR",error:h})}}),[a,c]);(0,r.useEffect)(()=>()=>{u.current=!1},[]),(0,r.useEffect)(()=>{const m=$e().CancelToken.source();return d(e,m),()=>{m.cancel("Operation canceled by the user.")}},[e,d]);const f=(0,r.useCallback)(y=>{l({type:"UPDATE_LAYOUT",newLayout:Yo(y,c)})},[c]);return{error:t,isLoading:n,layout:o,updateLayout:f}},Uu=e=>e["content-manager_app"].collectionTypeLinks;var Ge=p(77997),Hu=p(33795),w=p.n(Hu),Gu=p(85973),ns=p.n(Gu),Ku=Object.defineProperty,Qu=Object.defineProperties,Yu=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,Ju=Object.prototype.hasOwnProperty,Xu=Object.prototype.propertyIsEnumerable,os=(e,t,n)=>t in e?Ku(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ed=(e,t)=>{for(var n in t||(t={}))Ju.call(t,n)&&os(e,n,t[n]);if(rs)for(var n of rs(t))Xu.call(t,n)&&os(e,n,t[n]);return e},td=(e,t)=>Qu(e,Yu(t));const ss=(e,t)=>Object.keys(e).reduce((n,o)=>{const a=e[o],l=w()(t,[o],a);return ns()(a)?td(ed({},n),{[o]:ss(a,l)}):(n[o]=l,n)},{}),nd=(e,t,n)=>{const o=e.find(({to:f})=>f.includes(t));if(!o)return"/";const{to:a,search:l}=o,i=(0,Ge.parse)(l),c=(0,Ge.parse)(n.substring(1)),u=ss(i,c);return`${a}?${(0,Ge.stringify)(u,{encode:!1})}`},as=e=>{const[{rawQuery:t}]=(0,g.useQueryParams)(),n=(0,ge.useSelector)(Uu);return nd(n,e,t)},ot=()=>(0,r.useContext)(Pt),is=()=>{const{search:e}=(0,X.useLocation)(),t=e?(0,Ge.parse)(e.substring(1)):{};return t.plugins?(0,Ge.stringify)({plugins:t.plugins},{encode:!1}):""};var ls=p(89334);const rd=(e,t,n)=>({type:ls.m,permissions:e,__meta__:{plugins:t,containerName:n}}),od=()=>({type:ls.Q}),sd=e=>e["content-manager_rbacManager"].permissions,ad=e=>e.rbacProvider.collectionTypesRelatedPermissions,cs=(e,t,n="listView")=>{const o=(0,ge.useSelector)(ad),a=(0,ge.useSelector)(sd),l=(0,ge.useDispatch)(),i=o[t];return(0,r.useEffect)(()=>i?(l(rd(i,e?e.plugins:null,n)),()=>{l(od())}):()=>{},[i,l,e,n]),a},PP=()=>useContext(WysiwygContext),OP=null,id=e=>{const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current};var Ut=p(70836),us=p(4460);const ld=()=>({type:us.c}),cd=(e,t)=>({type:us.O,layout:e,query:t});var ud=p(8266),Ye=p.n(ud),ft=p(17e3),ze=p(15335),Ce=p(5803),dd=p(2669),pd=p(66694);const md=()=>(0,r.useContext)(pd.ux),ds=e=>{const{getAdminInjectedComponents:t}=md(),[n,o,a]=e.split(".");return t(n,o,a)};var fd=Object.defineProperty,Ht=Object.getOwnPropertySymbols,ps=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,fs=(e,t,n)=>t in e?fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gd=(e,t)=>{for(var n in t||(t={}))ps.call(t,n)&&fs(e,n,t[n]);if(Ht)for(var n of Ht(t))ms.call(t,n)&&fs(e,n,t[n]);return e},yd=(e,t)=>{var n={};for(var o in e)ps.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Ht)for(var o of Ht(e))t.indexOf(o)<0&&ms.call(e,o)&&(n[o]=e[o]);return n};const gs=e=>{var t=e,{area:n}=t,o=yd(t,["area"]);return ds(n).map(l=>r.createElement(l.Component,gd({key:l.name},o)))};gs.propTypes={area:s().string.isRequired};const Gt=gs;var hd=Object.defineProperty,ys=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,vd=Object.prototype.propertyIsEnumerable,hs=(e,t,n)=>t in e?hd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bs=(e,t)=>{for(var n in t||(t={}))bd.call(t,n)&&hs(e,n,t[n]);if(ys)for(var n of ys(t))vd.call(t,n)&&hs(e,n,t[n]);return e};function Ed(e,t){return n=>{const o=t(n.name);return r.createElement(e,bs(bs({},n),o))}}const Cd=Ed;function Pd(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:o,formErrors:a,modifiedData:l,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,readActionAllowedFields:d,updateActionAllowedFields:f}=(0,g.useCMEditViewDataManager)(),y=(0,r.useMemo)(()=>(0,Y.get)(l,[e],[]).map(b=>b.__component),[l,e]),m=(0,r.useMemo)(()=>(o?n:f).includes(e),[e,o,n,f]),h=(0,r.useMemo)(()=>(o?[]:d).includes(e),[e,o,d]);return{addComponentToDynamicZone:t,formErrors:a,isCreatingEntry:o,isFieldAllowed:m,isFieldReadable:h,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,dynamicDisplayedComponents:y}}const Od=Pd;var Fn=p(10504),An=p(83828),jn=p(61762),$n=p(89966),Rd=p(14949),wd=p(65261),Md=p(61868),Td=p.n(Md),vs=p(86308),Id=Object.defineProperty,Es=Object.getOwnPropertySymbols,Dd=Object.prototype.hasOwnProperty,Ld=Object.prototype.propertyIsEnumerable,Cs=(e,t,n)=>t in e?Id(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sd=(e,t)=>{for(var n in t||(t={}))Dd.call(t,n)&&Cs(e,n,t[n]);if(Es)for(var n of Es(t))Ld.call(t,n)&&Cs(e,n,t[n]);return e};const xd=F.default.span`
  > svg {
    width: ${(0,g.pxToRem)(24)};
    height: ${(0,g.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Nn=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:o}=(0,V.useIntl)();return r.createElement(r.Fragment,null,r.createElement(T.x,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(ce.K,{spacing:2},r.createElement(Z.k,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement(xd,null,r.createElement(vs.Z,null))),r.createElement(Z.k,{justifyContent:"center"},r.createElement(z.Z,{textColor:"primary600",variant:"pi",fontWeight:"bold"},o({id:C("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(z.Z,{textColor:"danger600",variant:"pi"},o({id:e.id,defaultMessage:e.id},Sd({},e.values))))};Nn.defaultProps={error:void 0,isReadOnly:!1},Nn.propTypes={error:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),isReadOnly:s().bool,onClick:s().func.isRequired};const Ps=Nn;var kd=p(9086),Fd=p.n(kd),Ad=p(88708),Vn=p.n(Ad),jd=p(27509),Kt=p.n(jd),MP=p(40795),$d=p(88591),Nd=p.n($d),qn=p(59845),Vd=p(20871),qd=p.n(Vd),Bd=p(48375),Os=p.n(Bd),Zd=p(31089),zd=p.n(Zd),Wd=p(16043),_d=p.n(Wd),Ud=p(5109),Hd=p.n(Ud),Gd=p(47955),Kd=p.n(Gd),Qd=p(95706),Yd=p.n(Qd),Jd=p(6658),Xd=p.n(Jd),ep=p(36407),tp=p.n(ep),np=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});(()=>np(void 0,null,function*(){yield p.e(7347).then(p.bind(p,98362))}))();const gt=new(Nd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight(e,t){if(t&&t!=="auto"&&(0,qn.getLanguage)(t))return'<pre class="hljs language-'+gt.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,qn.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,qn.highlightAuto)(e);return'<pre class="hljs language-'+gt.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+gt.utils.escapeHtml(e)+"</code></pre>"}}).use(qd()).use(Os(),"warning").use(Os(),"tip").use(zd()).use(_d()).use(Hd()).use(Kd()).use(Yd()).use(Xd()).use(tp());gt.renderer.rules.footnote_ref=(e,t,n,o,a)=>'<sup class="footnote-ref"><span>'+a.rules.footnote_caption(e,t,n,o,a)+"</span></sup>",gt.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const rp=gt;var op=p(13993),Rs=p.n(op),sp=Object.defineProperty,ap=Object.defineProperties,ip=Object.getOwnPropertyDescriptors,ws=Object.getOwnPropertySymbols,lp=Object.prototype.hasOwnProperty,cp=Object.prototype.propertyIsEnumerable,Ms=(e,t,n)=>t in e?sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,up=(e,t)=>{for(var n in t||(t={}))lp.call(t,n)&&Ms(e,n,t[n]);if(ws)for(var n of ws(t))cp.call(t,n)&&Ms(e,n,t[n]);return e},dp=(e,t)=>ap(e,ip(t));const pp=dp(up({},Rs().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),mp=e=>Rs()(e,pp),fp=F.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,Bn=({data:e})=>{const t=(0,r.useMemo)(()=>mp(rp.render(e.replaceAll("\\n",`
`)||"")),[e]);return r.createElement(fp,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};Bn.defaultProps={data:""},Bn.propTypes={data:s().string};const Ts=(0,r.memo)(Bn),gp=F.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`;var Zn=p(69783);const ke=(0,F.default)(Re.h)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,yp=(0,F.default)(ke)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,Is=(0,F.default)(Re.o)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,Ds=(0,F.default)(Re.h)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,hp=(0,F.default)(Re.o)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,bp=F.default.div`
  position: relative;
  height: calc(100% - 48px);
`,vp=(0,F.default)(Zn.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var Qt=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,Ep=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,Cp=/[*+-]\s/;function Pp(e){if(e.getOption("disableInput"))return Kt().Pass;for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){var a=t[o].head,l=e.getStateAfter(a.line),i=l.list!==!1,c=l.quote!==0,u=e.getLine(a.line),d=Qt.exec(u),f=/^\s*$/.test(u.slice(0,a.ch));if(!t[o].empty()||!i&&!c||!d||f){e.execCommand("newlineAndIndent");return}if(Ep.test(u)){var y=c&&/>\s*$/.test(u),m=!/>\s*$/.test(u);(y||m)&&e.replaceRange("",{line:a.line,ch:0},{line:a.line,ch:a.ch+1}),n[o]=`
`}else{var h=d[1],b=d[5],E=!(Cp.test(d[2])||d[2].indexOf(">")>=0),k=E?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[o]=`
`+h+k+b,E&&Op(e,a)}}e.replaceSelections(n)}function Op(e,t){var n=t.line,o=0,a=0,l=Qt.exec(e.getLine(n)),i=l[1];do{o+=1;var c=n+o,u=e.getLine(c),d=Qt.exec(u);if(d){var f=d[1],y=parseInt(l[3],10)+o-a,m=parseInt(d[3],10),h=m;if(i===f&&!isNaN(m))y===m&&(h=m+1),y>m&&(h=y+1),e.replaceRange(u.replace(Qt,f+h+d[4]+d[5]),{line:c,ch:0},{line:c,ch:u.length});else{if(i.length>f.length||i.length<f.length&&o===1)return;a+=1}}}while(d)}const Rp=Pp,zn=({disabled:e,editorRef:t,error:n,isPreviewMode:o,isExpandMode:a,name:l,onChange:i,placeholder:c,textareaRef:u,value:d})=>{const f=(0,r.useRef)(i);return(0,r.useEffect)(()=>{t.current=Kt().fromTextArea(u.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:c,spellcheck:!0,inputStyle:"contenteditable"}),Kt().commands.newlineAndIndentContinueMarkdownList=Rp,t.current.on("change",y=>{f.current({target:{name:l,value:y.getValue(),type:"wysiwyg"}})})},[t,u,l,c]),(0,r.useEffect)(()=>{d&&!t.current.state.focused&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{o||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,o,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(bp,null,r.createElement(gp,{isExpandMode:a,disabled:e||o},r.createElement("textarea",{ref:u})),o&&r.createElement(Ts,{data:d}))};zn.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},zn.propTypes={disabled:s().bool,editorRef:s().shape({current:s().any}).isRequired,error:s().string,isPreviewMode:s().bool,isExpandMode:s().bool,name:s().string.isRequired,onChange:s().func.isRequired,placeholder:s().string,textareaRef:s().shape({current:s().any}).isRequired,value:s().string};const wp=zn;var Ls=p(67563),be=p(41415),_e=p(70218),Pe=p(84967),Mp=p(46406),Ss=p(73906),xs=p(49844),ks=p(99283),Tp=p(83139),Ip=p(35635),Dp=p(20063),Lp=p(80601),Sp=p(11417),xp=p(43231),kp=p(65663),Fs=p(49825);const Wn=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:o,onActionClick:a,onToggleMediaLib:l,onTogglePreviewMode:i})=>{const[c,u]=(0,r.useState)(!1),{formatMessage:d}=(0,V.useIntl)(),f=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),y=(0,r.useRef)(),m=()=>{u(h=>!h)};return e||o?r.createElement(T.x,{padding:2,background:"neutral100"},r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(Z.k,null,r.createElement(_e.P,{disabled:!0,id:"selectTitle",placeholder:f,size:"S","aria-label":f},r.createElement(Pe.W,{value:"h1"},"h1"),r.createElement(Pe.W,{value:"h2"},"h2"),r.createElement(Pe.W,{value:"h3"},"h3"),r.createElement(Pe.W,{value:"h4"},"h4"),r.createElement(Pe.W,{value:"h5"},"h5"),r.createElement(Pe.W,{value:"h6"},"h6")),r.createElement(Is,null,r.createElement(ke,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Ss.Z,null)}),r.createElement(ke,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(xs.Z,null)}),r.createElement(ke,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(ks.Z,null)})),r.createElement(Ds,{disabled:!0,id:"more",label:"More",icon:r.createElement(Fs.Z,null)})),!n&&r.createElement(be.z,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(T.x,{padding:2,background:"neutral100"},r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(Z.k,null,r.createElement(_e.P,{id:"selectTitle",placeholder:f,size:"S",onChange:h=>a(h,t)},r.createElement(Pe.W,{value:"h1"},"h1"),r.createElement(Pe.W,{value:"h2"},"h2"),r.createElement(Pe.W,{value:"h3"},"h3"),r.createElement(Pe.W,{value:"h4"},"h4"),r.createElement(Pe.W,{value:"h5"},"h5"),r.createElement(Pe.W,{value:"h6"},"h6")),r.createElement(Is,null,r.createElement(ke,{onClick:()=>a("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Ss.Z,null)}),r.createElement(ke,{onClick:()=>a("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(xs.Z,null)}),r.createElement(ke,{onClick:()=>a("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(ks.Z,null)})),r.createElement(Ds,{ref:y,onClick:m,id:"more",label:"More",icon:r.createElement(Fs.Z,null)}),c&&r.createElement(Mp.J,{centered:!0,source:y,spacing:4,id:"popover"},r.createElement(Ls.i,{onEscape:m,restoreFocus:!1},r.createElement(Z.k,null,r.createElement(hp,null,r.createElement(ke,{onClick:()=>a("Strikethrough",t,m),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(Tp.Z,null)}),r.createElement(ke,{onClick:()=>a("BulletList",t,m),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Ip.Z,null)}),r.createElement(ke,{onClick:()=>a("NumberList",t,m),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Dp.Z,null)})),r.createElement(Re.o,null,r.createElement(ke,{onClick:()=>a("Code",t,m),id:"Code",label:"Code",name:"Code",icon:r.createElement(Lp.Z,null)}),r.createElement(ke,{onClick:()=>{m(),l()},id:"Image",label:"Image",name:"Image",icon:r.createElement(Sp.Z,null)}),r.createElement(yp,{onClick:()=>a("Link",t,m),id:"Link",label:"Link",name:"Link",icon:r.createElement(xp.Z,null)}),r.createElement(ke,{onClick:()=>a("Quote",t,m),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(kp.Z,null)})))))),i&&r.createElement(be.z,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};Wn.defaultProps={isPreviewMode:!1,onActionClick(){},onToggleMediaLib(){},onTogglePreviewMode:void 0},Wn.propTypes={disabled:s().bool.isRequired,editorRef:s().shape({current:s().any}).isRequired,isExpandMode:s().bool.isRequired,isPreviewMode:s().bool,onActionClick:s().func,onToggleMediaLib:s().func,onTogglePreviewMode:s().func};const Fp=Wn;var Ap=p(18070);const _n=({onToggleExpand:e})=>{const{formatMessage:t}=(0,V.useIntl)();return r.createElement(T.x,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(Z.k,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(vp,{id:"expand",onClick:e},r.createElement(z.Z,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(Ap.Z,null))))};_n.defaultProps={onToggleExpand(){}},_n.propTypes={onToggleExpand:s().func};const jp=_n;var $p=Object.defineProperty,As=Object.getOwnPropertySymbols,Np=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,js=(e,t,n)=>t in e?$p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qp=(e,t)=>{for(var n in t||(t={}))Np.call(t,n)&&js(e,n,t[n]);if(As)for(var n of As(t))Vp.call(t,n)&&js(e,n,t[n]);return e};const Un=({id:e,error:t,name:n,description:o})=>{const{formatMessage:a}=(0,V.useIntl)(),l=o?a({id:o.id,defaultMessage:o.defaultMessage},qp({},o.values)):"";return!l||t?null:r.createElement(z.Z,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},l)};Un.defaultProps={id:void 0,description:void 0,error:void 0},Un.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),error:s().string,id:s().string,name:s().string.isRequired};const Bp=Un,$s=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Ns=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},Vs=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},qs=(e,t)=>{const n=e.current.getSelection();let o;if(n){const a=$s(t,n);e.current.replaceSelection(a),e.current.focus()}else{o=Ns(t),e.current.replaceSelection(o.editedText),e.current.focus();const{line:a,ch:l}=e.current.getCursor(),i=l-o.selection.end,c=l-o.selection.end-o.selection.start;e.current.setSelection({line:a,ch:c},{line:a,ch:i})}},Zp=(e,t)=>{const n=e.current.getDoc(),o=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const a=n.listSelections();let l=null;e.current.operation(function(){a.forEach(function(i){const c=[i.head.line,i.anchor.line].sort();l==null&&(l=n.getLine(c[0]).startsWith(o));for(let u=c[0];u<=c[1];u++)if(l)n.getLine(u).startsWith(o)&&n.replaceRange("",{line:u,ch:0},{line:u,ch:o.length});else{const d=t==="BulletList"?"- ":`${u+1}. `;n.replaceRange(d,{line:u,ch:0})}})})}else{let{line:a}=n.getCursor();const l=Vs(t),i=e.current.getLine(a),c=l+i;e.current.setSelection({line:a,ch:0},{line:a,ch:i.length}),e.current.replaceSelection(c)}e.current.focus()},zp=(e,t)=>{let{line:n}=e.current.getCursor();const o=Vs(t),a=e.current.getLine(n),l=a.replace(/#{1,6}\s/g,"").trim(),i=o+l;e.current.setSelection({line:n,ch:0},{line:n,ch:a.length}),e.current.replaceSelection(i),setTimeout(()=>{const c=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:c})},0)},Wp=(e,t)=>{let{line:n,ch:o}=e.current.getCursor();t.forEach((a,l)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(l>0||l===0&&o!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),a.mime.includes("image")?e.current.replaceSelection(`![${a.alt}](${a.url})`):e.current.replaceSelection(`[${a.alt}](${a.url})`)}),setTimeout(()=>e.current.focus(),0)},_p=(e,t,n,o,a)=>{const l=$s(t,a),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(l),t==="Code"){let{line:c}=e.current.getCursor();e.current.setCursor({line:c-1,ch:a.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Up=(e,t,n,o)=>{const a=Ns(t),l=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(a.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),c=i-a.selection.end,u=i-a.selection.end-a.selection.start;e.current.setSelection({line:n,ch:u},{line:n,ch:c})}e.current.replaceRange(l,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Hp=(e,t)=>{const n=e.current.getSelection();let{line:o}=e.current.getCursor(),a=e.current.getLine(o).length;n?_p(e,t,o,a,n):Up(e,t,o,a)};var Gp=p(71933),Kp=p(74464);const Qp=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,Yp=(0,F.default)(Z.k)`
  background: ${({theme:e})=>Qp(e.colors.neutral800,.2)};
`,Jp=(0,F.default)(T.x)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Xp=(0,F.default)(Zn.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Hn=({children:e,isExpandMode:t,error:n,previewContent:o,onCollapse:a})=>{const{formatMessage:l}=(0,V.useIntl)();return(0,r.useEffect)(()=>{const i=document.body;return t&&i.classList.add("lock-body-scroll"),()=>{t&&i.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(Gp.h,{role:"dialog","aria-modal":!1},r.createElement(Ls.i,{onEscape:a},r.createElement(Yp,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:a},r.createElement(T.x,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:i=>i.stopPropagation()},r.createElement(Z.k,{height:"100%",alignItems:"flex-start"},r.createElement(Jp,{flex:"1",height:"100%"},e),r.createElement(T.x,{flex:"1",height:"100%"},r.createElement(Z.k,{height:(0,g.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(Xp,{id:"collapse",onClick:a},r.createElement(z.Z,null,l({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(Kp.Z,null))),r.createElement(T.x,{position:"relative",height:"100%"},r.createElement(Ts,{data:o})))))))):r.createElement(T.x,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};Hn.defaultProps={error:void 0,previewContent:""},Hn.propTypes={children:s().node.isRequired,error:s().string,isExpandMode:s().bool.isRequired,previewContent:s().string,onCollapse:s().func.isRequired};var em=Object.defineProperty,Bs=Object.getOwnPropertySymbols,tm=Object.prototype.hasOwnProperty,nm=Object.prototype.propertyIsEnumerable,Zs=(e,t,n)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zs=(e,t)=>{for(var n in t||(t={}))tm.call(t,n)&&Zs(e,n,t[n]);if(Bs)for(var n of Bs(t))nm.call(t,n)&&Zs(e,n,t[n]);return e};const rm=(0,F.default)(T.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,om=(0,F.default)(z.Z)`
  line-height: 0;
`,Gn=({description:e,disabled:t,error:n,intlLabel:o,labelAction:a,name:l,onChange:i,placeholder:c,value:u,required:d})=>{const{formatMessage:f}=(0,V.useIntl)(),y=(0,r.useRef)(null),m=(0,r.useRef)(null),[h,b]=(0,r.useState)(!1),[E,k]=(0,r.useState)(!1),[O,P]=(0,r.useState)(!1),{components:L}=(0,g.useLibrary)(),v=L["media-library"],R=()=>k(G=>!G),I=()=>b(G=>!G),M=()=>{b(!1),P(G=>!G)},H=(G,j,D)=>{switch(G){case"Link":case"Strikethrough":{qs(j,G),D();break}case"Code":case"Quote":{Hp(j,G),D();break}case"Bold":case"Italic":case"Underline":{qs(j,G);break}case"BulletList":case"NumberList":{Zp(j,G),D();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{zp(j,G);break}default:}},W=G=>{const j=G.map(D=>({alt:D.alternativeText||D.name,url:(0,g.prefixFileUrlWithBackendUrl)(D.url),mime:D.mime}));Wp(m,j),k(!1)},q=c?f({id:c.id,defaultMessage:c.defaultMessage},zs({},c.values)):"",_=o.id?f({id:o.id,defaultMessage:o.defaultMessage},zs({},o.values)):l;return r.createElement(r.Fragment,null,r.createElement(ce.K,{spacing:1},r.createElement(ce.K,{horizontal:!0,spacing:1},r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},_,d&&r.createElement(om,{textColor:"danger600"},"*")),a&&r.createElement(rm,{paddingLeft:1},a)),r.createElement(Hn,{isExpandMode:O,error:n,previewContent:u,onCollapse:M},r.createElement(Fp,{isExpandMode:O,editorRef:m,isPreviewMode:h,onActionClick:H,onToggleMediaLib:R,onTogglePreviewMode:O?void 0:I,disabled:t}),r.createElement(wp,{disabled:t,isExpandMode:O,editorRef:m,error:n,isPreviewMode:h,name:l,onChange:i,placeholder:q,textareaRef:y,value:u}),!O&&r.createElement(jp,{onToggleExpand:M})),r.createElement(Bp,{description:e,name:l,error:n})),n&&r.createElement(T.x,{paddingTop:1},r.createElement(z.Z,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),E&&r.createElement(v,{onClose:R,onSelectAssets:W}))};Gn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},Gn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,onChange:s().func.isRequired,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool,value:s().string};const sm=Gn;var am=p(16285),im=p.n(am),Ws=p(67014),_s=p(47851),lm=p(37475);const cm=F.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,um=(0,F.default)(T.x)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var Us=p(76437),dm=Object.defineProperty,Hs=Object.getOwnPropertySymbols,pm=Object.prototype.hasOwnProperty,mm=Object.prototype.propertyIsEnumerable,Gs=(e,t,n)=>t in e?dm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fm=(e,t)=>{for(var n in t||(t={}))pm.call(t,n)&&Gs(e,n,t[n]);if(Hs)for(var n of Hs(t))mm.call(t,n)&&Gs(e,n,t[n]);return e};const gm=(0,F.default)(T.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Kn=({intlLabel:e,labelAction:t,name:n,required:o})=>{const{formatMessage:a}=(0,V.useIntl)(),l=e!=null&&e.id?a({id:e.id,defaultMessage:e.defaultMessage},fm({},e.values)):n;return r.createElement(Z.k,null,r.createElement(Us.Q,{required:o},l),t&&r.createElement(gm,{paddingLeft:1},t))};Kn.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0,required:!1},Kn.propTypes={id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,name:s().string.isRequired,required:s().bool};const ym=Kn;var Ks=p(87107);const Qn=({name:e,hint:t,error:n,children:o})=>{const{formatMessage:a}=(0,V.useIntl)(),l=n?a({id:n,defaultMessage:n}):"";return r.createElement(Ks.g,{name:e,hint:t&&a(t),error:l,id:e},o)};Qn.defaultProps={hint:void 0,error:""},Qn.propTypes={name:s().string.isRequired,hint:s().shape({id:s().string,defaultMessage:s().string}),error:s().string,children:s().node.isRequired};const hm=Qn;var bm=Object.defineProperty,vm=(e,t,n)=>t in e?bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t,n)=>(vm(e,typeof t!="symbol"?t+"":t,n),n),Em=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Cm=600,Pm="blackboard";(()=>Em(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,87541,23)),yield p.e(2781).then(p.t.bind(p,80249,23)),yield p.e(953).then(p.t.bind(p,54745,23)),yield p.e(5178).then(p.t.bind(p,3903,23)),yield p.e(5509).then(p.t.bind(p,59577,23)),yield p.e(3973).then(p.bind(p,65701)),yield p.e(2218).then(p.bind(p,88333))}))();class Yn extends r.Component{constructor(t){super(t),st(this,"timer",null),st(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):n===0?this.codeMirror.setValue("0"):this.codeMirror.setValue(n)}catch(o){return this.setState({error:!0})}}),st(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),st(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),st(this,"markSelection",({message:n})=>{let o=parseInt(n.split(":")[0].split("line ")[1],10)-1,a=this.getContentAtLine(o);a==="{"&&(o+=1,a=this.getContentAtLine(o));const l=a.length,i=l-im()(a," ").length,c=this.codeMirror.markText({line:o,ch:i},{line:o,ch:l},{className:"colored"});this.setState({markedText:c})}),st(this,"handleChange",(n,o)=>{if(o.origin==="setValue")return;const{name:a,onChange:l}=this.props;let i=n.getValue();i===""&&(i=null),l({target:{name:a,value:i,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),Cm)}),st(this,"testJSON",n=>{try{lm.parse(n)}catch(o){this.markSelection(o)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=Kt().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Pm,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(hm,{name:this.props.name,hint:this.props.description,error:this.props.error},r.createElement(ce.K,{spacing:1},r.createElement(ym,{intlLabel:this.props.intlLabel,labelAction:this.props.labelAction,name:this.props.name,required:this.props.required}),r.createElement(um,{error:this.props.error},r.createElement(cm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Ws.J,null),r.createElement(_s.c,null)))}}Yn.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange(){},value:null,required:!1},Yn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,name:s().string.isRequired,onChange:s().func,value:s().any,required:s().bool};const Om=Yn;var Jn=p(10369),Qs=p(44647),Rm=p(38705),It=p(69932),wm=p(27169);const Ys=(e,t)=>{const[n,o]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const a=setTimeout(()=>{o(e)},t);return()=>{clearTimeout(a)}},[e,t]),n},Mm=/^[A-Za-z0-9-_.~]*$/;var Tm=p(63642);const Im=(0,F.default)(T.x)`
  position: relative;
`,Dm=(0,F.default)(Tm.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Xn=(0,F.default)(Z.k)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,Lm=F.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,Sm=(0,F.default)(Z.k)`
  animation: ${Lm} 2s infinite linear;
`;var xm=Object.defineProperty,Js=Object.getOwnPropertySymbols,km=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?xm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,er=(e,t)=>{for(var n in t||(t={}))km.call(t,n)&&Xs(e,n,t[n]);if(Js)for(var n of Js(t))Fm.call(t,n)&&Xs(e,n,t[n]);return e},ea=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const tr=({attribute:e,contentTypeUID:t,description:n,disabled:o,error:a,intlLabel:l,labelAction:i,name:c,onChange:u,value:d,placeholder:f,required:y})=>{const{modifiedData:m,initialData:h,layout:b}=(0,g.useCMEditViewDataManager)(),[E,k]=(0,r.useState)(!1),[O,P]=(0,r.useState)(null),L=Ys(d,300),v=(0,r.useRef)(),R=h[c],{formatMessage:I}=(0,V.useIntl)(),M=w()(b,["options","timestamps",0]),H=!h[M],W=Ys(m[e.targetField],300),[q,_]=(0,r.useState)(!1),[G,j]=(0,r.useState)(null),D=l.id?I({id:l.id,defaultMessage:l.defaultMessage},er({},l.values)):c,Q=n?I({id:n.id,defaultMessage:n.defaultMessage},er({},n.values)):"",N=f?I({id:f.id,defaultMessage:f.defaultMessage},er({},f.values)):"";v.current=(x=!1)=>ea(void 0,null,function*(){k(!0);const K=fe("uid/generate");try{const{data:{data:J}}=yield me.be.post(K,{contentTypeUID:t,field:c,data:m});u({target:{name:c,value:J,type:"text"}},x),k(!1)}catch(J){k(!1)}});const B=()=>ea(void 0,null,function*(){k(!0);const x=fe("uid/check-availability");if(!!d)try{const{data:K}=yield me.be.post(x,{contentTypeUID:t,field:c,value:d?d.trim():""});P(K),k(!1)}catch(K){k(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&v.current(!0)},[]),(0,r.useEffect)(()=>{L&&L.trim().match(Mm)&&L!==R&&B(),L||P(null)},[L,R]),(0,r.useEffect)(()=>{let x;return O&&O.isAvailable&&(x=setTimeout(()=>{P(null)},4e3)),()=>{x&&clearTimeout(x)}},[O]),(0,r.useEffect)(()=>{!q&&H&&W&&m[e.targetField]&&!d&&v.current(!0)},[W,q,H]);const S=()=>{j(I({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},$=()=>{j(null)},A=x=>{x.target.value&&H&&_(!0),u(x)};return r.createElement(Jn.o,{disabled:o,error:a,endAction:r.createElement(Im,null,O&&O.isAvailable&&!G&&r.createElement(Xn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(Rm.default,null),r.createElement(z.Z,{textColor:"success600",variant:"pi"},I({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),O&&!O.isAvailable&&!G&&r.createElement(Xn,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(It.default,null),r.createElement(z.Z,{textColor:"danger600",variant:"pi"},I({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),G&&r.createElement(Xn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(z.Z,{textColor:"primary600",variant:"pi"},G)),r.createElement(Dm,{onClick:()=>v.current(),label:"regenerate",onMouseEnter:S,onMouseLeave:$},E?r.createElement(Sm,null,r.createElement(wm.default,null)):r.createElement(Qs.Z,null))),hint:Q,label:D,labelAction:i,name:c,onChange:A,placeholder:N,value:d||"",required:y})};tr.propTypes={attribute:s().shape({targetField:s().string,required:s().bool}).isRequired,contentTypeUID:s().string.isRequired,description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool},tr.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const Am=tr;var jm=p(88423),nr=p.n(jm),$m=p(54450),ta=p(41234),Nm=p(50428),na=p(99140),rr=p(7563),Dt=p(63919),Vm=Object.defineProperty,Yt=Object.getOwnPropertySymbols,ra=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,sa=(e,t,n)=>t in e?Vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qm=(e,t)=>{for(var n in t||(t={}))ra.call(t,n)&&sa(e,n,t[n]);if(Yt)for(var n of Yt(t))oa.call(t,n)&&sa(e,n,t[n]);return e},Bm=(e,t)=>{var n={};for(var o in e)ra.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Yt)for(var o of Yt(e))t.indexOf(o)<0&&oa.call(e,o)&&(n[o]=e[o]);return n};const or=e=>{var t=e,{children:n,loadMore:o,search:a,totalNumberOfRelations:l,size:i}=t,c=Bm(t,["children","loadMore","search","totalNumberOfRelations","size"]);return r.createElement(r.Fragment,null,r.createElement(Z.k,{paddingBottom:l>0?3:0,gap:2,justifyContent:"space-between",alignItems:"end",wrap:"wrap"},r.createElement(ce.K,qm({basis:i<=6?"100%":"70%",spacing:1},c),a),o),n)};or.defaultProps={search:void 0,loadMore:void 0,totalNumberOfRelations:0},or.propTypes={children:s().node.isRequired,search:s().node,loadMore:s().node,size:s().number.isRequired,totalNumberOfRelations:s().number};var Zm=Object.defineProperty,Jt=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,la=(e,t,n)=>t in e?Zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zm=(e,t)=>{for(var n in t||(t={}))aa.call(t,n)&&la(e,n,t[n]);if(Jt)for(var n of Jt(t))ia.call(t,n)&&la(e,n,t[n]);return e},Wm=(e,t)=>{var n={};for(var o in e)aa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Jt)for(var o of Jt(e))t.indexOf(o)<0&&ia.call(e,o)&&(n[o]=e[o]);return n};const _m=(0,F.default)(Z.k)`
  width: 100%;
  /* Used to prevent endAction to be pushed out of container */
  min-width: 0;
`,sr=e=>{var t=e,{children:n,disabled:o,endAction:a,style:l}=t,i=Wm(t,["children","disabled","endAction","style"]);return r.createElement(T.x,{style:l,as:"li"},r.createElement(Z.k,zm({paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,hasRadius:!0,borderSize:1,background:o?"neutral150":"neutral0",borderColor:"neutral200",justifyContent:"space-between"},i),r.createElement(_m,{justifyContent:"space-between"},n),a&&r.createElement(T.x,{paddingLeft:4},a)))};sr.defaultProps={disabled:!1,endAction:void 0,style:void 0},sr.propTypes={children:s().node.isRequired,disabled:s().bool,endAction:s().node,style:s().shape({height:s().number,left:s().number,position:s().string,right:s().number,width:s().string})};var Um=Object.defineProperty,Xt=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,da=(e,t,n)=>t in e?Um(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hm=(e,t)=>{for(var n in t||(t={}))ca.call(t,n)&&da(e,n,t[n]);if(Xt)for(var n of Xt(t))ua.call(t,n)&&da(e,n,t[n]);return e},Gm=(e,t)=>{var n={};for(var o in e)ca.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Xt)for(var o of Xt(e))t.indexOf(o)<0&&ua.call(e,o)&&(n[o]=e[o]);return n};const Km=(0,F.default)(T.x)`
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;

  &:before,
  &:after {
    position: absolute;
    width: 100%;
    height: 4px;
    z-index: 1;
  }

  &:before {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="top"?"''":void 0};
    background: linear-gradient(rgba(33, 33, 52, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
    top: 0;
  }

  &:after {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="bottom"?"''":void 0};
    background: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(33, 33, 52, 0.1) 100%);
    bottom: 0;
  }
`,ar=e=>{var t=e,{children:n,overflow:o}=t,a=Gm(t,["children","overflow"]);return r.createElement(Km,Hm({overflowDirection:o},a),r.createElement(ce.K,{spacing:1},n))};ar.defaultProps={overflow:""},ar.propTypes={children:s().node.isRequired,overflow:s().oneOf(["top-bottom","bottom","top",""])};var Qm=p(65384),Ym=Object.defineProperty,pa=Object.getOwnPropertySymbols,Jm=Object.prototype.hasOwnProperty,Xm=Object.prototype.propertyIsEnumerable,ma=(e,t,n)=>t in e?Ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fa=(e,t)=>{for(var n in t||(t={}))Jm.call(t,n)&&ma(e,n,t[n]);if(pa)for(var n of pa(t))Xm.call(t,n)&&ma(e,n,t[n]);return e};const ef=F.default.div`
  flex-shrink: 0;
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
`,ga=e=>{const{formatMessage:t}=(0,V.useIntl)(),n=Qm.components.Option,{publicationState:o,mainField:a,id:l}=e.data;if(o){const i=o==="draft",c={id:C("components.Select.draft-info-title"),defaultMessage:"State: Draft"},u={id:C("components.Select.publish-info-title"),defaultMessage:"State: Published"},d=t(i?c:u);return r.createElement(n,fa({},e),r.createElement(Z.k,null,r.createElement(ef,{title:d,isDraft:i}),r.createElement(z.Z,{ellipsis:!0},a!=null?a:l)))}return r.createElement(n,fa({},e),a!=null?a:l)};ga.propTypes={isFocused:s().bool.isRequired,data:s().shape({id:s().number.isRequired,isDraft:s().bool,mainField:s().string,publicationState:s().oneOfType([s().string,s().bool])}).isRequired};const en=50;var tf=Object.defineProperty,nf=Object.defineProperties,rf=Object.getOwnPropertyDescriptors,ya=Object.getOwnPropertySymbols,of=Object.prototype.hasOwnProperty,sf=Object.prototype.propertyIsEnumerable,ha=(e,t,n)=>t in e?tf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,af=(e,t)=>{for(var n in t||(t={}))of.call(t,n)&&ha(e,n,t[n]);if(ya)for(var n of ya(t))sf.call(t,n)&&ha(e,n,t[n]);return e},lf=(e,t)=>nf(e,rf(t));const cf=(0,F.default)(Nm.r)`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: inherit;
`,uf=(0,F.default)(T.x)`
  > span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: inherit;
  }
`,df=F.default.button`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }

  &:hover svg path,
  &:focus svg path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,ir=({description:e,disabled:t,error:n,id:o,name:a,numberOfRelationsToDisplay:l,label:i,labelAction:c,labelLoadMore:u,labelDisconnectRelation:d,loadingMessage:f,noRelationsMessage:y,onRelationConnect:m,onRelationLoadMore:h,onRelationDisconnect:b,onSearchNextPage:E,onSearch:k,placeholder:O,publicationStateTranslations:P,required:L,relations:v,searchResults:R,size:I})=>{var M;const[H,W]=(0,r.useState)(null),q=(0,r.useRef)(),_=(0,r.useRef)(),[G,j]=(0,r.useState)(""),{data:D}=R,Q=v.data,N=(M=Q.length)!=null?M:0,B=(0,r.useMemo)(()=>N>l?Math.min(N,l)*en+en/2:Math.min(N,l)*en,[N,l]),S=!!u&&!t&&v.hasNextPage||v.isLoading,$=(0,r.useMemo)(()=>D.flat().filter(Boolean).map(ye=>lf(af({},ye),{value:ye.id,label:ye.mainField})),[D]);(0,r.useEffect)(()=>{if(N<=l)return j("");const ye=we=>{const Fe=we.target.parentNode.scrollHeight,tt=we.target.scrollHeight-we.target.scrollTop;return we.target.scrollTop===0?j("bottom"):j(tt===Fe?"top":"top-bottom")},Ve=_==null?void 0:_.current;return!v.isLoading&&Q.length>0&&Ve&&_.current.addEventListener("scroll",ye),()=>{Ve&&Ve.removeEventListener("scroll",ye)}},[v,Q,l,N]);const[A,x]=(0,r.useState)(!1),K=(0,r.useRef)(),J=(0,r.useRef)([]);(0,r.useEffect)(()=>($.length>0&&J.current.length===0&&x(ye=>(ye&&(K.current=setTimeout(()=>{x(!0)},10)),!1)),()=>{J.current=$||[]}),[$]),(0,r.useEffect)(()=>()=>{K.current&&clearTimeout(K.current)},[]);const ie=()=>{x(!1)},oe=()=>{x(!0),k()},U=id(Q.length),se=(0,r.useRef)(),Ne=()=>{se.current="loadMore",h()};return(0,r.useEffect)(()=>{se.current==="onChange"&&Q.length!==U?q.current.scrollToItem(Q.length,"end"):se.current==="loadMore"&&Q.length!==U&&q.current.scrollToItem(0,"start")},[U,Q]),r.createElement(Ks.g,{error:n,name:a,hint:e,id:o},r.createElement(or,{totalNumberOfRelations:N,size:I,search:r.createElement(r.Fragment,null,r.createElement(Us.Q,{action:c,required:L},i),r.createElement(g.ReactSelect,{menuPosition:"absolute",menuPlacement:"auto",components:{Option:ga},options:$,isDisabled:t,isLoading:R.isLoading,error:n,inputId:o,isSearchable:!0,isClear:!0,loadingMessage:()=>f,onChange:ye=>{W(null),m(ye),se.current="onChange"},onInputChange:ye=>{W(ye),k(ye)},onMenuClose:ie,onMenuOpen:oe,menuIsOpen:A,noOptionsMessage:()=>y,onMenuScrollToBottom:()=>{R.hasNextPage&&E()},placeholder:O,name:a,value:H})),loadMore:S&&r.createElement(rr.A,{disabled:v.isLoading||v.isFetchingNextPage,onClick:Ne,loading:v.isLoading||v.isFetchingNextPage,startIcon:r.createElement(Qs.Z,null)},u)},r.createElement(ar,{overflow:G},r.createElement($m.t7,{height:B,ref:q,outerRef:_,itemCount:N,itemSize:en,itemData:Q,innerElementType:"ol"},({data:ye,index:Ve,style:we})=>{const{publicationState:Fe,href:tt,mainField:qe,id:Ee}=ye[Ve],nt=Fe==="draft"?"secondary":"success";return r.createElement(sr,{disabled:t,key:`relation-${a}-${Ee}`,endAction:r.createElement(df,{"data-testid":`remove-relation-${Ee}`,disabled:t,type:"button",onClick:()=>b(ye[Ve]),"aria-label":d},r.createElement(na.J,{width:"12px",as:Mn.default})),style:we},r.createElement(uf,{minWidth:0,paddingTop:1,paddingBottom:1,paddingRight:4},r.createElement(Dt.u,{description:qe!=null?qe:`${Ee}`},tt?r.createElement(cf,{to:tt,disabled:t},qe!=null?qe:Ee):r.createElement(z.Z,{textColor:t?"neutral600":"primary600",ellipsis:!0},qe!=null?qe:Ee))),Fe&&r.createElement(ta.q,{variant:nt,showBullet:!1,size:"S"},r.createElement(z.Z,{fontWeight:"bold",textColor:`${nt}700`},P[Fe])))})),(e||n)&&r.createElement(T.x,{paddingTop:2},r.createElement(Ws.J,null),r.createElement(_s.c,null))))},pf=s().shape({data:s().arrayOf(s().shape({href:s().string,id:s().number.isRequired,publicationState:s().oneOfType([s().string,s().bool]),mainField:s().oneOfType([s().string,s().number])})),hasNextPage:s().bool,isFetchingNextPage:s().bool.isRequired,isLoading:s().bool.isRequired,isSuccess:s().bool.isRequired}),mf=s().shape({data:s().arrayOf(s().shape({id:s().number.isRequired,href:s().string,mainField:s().oneOfType([s().string,s().number]),publicationState:s().oneOfType([s().string,s().bool])})),hasNextPage:s().bool,isLoading:s().bool.isRequired,isSuccess:s().bool.isRequired});ir.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:null,labelLoadMore:null,required:!1,relations:{data:[]},searchResults:{data:[]}},ir.propTypes={error:s().string,description:s().string,disabled:s().bool,id:s().string.isRequired,label:s().string.isRequired,labelAction:s().element,labelLoadMore:s().string,labelDisconnectRelation:s().string.isRequired,loadingMessage:s().string.isRequired,name:s().string.isRequired,noRelationsMessage:s().string.isRequired,numberOfRelationsToDisplay:s().number.isRequired,onRelationConnect:s().func.isRequired,onRelationDisconnect:s().func.isRequired,onRelationLoadMore:s().func.isRequired,onSearch:s().func.isRequired,onSearchNextPage:s().func.isRequired,placeholder:s().string.isRequired,publicationStateTranslations:s().shape({draft:s().string.isRequired,published:s().string.isRequired}).isRequired,required:s().bool,searchResults:mf,size:s().number.isRequired,relations:pf};const ff=ir;var at=p(84968),gf=Object.defineProperty,ba=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,hf=Object.prototype.propertyIsEnumerable,va=(e,t,n)=>t in e?gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ea=(e,t)=>{for(var n in t||(t={}))yf.call(t,n)&&va(e,n,t[n]);if(ba)for(var n of ba(t))hf.call(t,n)&&va(e,n,t[n]);return e};function bf(e,t){return n=>{const o=t(n);return r.createElement(e,Ea(Ea({},n),o))}}const vf=bf;var Ef=Object.defineProperty,Cf=Object.defineProperties,Pf=Object.getOwnPropertyDescriptors,Ca=Object.getOwnPropertySymbols,Of=Object.prototype.hasOwnProperty,Rf=Object.prototype.propertyIsEnumerable,Pa=(e,t,n)=>t in e?Ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wf=(e,t)=>{for(var n in t||(t={}))Of.call(t,n)&&Pa(e,n,t[n]);if(Ca)for(var n of Ca(t))Rf.call(t,n)&&Pa(e,n,t[n]);return e},Mf=(e,t)=>Cf(e,Pf(t));function Tf({componentUid:e,isUserAllowedToEditField:t,isUserAllowedToReadField:n,name:o,queryInfos:a}){var l;const{isCreatingEntry:i,createActionAllowedFields:c,readActionAllowedFields:u,updateActionAllowedFields:d,slug:f,initialData:y}=(0,g.useCMEditViewDataManager)(),m=(0,r.useMemo)(()=>t===!0?!0:(i?c:d).includes(o),[i,c,o,t,d]),h=(0,r.useMemo)(()=>n?!0:(i?[]:u).includes(o),[i,n,o,u]),b=o.split(".");let E;e&&(E=(l=w()(y,b.slice(0,-1)))==null?void 0:l.id);const k=(0,r.useMemo)(()=>i?null:e?E?fe(`relations/${e}/${E}/${b.at(-1)}`):null:fe(`relations/${f}/${y.id}/${o.split(".").at(-1)}`),[i,e,f,y.id,o,E,b]),O=(0,r.useMemo)(()=>fe(e?`relations/${e}/${o.split(".").at(-1)}`:`relations/${f}/${o.split(".").at(-1)}`),[e,f,o]);return{componentId:E,isComponentRelation:Boolean(e),queryInfos:Mf(wf({},a),{endpoints:{search:O,relation:k}}),isCreatingEntry:i,isFieldAllowed:m,isFieldReadable:h}}const If=Tf;function Df(e,t){return`${fe(`collectionType/${e}/${t!=null?t:""}`)}`}const tn={DRAFT:"draft",PUBLISHED:"published"},lr=5,Lf=10;var Sf=Object.defineProperty,Oa=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable,Ra=(e,t,n)=>t in e?Sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ff=(e,t)=>{for(var n in t||(t={}))xf.call(t,n)&&Ra(e,n,t[n]);if(Oa)for(var n of Oa(t))kf.call(t,n)&&Ra(e,n,t[n]);return e};const cr=(e,{shouldAddLink:t,mainFieldName:n,targetModel:o})=>{const a=Ff({},e);return t&&(a.href=Df(o,a.id)),a.publicationState=!1,(a==null?void 0:a.publishedAt)!==void 0&&(a.publicationState=a.publishedAt?tn.PUBLISHED:tn.DRAFT),a.mainField=a[n],a},Af=(e,{shouldAddLink:t=!1,mainFieldName:n,targetModel:o}={})=>[...e].map(a=>cr(a,{shouldAddLink:t,mainFieldName:n,targetModel:o}));var jf=Object.defineProperty,$f=Object.defineProperties,Nf=Object.getOwnPropertyDescriptors,wa=Object.getOwnPropertySymbols,Vf=Object.prototype.hasOwnProperty,qf=Object.prototype.propertyIsEnumerable,Ma=(e,t,n)=>t in e?jf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bf=(e,t)=>{for(var n in t||(t={}))Vf.call(t,n)&&Ma(e,n,t[n]);if(wa)for(var n of wa(t))qf.call(t,n)&&Ma(e,n,t[n]);return e},Zf=(e,t)=>$f(e,Nf(t));const zf=(e,{mainFieldName:t})=>{const{data:n}=e,{pages:o=[]}=n!=null?n:{};return Zf(Bf({},e),{data:o.map(a=>a==null?void 0:a.results.map(l=>cr(l,{mainFieldName:t}))).filter(Boolean).flat()})},Wf=(e=[],t=[])=>{const n=e.reduce((a,l)=>t.find(i=>i.id===l.id)?a:[...a,l.id],[]),o=t.reduce((a,l)=>e.find(i=>i.id===l.id)?a:[...a,l.id],[]);return[n,o]};var _f=Object.defineProperty,Uf=Object.defineProperties,Hf=Object.getOwnPropertyDescriptors,Ta=Object.getOwnPropertySymbols,Gf=Object.prototype.hasOwnProperty,Kf=Object.prototype.propertyIsEnumerable,Ia=(e,t,n)=>t in e?_f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lt=(e,t)=>{for(var n in t||(t={}))Gf.call(t,n)&&Ia(e,n,t[n]);if(Ta)for(var n of Ta(t))Kf.call(t,n)&&Ia(e,n,t[n]);return e},nn=(e,t)=>Uf(e,Hf(t)),Da=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Qf=(e,{name:t,relation:n,search:o})=>{const[a,l]=(0,r.useState)({}),[i,c]=(0,r.useState)(0),u=v=>Da(void 0,[v],function*({pageParam:R=1}){var I;try{const{data:M}=yield me.be.get(n==null?void 0:n.endpoint,{params:nn(Lt({},(I=n.pageParams)!=null?I:{}),{page:R})});return c(R),M}catch(M){return null}}),d=v=>Da(void 0,[v],function*({pageParam:R=1}){var I;try{const{data:M}=yield me.be.get(o.endpoint,{params:nn(Lt(Lt({},(I=o.pageParams)!=null?I:{}),a),{page:R})});return M}catch(M){return null}}),{onLoad:f,normalizeArguments:y={}}=n,m=(0,at.useInfiniteQuery)(["relation",e],u,{cacheTime:0,enabled:n.enabled,getNextPageParam(v){const R=!(v!=null&&v.pagination);if(!(!v||R||(v==null?void 0:v.pagination.page)>=(v==null?void 0:v.pagination.pageCount)))return v.pagination.page+1},select:v=>nn(Lt({},v),{pages:v.pages.map(R=>{if(!R)return R;const{data:I,results:M,pagination:H}=R,W=!!I;let q=[];return W?q=[I]:M&&(q=[...M].reverse()),{pagination:H,results:q}})})}),{pageGoal:h}=n,{status:b,data:E,fetchNextPage:k,hasNextPage:O}=m;(0,r.useEffect)(()=>{h>i&&O&&b==="success"&&k({pageParam:i+1})},[h,i,k,O,b]),(0,r.useEffect)(()=>{var v,R;if(b==="success"&&E&&((R=(v=E.pages)==null?void 0:v.at(-1))==null?void 0:R.results)&&f){const I=Af(E.pages.at(-1).results,y);f({target:{name:t,value:I}})}},[b,f,t,E]);const P=(0,at.useInfiniteQuery)(["relation",e,"search",JSON.stringify(a)],d,{enabled:Object.keys(a).length>0,getNextPageParam(v){if(!(!(v!=null&&v.pagination)||v.pagination.page>=v.pagination.pageCount))return v.pagination.page+1}});return{relations:m,search:P,searchFor:(v,R={})=>{l(nn(Lt({},R),{_q:v}))}}};var Yf=Object.defineProperty,Jf=Object.defineProperties,Xf=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,eg=Object.prototype.hasOwnProperty,tg=Object.prototype.propertyIsEnumerable,Sa=(e,t,n)=>t in e?Yf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ur=(e,t)=>{for(var n in t||(t={}))eg.call(t,n)&&Sa(e,n,t[n]);if(La)for(var n of La(t))tg.call(t,n)&&Sa(e,n,t[n]);return e},dr=(e,t)=>Jf(e,Xf(t));const pr=({error:e,componentId:t,isComponentRelation:n,editable:o,description:a,intlLabel:l,isCreatingEntry:i,isFieldAllowed:c,isFieldReadable:u,labelAction:d,mainField:f,name:y,queryInfos:{endpoints:m,defaultParams:h,shouldDisplayRelationLink:b},placeholder:E,required:k,relationType:O,size:P,targetModel:L})=>{var v,R,I,M,H,W,q;const{formatMessage:_}=(0,V.useIntl)(),{connectRelation:G,disconnectRelation:j,loadRelation:D,modifiedData:Q,slug:N,initialData:B}=(0,g.useCMEditViewDataManager)(),S=(v=w()(Q,y))!=null?v:[],$=Math.ceil(w()(B,y,[]).length/lr),{relations:A,search:x,searchFor:K}=Qf(`${N}-${y}-${(R=B==null?void 0:B.id)!=null?R:""}`,{name:y,relation:{enabled:!!m.relation,endpoint:m.relation,pageGoal:$,pageParams:dr(ur({},h),{pageSize:lr}),onLoad:D,normalizeArguments:{mainFieldName:f.name,shouldAddLink:b,targetModel:L}},search:{endpoint:m.search,pageParams:dr(ur({},h),{entityId:i?void 0:n?t:B.id,pageSize:Lf})}}),J=(0,r.useMemo)(()=>O.toLowerCase().includes("morph"),[O]),ie=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(O),oe=(0,r.useMemo)(()=>J?!0:i?!o:!c&&u||!o,[J,i,o,c,u]),U=Ee=>{const nt=cr(Ee,{mainFieldName:f.name,shouldAddLink:b,targetModel:L});G({name:y,value:nt,toOneRelation:ie})},se=Ee=>{j({name:y,id:Ee.id})},Ne=()=>{A.fetchNextPage()},ye=(Ee="")=>{const[nt,ho]=Wf(S,w()(B,y));K(Ee,{idsToInclude:ho,idsToOmit:nt})},Ve=()=>{x.fetchNextPage()};if(!c&&i||!i&&!c&&!u)return r.createElement(g.NotAllowedInput,{name:y,intlLabel:l,labelAction:d});const we=S.length,Fe=((I=w()(B,y))!=null?I:[]).length,tt=(q=(W=(H=(M=A.data)==null?void 0:M.pages[0])==null?void 0:H.pagination)==null?void 0:W.total)!=null?q:0,qe=!A.data&&we===Fe?we:we-Fe+tt;return r.createElement(ff,{error:e,description:a,disabled:oe,id:y,label:`${_({id:l.id,defaultMessage:l.defaultMessage})} ${qe>0?`(${qe})`:""}`,labelAction:d,labelLoadMore:i?null:_({id:C("relation.loadMore"),defaultMessage:"Load More"}),labelDisconnectRelation:_({id:C("relation.disconnect"),defaultMessage:"Remove"}),listHeight:320,loadingMessage:_({id:C("relation.isLoading"),defaultMessage:"Relations are loading"}),name:y,noRelationsMessage:_({id:C("relation.notAvailable"),defaultMessage:"No relations available"}),numberOfRelationsToDisplay:lr,onRelationConnect:Ee=>U(Ee),onRelationDisconnect:Ee=>se(Ee),onRelationLoadMore:()=>Ne(),onSearch:Ee=>ye(Ee),onSearchNextPage:()=>Ve(),placeholder:_(E||{id:C("relation.add"),defaultMessage:"Add relation"}),publicationStateTranslations:{[tn.DRAFT]:_({id:C("relation.publicationState.draft"),defaultMessage:"Draft"}),[tn.PUBLISHED]:_({id:C("relation.publicationState.published"),defaultMessage:"Published"})},relations:nr()(dr(ur({},A),{data:S}),"data","hasNextPage","isFetchingNextPage","isLoading","isSuccess"),required:k,searchResults:zf(x,{mainFieldName:f.name}),size:P})};pr.defaultProps={componentId:void 0,editable:!0,error:void 0,description:"",labelAction:null,isComponentRelation:!1,isFieldAllowed:!0,placeholder:null,required:!1},pr.propTypes={componentId:s().number,editable:s().bool,error:s().string,description:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,isCreatingEntry:s().bool.isRequired,isComponentRelation:s().bool,isFieldAllowed:s().bool,isFieldReadable:s().bool.isRequired,mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired}).isRequired,name:s().string.isRequired,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool,relationType:s().string.isRequired,size:s().number.isRequired,targetModel:s().string.isRequired,queryInfos:s().shape({defaultParams:s().shape({locale:s().string}),endpoints:s().shape({relation:s().string,search:s().string.isRequired}).isRequired,shouldDisplayRelationLink:s().bool.isRequired}).isRequired};const ng=(0,r.memo)(pr),rg=vf(ng,If);var og=Object.defineProperty,xa=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,ag=Object.prototype.propertyIsEnumerable,ka=(e,t,n)=>t in e?og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fa=(e,t)=>{for(var n in t||(t={}))sg.call(t,n)&&ka(e,n,t[n]);if(xa)for(var n of xa(t))ag.call(t,n)&&ka(e,n,t[n]);return e};function ig(e,t){return n=>{const o=t(n.keys);return r.createElement(e,Fa(Fa({},n),o))}}const lg=ig,cg=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],ug=(e="")=>{switch((0,Y.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},dg=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function pg(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:o,modifiedData:a,onChange:l,readActionAllowedFields:i,shouldNotRunValidations:c,updateActionAllowedFields:u}=(0,g.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>o?t:u,[o,t,u]),f=(0,r.useMemo)(()=>o?[]:i,[o,i]),y=(0,Y.get)(a,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:o,onChange:l,readableFields:f,shouldNotRunValidations:c,value:y}}const mg=pg,Aa=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var fg=Object.defineProperty,gg=Object.defineProperties,yg=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,bg=Object.prototype.propertyIsEnumerable,$a=(e,t,n)=>t in e?fg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mr=(e,t)=>{for(var n in t||(t={}))hg.call(t,n)&&$a(e,n,t[n]);if(ja)for(var n of ja(t))bg.call(t,n)&&$a(e,n,t[n]);return e},vg=(e,t)=>gg(e,yg(t));function fr({allowedFields:e,componentUid:t,fieldSchema:n,formErrors:o,isCreatingEntry:a,keys:l,labelAction:i,metadatas:c,onChange:u,readableFields:d,shouldNotRunValidations:f,queryInfos:y,value:m,size:h}){const{fields:b}=(0,g.useLibrary)(),{formatMessage:E}=(0,V.useIntl)(),{contentType:k}=Qe(),O=(0,g.useCustomFields)(),P=(0,r.useMemo)(()=>!w()(c,"editable",!0),[c]),{type:L,customField:v}=n,R=w()(o,[l],null),I=(0,r.useMemo)(()=>$o(l),[l]),M=(0,r.useMemo)(()=>{const oe=Fd()(n,f?[...Aa,"required","minLength"]:Aa),U=n.regex||null;if(U){const se=new RegExp(U);se&&(oe.regex=se)}return oe},[n,f]),H=(0,r.useMemo)(()=>w()(M,["required"],!1),[M]),W=(0,r.useMemo)(()=>{const oe=w()(k,["attributes"],{});return w()(oe,[I[0],"type"],null)==="dynamiczone"},[k,I]),q=(0,r.useMemo)(()=>ug(L),[L]),_=(0,r.useMemo)(()=>L==="media"&&!m?[]:m,[L,m]),G=(0,r.useMemo)(()=>dg(L),[L]),j=(0,r.useMemo)(()=>{const oe=I.join(".");if(e.includes(oe))return!0;if(W)return e.includes(I[0]);if(I.length>1){const se=Vn()(I,I.length-1).join(".");return e.includes(se)}return!1},[e,I,W]),D=(0,r.useMemo)(()=>{const oe=I.join(".");if(d.includes(oe))return!0;if(W)return d.includes(I[0]);if(I.length>1){const se=Vn()(I,I.length-1).join(".");return d.includes(se)}return!1},[d,I,W]),Q=(0,r.useMemo)(()=>D||j,[j,D]),N=(0,r.useMemo)(()=>a?P:D&&!j?!0:P,[P,a,j,D]),B=(0,r.useMemo)(()=>cg(n.enum||[],H),[n,H]),{label:S,description:$,placeholder:A,visible:x}=c,K=(0,r.useMemo)(()=>{if(!c.step||q!=="datetime"&&q!=="time")return G;if(!_)return c.step;let oe;return q==="datetime"?oe=parseInt(_.substr(14,2),10):q==="time"&&(oe=parseInt(_.slice(-2),10)),oe%c.step===0?c.step:G},[q,_,c.step,G]),J=(0,r.useMemo)(()=>{if(v){const oe=O.get(v);return r.lazy(oe.components.Input)}return null},[v,O]);if(x===!1)return null;if(!Q)return r.createElement(g.NotAllowedInput,{description:$?{id:$,defaultMessage:$}:null,intlLabel:{id:S,defaultMessage:S},labelAction:i,error:R&&E(R),name:l,required:H});if(L==="relation")return r.createElement(rg,vg(mr(mr({},c),n),{componentUid:t,description:c.description?E({id:c.description,defaultMessage:c.description}):void 0,intlLabel:{id:c.label,defaultMessage:c.label},labelAction:i,isUserAllowedToEditField:j,isUserAllowedToReadField:D,name:l,placeholder:c.placeholder?{id:c.placeholder,defaultMessage:c.placeholder}:null,queryInfos:y,size:h,value:m,error:R&&E(R)}));const ie=mr({json:Om,uid:Am,media:b.media,wysiwyg:sm},b);return v&&(ie[v]=J),r.createElement(g.GenericInput,{attribute:n,autoComplete:"new-password",intlLabel:{id:S,defaultMessage:S},isNullable:q==="bool"&&[null,void 0].includes(n.default),description:$?{id:$,defaultMessage:$}:null,disabled:N,error:R,labelAction:i,contentTypeUID:k.uid,customInputs:ie,multiple:n.multiple||!1,name:l,onChange:u,options:B,placeholder:A?{id:A,defaultMessage:A}:null,required:n.required||!1,step:K,type:v||q,value:_,withDefaultValue:!1})}fr.defaultProps={componentUid:void 0,formErrors:{},labelAction:void 0,size:void 0,value:null,queryInfos:{}},fr.propTypes={allowedFields:s().array.isRequired,componentUid:s().string,fieldSchema:s().object.isRequired,formErrors:s().object,keys:s().string.isRequired,isCreatingEntry:s().bool.isRequired,labelAction:s().element,metadatas:s().object.isRequired,onChange:s().func.isRequired,readableFields:s().array.isRequired,size:s().number,shouldNotRunValidations:s().bool.isRequired,value:s().any,queryInfos:s().shape({containsKey:s().string,defaultParams:s().object,endPoint:s().string})};const Eg=(0,r.memo)(fr,Ye()),gr=lg(Eg,mg),yr=({componentUid:e,isFromDynamicZone:t,isNested:n,name:o})=>{const{getComponentLayout:a}=Qe(),i=(0,r.useMemo)(()=>a(e),[e,a]).layouts.edit;return r.createElement(T.x,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(ce.K,{spacing:6},i.map((c,u)=>r.createElement(ze.r,{gap:4,key:u},c.map(({name:d,size:f,metadatas:y,fieldSchema:m,queryInfos:h})=>{const b=m.type==="component",E=`${o}.${d}`;if(b){const k=m.component;return r.createElement(Ce.P,{col:f,s:12,xs:12,key:d},r.createElement(rn,{componentUid:k,intlLabel:{id:y.label,defaultMessage:y.label},isNested:!0,isRepeatable:m.repeatable,max:m.max,min:m.min,name:E,required:m.required||!1}))}return r.createElement(Ce.P,{col:f,key:d,s:12,xs:12},r.createElement(gr,{componentUid:e,keys:E,fieldSchema:m,metadatas:y,queryInfos:h,size:f}))})))))};yr.defaultProps={isFromDynamicZone:!1,isNested:!1},yr.propTypes={componentUid:s().string.isRequired,isFromDynamicZone:s().bool,isNested:s().bool,name:s().string.isRequired};const Cg=yr;var St=p(19406),Pg=Object.defineProperty,Na=Object.getOwnPropertySymbols,Og=Object.prototype.hasOwnProperty,Rg=Object.prototype.propertyIsEnumerable,Va=(e,t,n)=>t in e?Pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qa=(e,t)=>{for(var n in t||(t={}))Og.call(t,n)&&Va(e,n,t[n]);if(Na)for(var n of Na(t))Rg.call(t,n)&&Va(e,n,t[n]);return e};function wg(e,t){return n=>{const o=t(n);return r.createElement(e,qa(qa({},n),o))}}const Mg=wg;function Tg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,g.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const Ig=Tg;function Dg(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var hr=p(51968),Lg=p(41119),Ba=p.n(Lg);const Sg=F.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,xg=()=>r.createElement(Sg,{padding:6,background:"primary100"}),kg=(0,F.default)(Re.h)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,Za=(0,F.default)(Re.h)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,Fg=F.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,Ag=(0,F.default)(rr.A)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,za=({displayedValue:e})=>r.createElement(Fg,null,r.createElement(ce.K,{horizontal:!0,spacing:3,flex:1},r.createElement(Z.k,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(na.J,{as:Eo.default,width:`${8/16}rem}`,color:"neutral600"})),r.createElement(Ag,{onClick:()=>{},flex:1},r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(ce.K,{horizontal:!0,spacing:0},r.createElement(Za,{noBorder:!0,onClick:()=>{},icon:r.createElement(We.default,null)}),r.createElement(Za,{icon:r.createElement(pt.Z,null),noBorder:!0})));za.propTypes={displayedValue:s().string.isRequired};const jg=za;var $g=Object.defineProperty,Wa=Object.getOwnPropertySymbols,Ng=Object.prototype.hasOwnProperty,Vg=Object.prototype.propertyIsEnumerable,_a=(e,t,n)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ua=(e,t)=>{for(var n in t||(t={}))Ng.call(t,n)&&_a(e,n,t[n]);if(Wa)for(var n of Wa(t))Vg.call(t,n)&&_a(e,n,t[n]);return e};function qg(e,t){return n=>{const o=t(n);return r.createElement(e,Ua(Ua({},n),o))}}const Bg=qg;function Zg({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:o,moveComponentField:a,removeRepeatableField:l,triggerFormValidation:i}=(0,g.useCMEditViewDataManager)(),c=(0,r.useMemo)(()=>(0,Y.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,Y.toString)((0,Y.get)(o,[...t.split("."),c],"")),mainField:c,checkFormErrors:n,moveComponentField:a,removeRepeatableField:l,schema:e,triggerFormValidation:i}}const zg=Zg,Wg=F.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,br=({componentFieldName:e,componentUid:t,hasErrorMessage:n,hasErrors:o,isDraggingSibling:a,isOpen:l,isReadOnly:i,onClickToggle:c,schema:u,toggleCollapses:d,moveComponentField:f,removeRepeatableField:y,setIsDraggingSibling:m,triggerFormValidation:h,displayedValue:b})=>{const E=(0,r.useRef)(null),k=(0,r.useRef)(null),[,O]=(0,r.useState)(!1),{formatMessage:P}=(0,V.useIntl)(),L=u.layouts.edit,[,v]=(0,je.useDrop)({accept:Le.COMPONENT,canDrop(){return!1},hover(_,G){if(!k.current)return;const j=_.originalPath,D=e,Q=j.split("."),N=Q.slice().splice(-1).join(""),B=D.split(".").splice(-1).join(""),S=Q.slice(0,Q.length-1),$=parseInt(N,10),A=parseInt(B,10);if($===A)return;const x=k.current.getBoundingClientRect(),K=(x.bottom-x.top)/2,ie=G.getClientOffset().y-x.top;$<A&&ie<K||$>A&&ie>K||j.split(".").length===D.split(".").length&&(f(S,$,A),_.originalPath=D)}}),[{isDragging:R},I,M]=(0,je.useDrag)({type:Le.COMPONENT,item(){return d(-1),{displayedValue:b,originalPath:e}},end(){h(),m(!1)},collect:_=>({isDragging:_.isDragging()})});(0,r.useEffect)(()=>{M((0,hr.rX)(),{captureDraggingState:!1})},[M]),(0,r.useEffect)(()=>{R&&m(!0)},[R,m]),(0,r.useEffect)(()=>{a||O(_=>!_)},[a]);const H={dragRef:I(E),dropRef:v(k)},W=Ba()(b),q=o?"error":void 0;return r.createElement(T.x,{ref:H?H.dropRef:null},R&&r.createElement(xg,null),!R&&a&&r.createElement(jg,{displayedValue:W,componentFieldName:e}),!R&&!a&&r.createElement(An.U,{error:q,hasErrorMessage:n,expanded:l,onToggle:c,id:e,size:"S"},r.createElement(jn.B,{action:i?null:r.createElement(ce.K,{horizontal:!0,spacing:0},r.createElement(kg,{expanded:l,noBorder:!0,onClick:()=>{y(e),d()},label:P({id:C("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(We.default,null)}),r.createElement(Dt.u,{description:P({id:C("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(Wg,{role:"button",tabIndex:-1,ref:H.dragRef,onClick:_=>_.stopPropagation()},r.createElement(pt.Z,null)))),title:W,togglePosition:"left"}),r.createElement($n.v,null,r.createElement(ce.K,{background:"neutral100",padding:6,spacing:6},L.map((_,G)=>r.createElement(ze.r,{gap:4,key:G},_.map(({name:j,fieldSchema:D,metadatas:Q,queryInfos:N,size:B})=>{const S=D.type==="component",$=`${e}.${j}`;if(S){const A=D.component;return r.createElement(Ce.P,{col:B,s:12,xs:12,key:j},r.createElement(rn,{componentUid:A,intlLabel:{id:Q.label,defaultMessage:Q.label},isRepeatable:D.repeatable,isNested:!0,name:$,max:D.max,min:D.min,required:D.required}))}return r.createElement(Ce.P,{key:$,col:B,s:12,xs:12},r.createElement(gr,{componentUid:t,fieldSchema:D,keys:$,metadatas:Q,queryInfos:N,size:B}))})))))))};br.defaultProps={componentUid:void 0,isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling(){},toggleCollapses(){}},br.propTypes={componentFieldName:s().string.isRequired,componentUid:s().string,hasErrorMessage:s().bool.isRequired,hasErrors:s().bool.isRequired,isDraggingSibling:s().bool,isOpen:s().bool,isReadOnly:s().bool.isRequired,onClickToggle:s().func.isRequired,schema:s().object.isRequired,toggleCollapses:s().func,moveComponentField:s().func.isRequired,removeRepeatableField:s().func.isRequired,setIsDraggingSibling:s().func,triggerFormValidation:s().func.isRequired,displayedValue:s().string.isRequired};const _g=(0,r.memo)(br),Ug=Bg(_g,zg);var Ha=p(861),Hg=Object.defineProperty,Ga=Object.getOwnPropertySymbols,Gg=Object.prototype.hasOwnProperty,Kg=Object.prototype.propertyIsEnumerable,Ka=(e,t,n)=>t in e?Hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qg=(e,t)=>{for(var n in t||(t={}))Gg.call(t,n)&&Ka(e,n,t[n]);if(Ga)for(var n of Ga(t))Kg.call(t,n)&&Ka(e,n,t[n]);return e};const Yg=(0,F.default)(T.x)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Jg=(0,F.default)(T.x)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,Xg=(0,F.default)(T.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,vr=({children:e,footer:t,label:n,labelAction:o,error:a})=>{const{formatMessage:l}=(0,V.useIntl)(),i=r.Children.toArray(e).map(c=>(0,r.cloneElement)(c,{hasErrorMessage:!1}));return r.createElement(Ha.k,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(Z.k,{paddingBottom:1},r.createElement(z.Z,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),o&&r.createElement(Xg,{paddingLeft:1},o)),r.createElement(Jg,{footer:t},i),t&&r.createElement(Yg,null,t),a&&r.createElement(T.x,{paddingTop:1},r.createElement(z.Z,{variant:"pi",textColor:"danger600"},l({id:a.id,defaultMessage:a.id},Qg({},a.values)))))};vr.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},vr.propTypes={children:s().node.isRequired,error:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),footer:s().node,label:s().string,labelAction:s().node};const ey=vr,ty=(0,F.default)(rr.A)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,Er=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:o,componentValueLength:a,isReadOnly:l,max:i,min:c,name:u})=>{const d=(0,g.useNotification)(),{formatMessage:f}=(0,V.useIntl)(),[y,m]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[,E]=(0,je.useDrop)({accept:Le.COMPONENT}),{getComponentLayout:k,components:O}=Qe(),P=(0,r.useMemo)(()=>k(n),[n,k]),L=(0,r.useMemo)(()=>No(o||[])+1,[o]),v=Dg(u,t),R=()=>{m("")},I=c-a,M=w()(t,u,{id:""}).id.includes("min"),H=(0,r.useCallback)(()=>{l||(a<i?(e(u,P,O,M),m(L)):a>=i&&d({type:"info",message:{id:C("components.notification.info.maximum-requirement")}}))},[O,e,P,a,M,l,i,u,L,d]);let W=t[u];return M&&(W={id:C("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:I}}),a===0?r.createElement(Ps,{error:W,isReadOnly:l,onClick:H}):(v.some(_=>_.split(".").length>1)&&!M&&(W={id:C("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(T.x,{hasRadius:!0,ref:E},r.createElement(ey,{error:W,footer:r.createElement(Z.k,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(ty,{disabled:l,onClick:H,startIcon:r.createElement(St.default,null)},f({id:C("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},o.map((_,G)=>{const j=_.__temp_key__,D=y===j,Q=`${u}.${G}`,N=v.includes(Q);return r.createElement(Ug,{componentFieldName:Q,componentUid:n,hasErrors:N,hasMinError:M,isDraggingSibling:h,isOpen:D,isReadOnly:l,key:j,onClickToggle:()=>{m(D?"":j)},parentName:u,schema:P,setIsDraggingSibling:b,toggleCollapses:R})}))))};Er.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},Er.propTypes={addRepeatableComponentToField:s().func.isRequired,componentUid:s().string.isRequired,componentValue:s().oneOfType([s().array,s().object]),componentValueLength:s().number,formErrors:s().object,isReadOnly:s().bool.isRequired,max:s().number,min:s().number,name:s().string.isRequired};const ny=(0,r.memo)(Er),ry=Mg(ny,Ig);var oy=Object.defineProperty,Qa=Object.getOwnPropertySymbols,sy=Object.prototype.hasOwnProperty,ay=Object.prototype.propertyIsEnumerable,Ya=(e,t,n)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ja=(e,t)=>{for(var n in t||(t={}))sy.call(t,n)&&Ya(e,n,t[n]);if(Qa)for(var n of Qa(t))ay.call(t,n)&&Ya(e,n,t[n]);return e};function iy(e,t){return n=>{const o=t(n);return r.createElement(e,Ja(Ja({},n),o))}}const ly=iy;function cy({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:o,isCreatingEntry:a,modifiedData:l,removeComponentFromField:i,readActionAllowedFields:c,updateActionAllowedFields:u,formErrors:d}=(0,g.useCMEditViewDataManager)(),{contentType:f}=Qe(),y=(0,r.useMemo)(()=>{const P=(0,Y.get)(f,["attributes"],{});return Object.keys(P).filter(v=>(0,Y.get)(P,[v,"type"],"")==="dynamiczone")},[f]),m=(0,r.useMemo)(()=>a?o:u,[a,o,u]),h=(0,Y.get)(l,t,null),b=(0,r.useMemo)(()=>$o(t),[t]),E=(0,r.useMemo)(()=>e&&a||m.filter(v=>v===b[0]).length>0?!0:m.map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,Y.take)(v,b.length).join(".")===b.join(".")).length>0,[e,a,m,b]),k=(0,r.useMemo)(()=>e||y.includes(b[0])?!0:(a?[]:c).map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,Y.take)(v,b.length).join(".")===b.join(".")).length>0,[e,y,b,a,c]),O=(0,r.useMemo)(()=>a||E?!1:k,[E,k,a]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:E,hasChildrenReadableFields:k,isCreatingEntry:a,isReadOnly:O,removeComponentFromField:i,componentValue:h}}const uy=cy,dy=(0,F.default)(T.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Cr=({intlLabel:e,id:t,labelAction:n,name:o,numberOfEntries:a,showNumberOfEntries:l,required:i})=>{const{formatMessage:c}=(0,V.useIntl)(),u=e!=null&&e.id?c(e):o;return r.createElement(T.x,{paddingBottom:1},r.createElement(Z.k,null,r.createElement(z.Z,{textColor:"neutral800",htmlFor:t||o,variant:"pi",fontWeight:"bold",as:"label"},u,l&&r.createElement(r.Fragment,null,"\xA0(",a,")"),i&&r.createElement(z.Z,{textColor:"danger600"},"*")),n&&r.createElement(dy,{paddingLeft:1},n)))};Cr.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},Cr.propTypes={id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,numberOfEntries:s().number,required:s().bool,showNumberOfEntries:s().bool};const py=Cr,Pr=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:o,isFromDynamicZone:a,isRepeatable:l,isNested:i,labelAction:c,max:u,min:d,name:f,hasChildrenAllowedFields:y,hasChildrenReadableFields:m,isReadOnly:h,componentValue:b,removeComponentFromField:E,required:k})=>{const{formatMessage:O}=(0,V.useIntl)(),P=Td()(b),L=b!==null||a,v=!l&&L&&!a&&y,{getComponentLayout:R,components:I}=Qe(),M=(0,r.useMemo)(()=>R(t),[t,R]);if(!y&&o)return r.createElement(g.NotAllowedInput,{labelAction:c,intlLabel:n,name:f});if(!y&&!o&&!m)return r.createElement(g.NotAllowedInput,{labelAction:c,intlLabel:n,name:f});const H=()=>{e(f,M,I)};return r.createElement(T.x,null,r.createElement(Z.k,{justifyContent:"space-between"},n&&r.createElement(py,{intlLabel:n,labelAction:c,name:f,numberOfEntries:P,showNumberOfEntries:l,required:k}),v&&r.createElement(Re.h,{label:O({id:C("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(We.default,null),noBorder:!0,onClick:()=>{E(f,t)}})),r.createElement(ce.K,{spacing:1},!l&&!L&&r.createElement(Ps,{isReadOnly:h,onClick:H}),!l&&L&&r.createElement(Cg,{componentUid:t,isFromDynamicZone:a,isNested:i,name:f}),l&&r.createElement(ry,{componentValue:b,componentValueLength:P,componentUid:t,isReadOnly:h,max:u,min:d,name:f})))};Pr.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},Pr.propTypes={addNonRepeatableComponentToField:s().func.isRequired,componentUid:s().string.isRequired,componentValue:s().oneOfType([s().object,s().array]),hasChildrenAllowedFields:s().bool,hasChildrenReadableFields:s().bool,isCreatingEntry:s().bool.isRequired,isFromDynamicZone:s().bool,isReadOnly:s().bool,isRepeatable:s().bool,isNested:s().bool,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,max:s().number,min:s().number,name:s().string.isRequired,removeComponentFromField:s().func.isRequired,required:s().bool};const my=(0,r.memo)(Pr,Ye()),rn=ly(my,uy),Or=(0,F.default)(Re.h)`
  background-color: transparent;

  svg path {
    fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
  }
`,fy=(0,F.default)(T.x)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,gy=(0,F.default)(T.x)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,yy=(0,F.default)(T.x)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,Rr=({componentUid:e,formErrors:t,index:n,isFieldAllowed:o,onMoveComponentDownClick:a,onMoveComponentUpClick:l,name:i,onRemoveComponentClick:c,showDownIcon:u,showUpIcon:d})=>{const[f,y]=(0,r.useState)(!0),{formatMessage:m}=(0,V.useIntl)(),{getComponentLayout:h}=Qe(),{modifiedData:b}=(0,g.useCMEditViewDataManager)(),{icon:E,friendlyName:k,mainValue:O}=(0,r.useMemo)(()=>{var R;const I=h(e),{info:{icon:M,displayName:H}}=I,W=w()(I,["settings","mainField"],"id"),q=(R=w()(b,[i,n,W]))!=null?R:"",_=W==="id"?"":q.trim(),G=_.length>0?` - ${_}`:_;return{friendlyName:H,icon:M,mainValue:G}},[e,h,b,i,n]),P=Object.keys(t).filter(R=>{const I=R.split(".");return`${I[0]}.${I[1]}`==`${i}.${n}`});let L;P.length>0&&(L=m({id:C("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"}));const v=()=>{y(R=>!R)};return r.createElement(T.x,null,r.createElement(Z.k,{justifyContent:"center"},r.createElement(yy,{background:"neutral200"})),r.createElement(fy,{hasRadius:!0},r.createElement(An.U,{expanded:f,onToggle:v,size:"S",error:L},r.createElement(jn.B,{startIcon:r.createElement(Fn.G,{icon:E}),action:r.createElement(ce.K,{horizontal:!0,spacing:0,expanded:f},u&&r.createElement(Or,{noBorder:!0,label:m({id:C("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),onClick:a,icon:r.createElement(Rd.Z,null)}),d&&r.createElement(Or,{noBorder:!0,label:m({id:C("components.DynamicZone.move-up-label"),defaultMessage:"Move component up"}),onClick:l,icon:r.createElement(wd.Z,null)}),o&&r.createElement(Or,{noBorder:!0,label:m({id:C("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:k}),onClick:c,icon:r.createElement(We.default,null)})),title:`${k}${O}`,togglePosition:"left"}),r.createElement($n.v,null,r.createElement(gy,{background:"neutral0"},r.createElement(rn,{componentUid:e,icon:E,name:`${i}.${n}`,isFromDynamicZone:!0}))))))};Rr.defaultProps={formErrors:{},index:0,isFieldAllowed:!0,showDownIcon:!0,showUpIcon:!0},Rr.propTypes={componentUid:s().string.isRequired,formErrors:s().object,index:s().number,isFieldAllowed:s().bool,name:s().string.isRequired,onMoveComponentDownClick:s().func.isRequired,onMoveComponentUpClick:s().func.isRequired,onRemoveComponentClick:s().func.isRequired,showDownIcon:s().bool,showUpIcon:s().bool};const hy=Rr,wr=(0,F.default)(vs.Z)`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,by=(0,F.default)(Zn.Y)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${wr} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${wr} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,vy=(0,F.default)(T.x)`
  height: 100%;
`,Mr=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:o,isOpen:a,label:l,missingComponentNumber:i,name:c,onClick:u})=>{const{formatMessage:d}=(0,V.useIntl)(),f=d({id:C("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:l||c}),y=d({id:"app.utils.close-label",defaultMessage:"Close"});let m=a?y:f;return t&&!a&&(m=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!a&&(m=d({id:C("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:i})),r.createElement(Z.k,{justifyContent:"center"},r.createElement(T.x,{style:{cursor:o?"not-allowed":"pointer"}},r.createElement(by,{type:"button",onClick:u,disabled:o,hasError:e},r.createElement(Z.k,null,r.createElement(vy,{"aria-hidden":!0,paddingRight:2},r.createElement(wr,{$isOpen:a,$hasError:e&&!a})),r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:e&&!a?"danger600":"neutral500"},m)))))};Mr.defaultProps={hasError:!1,hasMaxError:!1,hasMinError:!1,isDisabled:!1,isOpen:!1,label:"",missingComponentNumber:0},Mr.propTypes={label:s().string,hasError:s().bool,hasMaxError:s().bool,hasMinError:s().bool,isDisabled:s().bool,isOpen:s().bool,missingComponentNumber:s().number,name:s().string.isRequired,onClick:s().func.isRequired};const Ey=Mr,Cy=(0,F.default)(T.x)`
  border-radius: ${(0,g.pxToRem)(26)};
`,Tr=({label:e,labelAction:t,name:n,numberOfComponents:o,required:a,intlDescription:l})=>{const{formatMessage:i}=(0,V.useIntl)(),c=i({id:e||n,defaultMessage:e||n});return r.createElement(Z.k,{justifyContent:"center"},r.createElement(T.x,null,r.createElement(Cy,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(Z.k,{direction:"column",justifyContent:"center"},r.createElement(Z.k,{maxWidth:(0,g.pxToRem)(356)},r.createElement(z.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},c,"\xA0"),r.createElement(z.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",o,")"),a&&r.createElement(z.Z,{textColor:"danger600"},"*"),t&&r.createElement(T.x,{paddingLeft:1},t)),l&&r.createElement(T.x,{paddingTop:1,maxWidth:(0,g.pxToRem)(356)},r.createElement(z.Z,{variant:"pi",textColor:"neutral600",ellipsis:!0},i(l)))))))};Tr.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,numberOfComponents:0,required:!1},Tr.propTypes={intlDescription:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}),label:s().string,labelAction:s().element,name:s().string.isRequired,numberOfComponents:s().number,required:s().bool};const Py=Tr;var Oy=p(81346),Ry=p.n(Oy);const Xa=(0,F.default)(Fn.G)`
  width: ${(0,g.pxToRem)(32)} !important;
  height: ${(0,g.pxToRem)(32)} !important;
  padding: ${(0,g.pxToRem)(9)};
  border-radius: ${(0,g.pxToRem)(64)};
  background: ${({theme:e})=>e.colors.neutral150};
  path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,wy=(0,F.default)(T.x)`
  flex-shrink: 0;
  height: ${(0,g.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &.active,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${Xa} {
      background: ${({theme:e})=>e.colors.primary200};
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function Ir({children:e,icon:t,onClick:n}){return r.createElement("button",{type:"button",onClick:n},r.createElement(wy,{borderRadius:"borderRadius"},r.createElement(ce.K,{spacing:1,style:{justifyContent:"center",alignItems:"center"}},r.createElement(Xa,{"data-testid":"component-card-icon",icon:t}),r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},e))))}Ir.defaultProps={icon:"dice-d6",onClick(){}},Ir.propTypes={children:s().node.isRequired,icon:s().string,onClick:s().func};const My=F.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Dr=({category:e,components:t,variant:n,isOpen:o,onAddComponent:a,onToggle:l})=>{const{formatMessage:i}=(0,V.useIntl)(),c=()=>{l(e)};return r.createElement(An.U,{expanded:o,onToggle:c,size:"S"},r.createElement(jn.B,{variant:n,title:i({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement($n.v,null,r.createElement(T.x,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(My,null,t.map(({componentUid:u,info:{displayName:d,icon:f}})=>r.createElement(Ir,{key:u,icon:f,onClick:a(u)},i({id:d,defaultMessage:d})))))))};Dr.defaultProps={components:[],isOpen:!1,variant:"primary"},Dr.propTypes={category:s().string.isRequired,components:s().array,isOpen:s().bool,onAddComponent:s().func.isRequired,onToggle:s().func.isRequired,variant:s().oneOf(["primary","secondary"])};const Ty=Dr,Lr=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:o}=(0,V.useIntl)(),{getComponentLayout:a}=Qe(),[l,i]=(0,r.useState)(""),c=(0,r.useMemo)(()=>{const f=e.map(m=>{const{category:h,info:b}=a(m);return{componentUid:m,category:h,info:b}}),y=Ry()(f,"category");return Object.keys(y).reduce((m,h)=>(m.push({category:h,components:y[h]}),m),[])},[e,a]);(0,r.useEffect)(()=>{t&&c.length>0&&i(c[0].category)},[t,c]);const u=f=>()=>{n(f),i("")},d=f=>{i(y=>y===f?"":f)};return t?r.createElement(T.x,{paddingBottom:6},r.createElement(T.x,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(Z.k,{justifyContent:"center"},r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral600"},o({id:C("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(T.x,{paddingTop:2},r.createElement(Ha.k,{attributeName:"data-strapi-accordion-toggle"},c.map(({category:f,components:y},m)=>r.createElement(Ty,{key:f,category:f,components:y,onAddComponent:u,isOpen:f===l,onToggle:d,variant:m%2===1?"primary":"secondary"})))))):null};Lr.defaultProps={components:[],isOpen:!1},Lr.propTypes={components:s().array,isOpen:s().bool,onClickAddComponent:s().func.isRequired};const Iy=Lr,Sr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:o,isFieldAllowed:a,isFieldReadable:l,labelAction:i,moveComponentUp:c,moveComponentDown:u,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:f,fieldSchema:y,metadatas:m})=>{var h;const[b,E]=(0,r.useState)(!1),k=(0,g.useNotification)(),{getComponentLayout:O,components:P}=Qe(),L=f.length,v=m.description?{id:m.description,defaultMessage:m.description}:null,{max:R=1/0,min:I=-1/0}=y,M=(0,r.useMemo)(()=>Object.keys(n).filter(B=>B===e).map(B=>n[B]),[n,e]),H=I-L,W=M.length>0,q=M.length>0&&w()(M,[0,"id"],"").includes("min"),_=W&&w()(M,[0,"id"],"")==="components.Input.error.validation.max",G=B=>{E(!1);const S=O(B);t(e,S,P,W)},j=()=>{L<R?E(B=>!B):k({type:"info",message:{id:C("components.notification.info.maximum-requirement")}})},D=(B,S)=>()=>{u(B,S)},Q=(B,S)=>()=>{c(B,S)},N=(B,S)=>()=>{d(B,S)};return!a&&(o||!l&&!o)?r.createElement(g.NotAllowedInput,{description:v,intlLabel:{id:m.label,defaultMessage:m.label},labelAction:i,name:e}):r.createElement(ce.K,{spacing:6},L>0&&r.createElement(T.x,null,r.createElement(Py,{intlDescription:v,label:m.label,labelAction:i,name:e,numberOfComponents:L,required:y.required||!1}),f.map((B,S)=>{const $=a&&S<L-1,A=a&&S>0;return r.createElement(hy,{componentUid:B,formErrors:n,key:S,index:S,isFieldAllowed:a,onMoveComponentDownClick:D(e,S),onMoveComponentUpClick:Q(e,S),name:e,onRemoveComponentClick:N(e,S),showDownIcon:$,showUpIcon:A})})),r.createElement(Ey,{hasError:W,hasMaxError:_,hasMinError:q,isDisabled:!a,label:m.label,missingComponentNumber:H,isOpen:b,name:e,onClick:j}),r.createElement(Iy,{isOpen:b,components:(h=y.components)!=null?h:[],onClickAddComponent:G}))};Sr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},Sr.propTypes={addComponentToDynamicZone:s().func.isRequired,dynamicDisplayedComponents:s().array,fieldSchema:s().shape({components:s().array.isRequired,max:s().number,min:s().number,required:s().bool}),formErrors:s().object.isRequired,isCreatingEntry:s().bool.isRequired,isFieldAllowed:s().bool.isRequired,isFieldReadable:s().bool.isRequired,labelAction:s().element,metadatas:s().shape({description:s().string,label:s().string}).isRequired,moveComponentUp:s().func.isRequired,moveComponentDown:s().func.isRequired,name:s().string.isRequired,removeComponentFromDynamicZone:s().func.isRequired};const Dy=(0,r.memo)(Sr,Ye()),Ly=Cd(Dy,Od);var it=p(41578);const on=()=>({type:it.ZA}),xr=e=>({type:it.Id,data:e}),kr=(e,t=!1)=>({type:it.TP,rawQuery:e,isSingleType:t}),ei=()=>({type:it.c2}),ti=(e,t)=>({type:it.w7,componentsDataStructure:e,contentTypeDataStructure:t}),pe=e=>({type:it.d0,status:e}),Je=e=>({type:it.t9,data:e}),ni=e=>e["content-manager_editViewCrudReducer"];var Sy=p(98399),xy=Object.defineProperty,ri=Object.getOwnPropertySymbols,ky=Object.prototype.hasOwnProperty,Fy=Object.prototype.propertyIsEnumerable,oi=(e,t,n)=>t in e?xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ay=(e,t)=>{for(var n in t||(t={}))ky.call(t,n)&&oi(e,n,t[n]);if(ri)for(var n of ri(t))Fy.call(t,n)&&oi(e,n,t[n]);return e},Xe=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Fr=({allLayoutData:e,children:t,slug:n,id:o,origin:a})=>{const l=(0,at.useQueryClient)(),i=(0,g.useNotification)(),{setCurrentStep:c}=(0,g.useGuidedTour)(),{trackUsage:u}=(0,g.useTracking)(),{push:d,replace:f}=(0,X.useHistory)(),[{rawQuery:y}]=(0,g.useQueryParams)(),m=(0,ge.useDispatch)(),{componentsDataStructure:h,contentTypeDataStructure:b,data:E,isLoading:k,status:O}=(0,ge.useSelector)(ni),P=as(n),L=(0,r.useRef)(!0),v=(0,r.useRef)(u),R=(0,r.useRef)(e),I=o===null,M=(0,r.useMemo)(()=>I&&!a?null:fe(`collection-types/${n}/${a||o}`),[n,o,I,a]),H=(0,r.useCallback)(S=>a?(0,g.contentManagementUtilRemoveFieldsFromData)(S,R.current.contentType,R.current.components):S,[a]),W=(0,r.useCallback)(S=>{const $=Uo(S,R.current.contentType,R.current.components);return(0,g.formatContentTypeData)($,R.current.contentType,R.current.components)},[]);(0,r.useEffect)(()=>{const S=Object.keys(e.components).reduce((x,K)=>{const J=qt(w()(e,["components",K,"attributes"],{}),e.components);return x[K]=(0,g.formatContentTypeData)(J,e.components[K],e.components),x},{}),$=qt(e.contentType.attributes,e.components),A=(0,g.formatContentTypeData)($,e.contentType,e.components);m(ti(S,A))},[e,m]),(0,r.useEffect)(()=>()=>{m(ei())},[m]),(0,r.useEffect)(()=>{const $=$e().CancelToken.source(),A=K=>Xe(void 0,null,function*(){m(on());try{const{data:J}=yield me.be.get(M,{cancelToken:K.token});m(xr(W(H(J))))}catch(J){if($e().isCancel(J))return;Sy.error(J);const ie=w()(J,"response.status",null);if(ie===404){d(P);return}ie===403&&(i({type:"info",message:{id:C("permissions.not-allowed.update")}}),d(P))}}),x=()=>Xe(void 0,null,function*(){yield m(on()),yield m(kr(y))});return L.current?(M?A($):x(),()=>{$.cancel("Operation canceled by the user.")}):()=>{}},[H,W,d,M,m,y,P,i]);const q=(0,r.useCallback)(S=>{const $=S.response.data;let A=w()($,["error","message"],"Bad Request");Array.isArray(A)&&(A=w()(A,["0","messages","0","id"])),typeof A=="string"&&i({type:"warning",message:A})},[i]),_=(0,r.useCallback)(S=>Xe(void 0,null,function*(){try{v.current("willDeleteEntry",S);const{data:$}=yield me.be.delete(fe(`collection-types/${n}/${o}`));return i({type:"success",message:{id:C("success.record.delete")}}),v.current("didDeleteEntry",S),Promise.resolve($)}catch($){return v.current("didNotDeleteEntry",Ay({error:$},S)),Promise.reject($)}}),[o,n,i]),G=(0,r.useCallback)(()=>{f(P)},[P,f]),j=(0,r.useCallback)((S,$)=>Xe(void 0,null,function*(){const A=`${fe(`collection-types/${n}`)}${y}`;try{m(pe("submit-pending"));const{data:x}=yield me.be.post(A,S);return v.current("didCreateEntry",$),i({type:"success",message:{id:C("success.record.save")}}),c("contentManager.success"),l.invalidateQueries(["relation"]),m(Je(W(x))),m(pe("resolved")),f(`/content-manager/collectionType/${n}/${x.id}${y}`),Promise.resolve(x)}catch(x){return q(x),v.current("didNotCreateEntry",{error:x,trackerProperty:$}),m(pe("resolved")),Promise.reject(x)}}),[W,q,f,n,m,y,i,c,l]),D=(0,r.useCallback)(()=>Xe(void 0,null,function*(){try{v.current("willCheckDraftRelations");const S=fe(`collection-types/${n}/${o}/actions/numberOfDraftRelations`);m(pe("draft-relation-check-pending"));const $=yield me.be.get(S);return v.current("didCheckDraftRelations"),m(pe("resolved")),$.data.data}catch(S){return q(S),m(pe("resolved")),Promise.reject(S)}}),[q,o,n,m]),Q=(0,r.useCallback)(()=>Xe(void 0,null,function*(){try{v.current("willPublishEntry");const S=fe(`collection-types/${n}/${o}/actions/publish`);m(pe("publish-pending"));const{data:$}=yield me.be.post(S);return v.current("didPublishEntry"),m(Je(W($))),m(pe("resolved")),i({type:"success",message:{id:C("success.record.publish")}}),Promise.resolve($)}catch(S){return q(S),m(pe("resolved")),Promise.reject(S)}}),[W,q,o,n,m,i]),N=(0,r.useCallback)((S,$)=>Xe(void 0,null,function*(){const A=fe(`collection-types/${n}/${o}`);try{v.current("willEditEntry",$),m(pe("submit-pending"));const{data:x}=yield me.be.put(A,S);return v.current("didEditEntry",{trackerProperty:$}),i({type:"success",message:{id:C("success.record.save")}}),l.invalidateQueries(["relation"]),m(Je(W(x))),m(pe("resolved")),Promise.resolve(x)}catch(x){return v.current("didNotEditEntry",{error:x,trackerProperty:$}),q(x),m(pe("resolved")),Promise.reject(x)}}),[W,q,n,o,m,i,l]),B=(0,r.useCallback)(()=>Xe(void 0,null,function*(){const S=fe(`collection-types/${n}/${o}/actions/unpublish`);m(pe("unpublish-pending"));try{v.current("willUnpublishEntry");const{data:$}=yield me.be.post(S);return v.current("didUnpublishEntry"),i({type:"success",message:{id:C("success.record.unpublish")}}),m(Je(W($))),m(pe("resolved")),Promise.resolve($)}catch($){return m(pe("resolved")),q($),Promise.reject($)}}),[W,q,o,n,m,i]);return t({componentsDataStructure:h,contentTypeDataStructure:b,data:E,isCreatingEntry:I,isLoadingForData:k,onDelete:_,onDeleteSucceeded:G,onPost:j,onPublish:Q,onDraftRelationCheck:D,onPut:N,onUnpublish:B,status:O,redirectionLink:P})};Fr.defaultProps={id:null,origin:null},Fr.propTypes={allLayoutData:s().exact({components:s().object.isRequired,contentType:s().shape({apiID:s().string.isRequired,attributes:s().object.isRequired,info:s().object.isRequired,isDisplayed:s().bool.isRequired,kind:s().string.isRequired,layouts:s().object.isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,pluginOptions:s().object,settings:s().object.isRequired,uid:s().string.isRequired}).isRequired}).isRequired,children:s().func.isRequired,id:s().string,origin:s().string,slug:s().string.isRequired};const jy=(0,r.memo)(Fr,Ye());var $y=p(86834),Se=p.n($y),Ny=p(89793),sn=p.n(Ny),Vy=p(3040),ee=p.n(Vy),qy=p(56236),By=p.n(qy),Zy=p(10268),si=p.n(Zy),zy=p(86349),Wy=p.n(zy);const Ar=(e,t,n,o)=>{const a=e.slice();return a.splice(t,1),a.splice(n,0,o),a};var _y=p(77236),Uy=p.n(_y);const Hy=({browserState:e,serverState:t},n,o)=>{const a=(c,u)=>w()(c,["attributes",u,"type"],""),l=(c,u)=>w()(c,["attributes",...u],""),i=(c,u,d)=>Object.keys(c).reduce((f,y)=>{const m=a(d,y),h=w()(c,y),b=w()(u,y),E=l(d,[y,"component"]),k=l(d,[y,"repeatable"]);let O;switch(m){case"json":O=JSON.parse(h);break;case"time":{O=h,h&&h.split(":").length<3&&(O=`${h}:00`);break}case"media":l(d,[y,"multiple"])===!0?O=h?h.filter(P=>!(P instanceof File)):null:O=w()(h,0)instanceof File?null:w()(h,"id",null);break;case"component":k?O=h&&h.map((P,L)=>i(P,(b!=null?b:[])[L],o[E])):O=h&&i(h,b,o[E]);break;case"relation":{let P=b!=null?b:[];const L=h.reduce((R,I)=>P.find(M=>M.id===I.id)?R:[...R,{id:I.id}],[]);O={disconnect:P.reduce((R,I)=>h.find(M=>M.id===I.id)?R:[...R,{id:I.id}],[]),connect:L};break}case"dynamiczone":O=h.map((P,L)=>i(P,(b!=null?b:[])[L],o[P.__component]));break;default:O=Gy(h,"id")}return f[y]=O,f},{});return i(e,t,n)},Gy=(e,t)=>Uy()(e)?e.map(n=>n[t]?n[t]:n):ns()(e)?e[t]:e,Ky=Hy;var Qy=p(51355),Yy=p.n(Qy),Jy=p(95919),Xy=p.n(Jy),eh=p(78746),yt=p.n(eh),ve=p(5173);function xt(e){return["integer","biginteger","decimal","float","number"].includes(e)}var th=Object.defineProperty,nh=Object.defineProperties,rh=Object.getOwnPropertyDescriptors,ai=Object.getOwnPropertySymbols,oh=Object.prototype.hasOwnProperty,sh=Object.prototype.propertyIsEnumerable,ii=(e,t,n)=>t in e?th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,li=(e,t)=>{for(var n in t||(t={}))oh.call(t,n)&&ii(e,n,t[n]);if(ai)for(var n of ai(t))sh.call(t,n)&&ii(e,n,t[n]);return e},ci=(e,t)=>nh(e,rh(t));ve.kM(ve.nK,"defined",function(){return this.test("defined",g.translatedErrors.required,e=>e!==void 0)}),ve.kM(ve.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",g.translatedErrors.min,t=>Se()(t)?!0:t.length>=e)}),ve.kM(ve.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(yt()(n))?!0:yt()(t)>=yt()(n)})}),ve.kM(ve.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(yt()(n))?!0:yt()(n)>=yt()(t)})});const ah=e=>w()(e,["attributes"],{}),jr=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=ah(e);return ve.Ry().shape(Object.keys(o).reduce((a,l)=>{const i=o[l];if(i.type!=="relation"&&i.type!=="component"&&i.type!=="dynamiczone"){const c=ih(i.type,i,n);a[l]=c}if(i.type==="relation"&&(a[l]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(i.relationType)?ve.Ry().nullable():ve.IX().nullable()),i.type==="component"){const c=jr(t[i.component],{components:t},ci(li({},n),{isFromComponent:!0}));if(i.repeatable===!0){const{min:d,max:f,required:y}=i;let m=ve.Vo(h=>{let b=ve.IX().of(c);return d?y?b=b.min(d,g.translatedErrors.min):y!==!0&&Se()(h)?b=b.nullable():b=b.min(d,g.translatedErrors.min):y&&!n.isDraft&&(b=b.min(1,g.translatedErrors.required)),f&&(b=b.max(f,g.translatedErrors.max)),b});return a[l]=m,a}const u=ve.Vo(d=>d!==void 0?i.required===!0&&!n.isDraft?c.defined():c.nullable():i.required===!0?ve.Ry().defined():ve.Ry().nullable());return a[l]=u,a}if(i.type==="dynamiczone"){let c=ve.IX().of(ve.Vo(({__component:f})=>jr(t[f],{components:t},ci(li({},n),{isFromComponent:!0}))));const{max:u,min:d}=i;d?i.required?c=c.test("min",g.translatedErrors.min,f=>n.isCreatingEntry?f&&f.length>=d:f===void 0?!0:f!==null&&f.length>=d).test("required",g.translatedErrors.required,f=>n.isCreatingEntry?f!==null||f!==void 0:f===void 0?!0:f!==null):c=c.notEmptyMin(d):i.required&&!n.isDraft&&(c=c.test("required",g.translatedErrors.required,f=>n.isCreatingEntry?f!==null||f!==void 0:f===void 0?!0:f!==null)),u&&(c=c.max(u,g.translatedErrors.max)),a[l]=c}return a},{}))},ih=(e,t,n)=>{let o=ve.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(o=ve.Z_()),e==="json"&&(o=ve.nK(g.translatedErrors.json).test("isJSON",g.translatedErrors.json,a=>{if(a===void 0)return!0;try{return JSON.parse(a),!0}catch(l){return!1}}).nullable()),e==="email"&&(o=o.email(g.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(o=ve.Rx().transform(a=>Xy()(a)?void 0:a).typeError()),e==="biginteger"&&(o=ve.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(o=ve.hT()),Object.keys(t).forEach(a=>{const l=t[a];if(!!l||!Yy()(l)&&Number.isInteger(Math.floor(l))||l===0)switch(a){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(o=o.required(g.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?o=o.required(g.translatedErrors.required):o=o.test("required",g.translatedErrors.required,i=>i===void 0&&!n.isFromComponent?!0:xt(e)?i===0?!0:!!i:e==="boolean"?i!==null:e==="date"||e==="datetime"?typeof i=="string"?!Se()(i):!Se()(i==null?void 0:i.toString()):!Se()(i))));break}case"max":{e==="biginteger"?o=o.isInferior(g.translatedErrors.max,l):o=o.max(l,g.translatedErrors.max);break}case"maxLength":o=o.max(l,g.translatedErrors.maxLength);break;case"min":{e==="biginteger"?o=o.isSuperior(g.translatedErrors.min,l):o=o.min(l,g.translatedErrors.min);break}case"minLength":{n.isDraft||(o=o.min(l,g.translatedErrors.minLength));break}case"regex":o=o.matches(new RegExp(l),{message:g.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().uppercase());break;case"positive":xt(e)&&(o=o.positive());break;case"negative":xt(e)&&(o=o.negative());break;default:o=o.nullable()}}),o},ui=jr,et=(e,t=()=>!1)=>{const n=o=>Object.entries(o).reduce((a,[l,i])=>{if(t(i)&&(a=[...a,l]),i.type==="component"){const c=e[i.component].attributes,d=n(c).map(f=>`${l}.${f}`);a=[...a,d]}else if(i.type==="dynamiczone"){const u=i.components.flatMap(d=>n({[d]:{type:"component",component:d}}).map(f=>f.split(`${d}.`)[1])).map(d=>`${l}.${d}`);a=[...a,u]}return a.flat()},[]);return n},lh=(e,t)=>{const n=(o,a,l,i)=>o&&(e===a&&o[a]!==void 0?(ee()(o,a,t),o):(Array.isArray(o[a])&&o[a].forEach(c=>{i.slice(l+1).reduce(n,c)}),o[a]));return n};var ch=Object.defineProperty,uh=Object.defineProperties,dh=Object.getOwnPropertyDescriptors,di=Object.getOwnPropertySymbols,ph=Object.prototype.hasOwnProperty,mh=Object.prototype.propertyIsEnumerable,pi=(e,t,n)=>t in e?ch(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kt=(e,t)=>{for(var n in t||(t={}))ph.call(t,n)&&pi(e,n,t[n]);if(di)for(var n of di(t))mh.call(t,n)&&pi(e,n,t[n]);return e},$r=(e,t)=>uh(e,dh(t));const fh={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null,publishConfirmation:{show:!1,draftCount:0}},gh=(e,t)=>(0,Wt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{const{componentLayoutData:o,allComponents:a}=t,l=et(a,d=>d.type==="relation")(o.attributes),i=kt({},e.componentsDataStructure[o.uid]),c=et(a,d=>d.type==="component"&&d.repeatable)(o.attributes),u=l.reduce((d,f)=>{const[y]=f.split(".");return c.includes(y)||ee()(d,f,[]),d},i);ee()(n,["modifiedData",...t.keys],u);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{const{keys:o,allComponents:a,componentLayoutData:l,shouldCheckErrors:i}=t;i&&(n.shouldCheckErrors=!e.shouldCheckErrors),t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"&&(n.modifiedDZName=o[0]);const c=w()(e,["modifiedData",...o],[]),u=t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"?$r(kt({},e.componentsDataStructure[l.uid]),{__component:l.uid}):$r(kt({},e.componentsDataStructure[l.uid]),{__temp_key__:No(c)+1}),d=et(a,h=>h.type==="relation")(l.attributes),f=et(a,h=>h.type==="component"&&h.repeatable)(l.attributes),y=d.reduce((h,b)=>{const[E]=b.split(".");return f.includes(E)||ee()(h,b,[]),h},u),m=Array.isArray(c)?[...c,y]:[y];ee()(n,["modifiedData",...o],m);break}case"LOAD_RELATION":{const o=["initialData",...t.keys],a=["modifiedData",...t.keys],{value:l}=t,i=w()(e,o),c=w()(e,a);ee()(n,o,si()([...l,...i],"id")),ee()(n,a,si()([...l,...c],"id"));break}case"CONNECT_RELATION":{const o=["modifiedData",...t.keys],{value:a,toOneRelation:l}=t;if(l)ee()(n,o,[a]);else{const c=[...w()(e,o),a];ee()(n,o,c)}break}case"DISCONNECT_RELATION":{const o=["modifiedData",...t.keys],{id:a}=t,i=w()(e,[...o]).filter(c=>c.id!==a);ee()(n,o,i);break}case"INIT_FORM":{const{initialValues:o,relationalFieldPaths:a=[],componentPaths:l=[],repeatableComponentPaths:i=[],dynamicZonePaths:c=[]}=t,u=Ze()(o),d=a.map(f=>f.split(".")).reduce((f,y)=>{const[m]=y;if(e.modifiedData&&w()(e.modifiedData,m)){const h=Ze()(w()(e.modifiedData,m));ee()(f,m,Wy()(h,w()(o,m)))}else if(i.includes(m)||c.includes(m)||l.includes(m)){const h=lh(y.slice(-1)[0],[]);y.reduce(h,f)}else ee()(f,y,[]);return f},u);n.initialData=d,n.modifiedData=d,n.formErrors={},n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const o=w()(e,["modifiedData",...t.pathToComponent]),a=w()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),l=Ar(o,t.dragIndex,t.hoverIndex,a);ee()(n,["modifiedData",...t.pathToComponent],l);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:o,dynamicZoneName:a,shouldCheckErrors:l}=t;l&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=e.modifiedData[a],c=t.type==="MOVE_COMPONENT_UP"?o-1:o+1,u=e.modifiedData[a][o],d=Ar(i,o,c,u);ee()(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const o=w()(e,["modifiedData",...t.keys],[]).slice(),a=w()(e,["modifiedData",...t.keys,t.dragIndex]),l=Ar(o,t.dragIndex,t.overIndex,a);ee()(n,["modifiedData",...t.keys],l);break}case"ON_CHANGE":{const[o]=t.keys;if(t.shouldSetInitialValue&&ee()(n,["initialData",...t.keys],t.value),t.keys.length===2&&w()(e,["modifiedData",o])===null){ee()(n,["modifiedData",o],{[t.keys[1]]:t.value});break}ee()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const o=["modifiedData",...t.keys];ee()(n,o,null);break}case"REMOVE_PASSWORD_FIELD":{By()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const o=t.keys.length-1,a=["modifiedData",...Vn()(t.keys,o)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=w()(e,a).slice();i.splice(parseInt(t.keys[o],10),1),ee()(n,a,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"SET_PUBLISH_CONFIRMATION":{n.publishConfirmation=kt({},t.publishConfirmation);break}case"RESET_PUBLISH_CONFIRMATION":{n.publishConfirmation=$r(kt({},e.publishConfirmation),{show:!1});break}default:return n}});var yh=Object.defineProperty,mi=Object.getOwnPropertySymbols,hh=Object.prototype.hasOwnProperty,bh=Object.prototype.propertyIsEnumerable,fi=(e,t,n)=>t in e?yh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,an=(e,t)=>{for(var n in t||(t={}))hh.call(t,n)&&fi(e,n,t[n]);if(mi)for(var n of mi(t))bh.call(t,n)&&fi(e,n,t[n]);return e},ln=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Nr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:o,componentsDataStructure:a,contentTypeDataStructure:l,createActionAllowedFields:i,from:c,initialValues:u,isCreatingEntry:d,isLoadingForData:f,isSingleType:y,onPost:m,onPublish:h,onDraftRelationCheck:b,onPut:E,onUnpublish:k,readActionAllowedFields:O,redirectToPreviousPage:P,slug:L,status:v,updateActionAllowedFields:R})=>{const[I,M]=(0,r.useReducer)(gh,fh),{formErrors:H,initialData:W,modifiedData:q,modifiedDZName:_,shouldCheckErrors:G,publishConfirmation:j}=I,D=(0,g.useNotification)(),{lockApp:Q,unlockApp:N}=(0,g.useOverlayBlocker)(),B=w()(e,["contentType"],{}),S=(0,r.useMemo)(()=>w()(B,["options","draftAndPublish"],!1),[B]),$=(0,r.useMemo)(()=>S&&!W.publishedAt,[S,W.publishedAt]),{trackUsage:A}=(0,g.useTracking)(),{formatMessage:x}=(0,V.useIntl)(),K=(0,r.useRef)(A),J=(0,r.useMemo)(()=>f||d?!1:t===!1&&n===!1,[f,d,t,n]);(0,r.useEffect)(()=>{v==="resolved"?N():Q()},[Q,N,v]),(0,r.useEffect)(()=>{f||Fe()},[G]),(0,r.useEffect)(()=>{const te=Object.keys(H);if(te.length>0){const ne=te[0],ae=document.getElementById(ne);ae&&ae.focus()}},[H]),(0,r.useEffect)(()=>{J&&D({type:"info",message:{id:C("permissions.not-allowed.update")}})},[J,D]),(0,r.useEffect)(()=>{M({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:a,contentTypeDataStructure:l})},[a,l]);const{components:ie}=e;(0,r.useEffect)(()=>{if(u&&(B==null?void 0:B.attributes)){const te=et(ie,De=>De.type==="relation")(B.attributes),ne=et(ie,De=>De.type==="component"&&!De.repeatable)(B.attributes),ae=et(ie,De=>De.type==="component"&&De.repeatable)(B.attributes),Ie=et(ie,De=>De.type==="dynamiczone")(B.attributes);M({type:"INIT_FORM",initialValues:u,relationalFieldPaths:te,componentPaths:ne,repeatableComponentPaths:ae,dynamicZonePaths:Ie})}},[u,B,ie]);const oe=(0,r.useCallback)(te=>(ne,ae,Ie,De=!1)=>{K.current("didAddComponentToDynamicZone"),M({type:te,keys:ne.split("."),componentLayoutData:ae,allComponents:Ie,shouldCheckErrors:De})},[]),U=oe("ADD_COMPONENT_TO_DYNAMIC_ZONE"),se=(0,r.useCallback)((te,ne,ae)=>{M({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:te.split("."),componentLayoutData:ne,allComponents:ae})},[]),Ne=(0,r.useCallback)(({name:te,value:ne,toOneRelation:ae})=>{M({type:"CONNECT_RELATION",keys:te.split("."),value:ne,toOneRelation:ae})},[]),ye=(0,r.useCallback)(({target:{name:te,value:ne}})=>{M({type:"LOAD_RELATION",keys:te.split("."),value:ne})},[]),Ve=oe("ADD_REPEATABLE_COMPONENT_TO_FIELD"),we=(0,r.useMemo)(()=>{const te={isCreatingEntry:d,isDraft:$,isFromComponent:!1};return ui(B,{components:e.components||{}},te)},[e.components,B,d,$]),Fe=(0,r.useCallback)((...te)=>ln(void 0,[...te],function*(ne={}){let ae={};const Ie=Ze()(q);Se()(Ie)||ee()(Ie,ne.path,ne.value);try{yield we.validate(Ie,{abortEarly:!1})}catch(De){ae=(0,g.getYupInnerErrors)(De),_&&(ae=Object.keys(ae).reduce((Nc,bo)=>(bo.split(".")[0]!==_&&(Nc[bo]=ae[bo]),Nc),{}))}M({type:"SET_FORM_ERRORS",errors:ae})}),[_,q,we]),tt=(0,r.useCallback)(({target:{name:te,value:ne,type:ae}},Ie=!1)=>{let De=ne;if(["text","textarea","string","email","uid","select","select-one","number"].includes(ae)&&!ne&&ne!==0&&(De=null),ae==="password"&&!ne){M({type:"REMOVE_PASSWORD_FIELD",keys:te.split(".")});return}M({type:"ON_CHANGE",keys:te.split("."),value:De,shouldSetInitialValue:Ie})},[]),qe=(0,r.useCallback)((te,ne)=>{const ae=Ru(Ze()(te),"__temp_key__");return Ky({browserState:ae,serverState:ne},B,e.components)},[e.components,B]),Ee=(0,r.useMemo)(()=>S?$?{status:"draft"}:{}:{},[S,$]),nt=(0,r.useCallback)(te=>ln(void 0,null,function*(){return te.preventDefault(),M({type:"RESET_PUBLISH_CONFIRMATION"})}),[]),ho=(0,r.useCallback)(te=>ln(void 0,null,function*(){te.preventDefault();let ne={};try{yield we.validate(q,{abortEarly:!1})}catch(ae){ne=(0,g.getYupInnerErrors)(ae)}try{if(Se()(ne)){const ae=qe(q,W);d?yield m(ae,Ee):yield E(ae,Ee)}}catch(ae){ne=an(an({},ne),(0,g.getAPIInnerErrors)(ae,{getTrad:C}))}M({type:"SET_FORM_ERRORS",errors:ne})}),[qe,d,q,W,m,E,Ee,we]),VC=(0,r.useCallback)(()=>ln(void 0,null,function*(){const te=ui(B,{components:w()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1}),ne=yield b();if(!j.show&&ne>0){M({type:"SET_PUBLISH_CONFIRMATION",publishConfirmation:{show:!0,draftCount:ne}});return}M({type:"RESET_PUBLISH_CONFIRMATION"});let ae={};try{yield te.validate(q,{abortEarly:!1})}catch(Ie){ae=(0,g.getYupInnerErrors)(Ie)}try{Se()(ae)&&(yield h())}catch(Ie){ae=an(an({},ae),(0,g.getAPIInnerErrors)(Ie,{getTrad:C}))}M({type:"SET_FORM_ERRORS",errors:ae})}),[e,B,d,q,j.show,h,b]),Ct=(0,r.useCallback)(te=>{const ne=Object.keys(H).some(Ie=>Ie.split(".")[0]===te);return!Se()(H)&&ne},[H]),qC=(0,r.useCallback)((te,ne)=>{K.current("changeComponentsOrder"),M({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:te,currentIndex:ne,shouldCheckErrors:Ct(te)})},[Ct]),BC=(0,r.useCallback)((te,ne)=>{K.current("changeComponentsOrder"),M({type:"MOVE_COMPONENT_UP",dynamicZoneName:te,currentIndex:ne,shouldCheckErrors:Ct(te)})},[Ct]),ZC=(0,r.useCallback)((te,ne,ae)=>{M({type:"MOVE_COMPONENT_FIELD",pathToComponent:te,dragIndex:ne,hoverIndex:ae})},[]),zC=(0,r.useCallback)(({name:te,id:ne})=>{M({type:"DISCONNECT_RELATION",keys:te.split("."),id:ne})},[]),WC=(0,r.useCallback)((te,ne)=>{K.current("removeComponentFromDynamicZone"),M({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:te,index:ne,shouldCheckErrors:Ct(te)})},[Ct]),_C=(0,r.useCallback)((te,ne)=>{M({type:"REMOVE_COMPONENT_FROM_FIELD",keys:te.split("."),componentUid:ne})},[]),UC=(0,r.useCallback)((te,ne)=>{M({type:"REMOVE_REPEATABLE_FIELD",keys:te.split("."),componentUid:ne})},[]),HC=(0,r.useCallback)(()=>{M({type:"TRIGGER_FORM_VALIDATION"})},[]);return J?r.createElement(X.Redirect,{to:c}):q?r.createElement(g.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:U,addNonRepeatableComponentToField:se,connectRelation:Ne,addRepeatableComponentToField:Ve,allLayoutData:e,checkFormErrors:Fe,createActionAllowedFields:i,formErrors:H,hasDraftAndPublish:S,initialData:W,isCreatingEntry:d,isSingleType:y,shouldNotRunValidations:$,status:v,layout:B,loadRelation:ye,modifiedData:q,moveComponentDown:qC,moveComponentField:ZC,moveComponentUp:BC,onChange:tt,onPublish:VC,onUnpublish:k,disconnectRelation:zC,readActionAllowedFields:O,redirectToPreviousPage:P,removeComponentFromDynamicZone:WC,removeComponentFromField:_C,removeRepeatableField:UC,slug:L,triggerFormValidation:HC,updateActionAllowedFields:R,onPublishPromptDismissal:nt,publishConfirmation:j}},f||!d&&!W.id?r.createElement(he.o,{"aria-busy":"true"},r.createElement(g.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(X.Prompt,{when:!sn()(q,W),message:x({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:ho},o))):null};Nr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage(){}},Nr.propTypes={allLayoutData:s().object.isRequired,allowedActions:s().object.isRequired,children:s().node.isRequired,componentsDataStructure:s().object.isRequired,contentTypeDataStructure:s().object.isRequired,createActionAllowedFields:s().array.isRequired,from:s().string,initialValues:s().object,isCreatingEntry:s().bool.isRequired,isLoadingForData:s().bool.isRequired,isSingleType:s().bool.isRequired,onPost:s().func.isRequired,onPublish:s().func.isRequired,onDraftRelationCheck:s().func.isRequired,onPut:s().func.isRequired,onUnpublish:s().func.isRequired,readActionAllowedFields:s().array.isRequired,redirectToPreviousPage:s().func,slug:s().string.isRequired,status:s().string.isRequired,updateActionAllowedFields:s().array.isRequired};const vh=Nr,lt=e=>fe(`single-types/${e}`),Eh=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var Ch=Object.defineProperty,cn=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,yi=Object.prototype.propertyIsEnumerable,hi=(e,t,n)=>t in e?Ch(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bi=(e,t)=>{for(var n in t||(t={}))gi.call(t,n)&&hi(e,n,t[n]);if(cn)for(var n of cn(t))yi.call(t,n)&&hi(e,n,t[n]);return e},Ph=(e,t)=>{var n={};for(var o in e)gi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&cn)for(var o of cn(e))t.indexOf(o)<0&&yi.call(e,o)&&(n[o]=e[o]);return n};const vi=(e={})=>{const t=bi(bi({},e),Eh(e.plugins)),{plugins:n,_q:o}=t,a=Ph(t,["plugins","_q"]);return o&&ee()(a,"_q",encodeURIComponent(o)),`${(0,Ge.stringify)(a,{encode:!1,addQueryPrefix:!0})}`};var Oh=Object.defineProperty,Ei=Object.getOwnPropertySymbols,Rh=Object.prototype.hasOwnProperty,wh=Object.prototype.propertyIsEnumerable,Ci=(e,t,n)=>t in e?Oh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mh=(e,t)=>{for(var n in t||(t={}))Rh.call(t,n)&&Ci(e,n,t[n]);if(Ei)for(var n of Ei(t))wh.call(t,n)&&Ci(e,n,t[n]);return e},ct=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Pi=({allLayoutData:e,children:t,slug:n})=>{const o=(0,at.useQueryClient)(),{trackUsage:a}=(0,g.useTracking)(),{push:l}=(0,X.useHistory)(),{setCurrentStep:i}=(0,g.useGuidedTour)(),c=(0,r.useRef)(a),[u,d]=(0,r.useState)(!0),[{query:f,rawQuery:y}]=(0,g.useQueryParams)(),m=vi(f),h=(0,g.useNotification)(),b=(0,ge.useDispatch)(),{componentsDataStructure:E,contentTypeDataStructure:k,data:O,isLoading:P,status:L}=(0,ge.useSelector)(ni),v=(0,r.useCallback)(j=>{const D=Uo(j,e.contentType,e.components);return(0,g.formatContentTypeData)(D,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{b(ei())},[b]),(0,r.useEffect)(()=>{const j=Object.keys(e.components).reduce((N,B)=>{const S=qt(w()(e,["components",B,"attributes"],{}),e.components);return N[B]=(0,g.formatContentTypeData)(S,e.components[B],e.components),N},{}),D=qt(e.contentType.attributes,e.components),Q=(0,g.formatContentTypeData)(D,e.contentType,e.components);b(ti(j,Q))},[e,b]),(0,r.useEffect)(()=>{const D=$e().CancelToken.source();return(N=>ct(void 0,null,function*(){b(on()),d(!0);try{const{data:B}=yield(0,me.be)(lt(`${n}${m}`),{cancelToken:N.token});b(xr(v(B))),d(!1)}catch(B){if($e().isCancel(B))return;const S=w()(B,"response.status",null);S===404&&b(kr(y,!0)),S===403&&(h({type:"info",message:{id:C("permissions.not-allowed.update")}}),l("/"))}}))(D),()=>D.cancel("Operation canceled by the user.")},[v,l,n,b,m,y,h]);const R=(0,r.useCallback)(j=>{const D=j.response.data;let Q=w()(D,["error","message"],"Bad Request");Array.isArray(Q)&&(Q=w()(Q,["0","messages","0","id"])),typeof Q=="string"&&h({type:"warning",message:Q})},[h]),I=(0,r.useCallback)(j=>ct(void 0,null,function*(){try{c.current("willDeleteEntry",j);const{data:D}=yield me.be.delete(lt(`${n}${m}`));return h({type:"success",message:{id:C("success.record.delete")}}),c.current("didDeleteEntry",j),Promise.resolve(D)}catch(D){return c.current("didNotDeleteEntry",Mh({error:D},j)),R(D),Promise.reject(D)}}),[n,R,h,m]),M=(0,r.useCallback)(()=>{d(!0),b(kr(y,!0))},[b,y]),H=(0,r.useCallback)((j,D)=>ct(void 0,null,function*(){const Q=lt(`${n}${y}`);try{b(pe("submit-pending"));const{data:N}=yield me.be.put(Q,j);return c.current("didCreateEntry",D),h({type:"success",message:{id:C("success.record.save")}}),i("contentManager.success"),o.invalidateQueries(["relation"]),b(Je(v(N))),d(!1),b(pe("resolved")),Promise.resolve(N)}catch(N){return c.current("didNotCreateEntry",{error:N,trackerProperty:D}),R(N),b(pe("resolved")),Promise.reject(N)}}),[v,R,n,b,y,h,i,o]),W=(0,r.useCallback)(()=>ct(void 0,null,function*(){try{c.current("willCheckDraftRelations");const j=lt(`${n}/actions/numberOfDraftRelations`);b(pe("draft-relation-check-pending"));const D=yield me.be.get(j);return c.current("didCheckDraftRelations"),b(pe("resolved")),D.data.data}catch(j){return R(j),b(pe("resolved")),Promise.reject(j)}}),[R,n,b]),q=(0,r.useCallback)(()=>ct(void 0,null,function*(){try{c.current("willPublishEntry");const j=lt(`${n}/actions/publish${m}`);b(pe("publish-pending"));const{data:D}=yield me.be.post(j);return c.current("didPublishEntry"),h({type:"success",message:{id:C("success.record.publish")}}),b(Je(v(D))),b(pe("resolved")),Promise.resolve(D)}catch(j){return R(j),b(pe("resolved")),Promise.reject(j)}}),[v,R,n,m,b,h]),_=(0,r.useCallback)((j,D)=>ct(void 0,null,function*(){const Q=lt(`${n}${y}`);try{c.current("willEditEntry",D),b(pe("submit-pending"));const{data:N}=yield me.be.put(Q,j);return h({type:"success",message:{id:C("success.record.save")}}),c.current("didEditEntry",{trackerProperty:D}),o.invalidateQueries(["relation"]),b(Je(v(N))),b(pe("resolved")),Promise.resolve(N)}catch(N){return R(N),c.current("didNotEditEntry",{error:N,trackerProperty:D}),b(pe("resolved")),Promise.reject(N)}}),[v,R,n,b,y,h,o]),G=(0,r.useCallback)(()=>ct(void 0,null,function*(){const j=lt(`${n}/actions/unpublish${m}`);b(pe("unpublish-pending"));try{c.current("willUnpublishEntry");const{data:D}=yield me.be.post(j);c.current("didUnpublishEntry"),h({type:"success",message:{id:C("success.record.unpublish")}}),b(Je(v(D))),b(pe("resolved"))}catch(D){b(pe("resolved")),R(D)}}),[v,h,R,n,b,m]);return t({componentsDataStructure:E,contentTypeDataStructure:k,data:O,isCreatingEntry:u,isLoadingForData:P,onDelete:I,onDeleteSucceeded:M,onPost:H,onDraftRelationCheck:W,onPublish:q,onPut:_,onUnpublish:G,redirectionLink:"/",status:L})};Pi.propTypes={allLayoutData:s().shape({components:s().object.isRequired,contentType:s().object.isRequired}).isRequired,children:s().func.isRequired,slug:s().string.isRequired};const Th=(0,r.memo)(Pi);var Ih=p(56243),Dh=Object.defineProperty,Oi=Object.getOwnPropertySymbols,Lh=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable,Ri=(e,t,n)=>t in e?Dh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wi=(e,t)=>{for(var n in t||(t={}))Lh.call(t,n)&&Ri(e,n,t[n]);if(Oi)for(var n of Oi(t))Sh.call(t,n)&&Ri(e,n,t[n]);return e};function xh(e,t){return n=>{const o=t();return r.createElement(e,wi(wi({},n),o))}}const kh=xh;function Fh(){const{initialData:e,hasDraftAndPublish:t}=(0,g.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const Ah=Fh;var jh=Object.defineProperty,Mi=Object.getOwnPropertySymbols,$h=Object.prototype.hasOwnProperty,Nh=Object.prototype.propertyIsEnumerable,Ti=(e,t,n)=>t in e?jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vh=(e,t)=>{for(var n in t||(t={}))$h.call(t,n)&&Ti(e,n,t[n]);if(Mi)for(var n of Mi(t))Nh.call(t,n)&&Ti(e,n,t[n]);return e};const qh=(0,F.default)(Ih.default)`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,Ii=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,V.useIntl)();if(!e)return null;const o={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},a=t?o.published:o.draft;return r.createElement(T.x,Vh({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},a.box),r.createElement(T.x,{as:Z.k},r.createElement(qh,{$bulletColor:a.bulletColor}),r.createElement(T.x,{paddingLeft:3},r.createElement(z.Z,{textColor:a.textColor},n({id:C("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(z.Z,{fontWeight:"bold",textColor:a.textColor},t&&n({id:C("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:C("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};Ii.propTypes={hasDraftAndPublish:s().bool.isRequired,isPublished:s().bool.isRequired};const Bh=kh(Ii,Ah);var Vr=p(9026);const qr=60*1e3,Br=qr*60,un=Br*24,Di=un*30,Li=un*365,Zh=e=>e<qr?{unit:"second",value:-Math.round(e/1e3)}:e<Br?{unit:"minute",value:-Math.round(e/qr)}:e<un?{unit:"hour",value:-Math.round(e/Br)}:e<Di?{unit:"day",value:-Math.round(e/un)}:e<Li?{unit:"month",value:-Math.round(e/Di)}:{unit:"year",value:-Math.round(e/Li)};var Si=p(7602);const zh=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,V.useIntl)(),{initialData:n,isCreatingEntry:o}=(0,g.useCMEditViewDataManager)(),a=(0,r.useRef)(Date.now()),l=(u,d)=>{var f,y,m;const h=((f=n[d])==null?void 0:f.firstname)||"",b=((y=n[d])==null?void 0:y.lastname)||"",k=((m=n[d])==null?void 0:m.username)||(0,Si.Pp)(h,b),P=(n[u]?new Date(n[u]).getTime():Date.now())-a.current,{unit:L,value:v}=Zh(-P);return{at:t(v,L,{numeric:"auto"}),by:o?"-":k}},i=l("updatedAt","updatedBy"),c=l("createdAt","createdBy");return r.createElement(T.x,null,r.createElement(z.Z,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:C("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(T.x,{paddingTop:2,paddingBottom:6},r.createElement(Vr.i,null)),r.createElement(ce.K,{spacing:4},r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:C("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(z.Z,null,c.at)),r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:C("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(z.Z,null,c.by)),r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:C("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(z.Z,null,i.at)),r.createElement(Z.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:C("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(z.Z,null,i.by))))};var dn=p(29439),pn=p(22342),mn=p(96166),fn=p(88693),ht=p(66456),Wh=Object.defineProperty,xi=Object.getOwnPropertySymbols,_h=Object.prototype.hasOwnProperty,Uh=Object.prototype.propertyIsEnumerable,ki=(e,t,n)=>t in e?Wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fi=(e,t)=>{for(var n in t||(t={}))_h.call(t,n)&&ki(e,n,t[n]);if(xi)for(var n of xi(t))Uh.call(t,n)&&ki(e,n,t[n]);return e};function Hh(e,t){return n=>{const o=t();return r.createElement(e,Fi(Fi({},n),o))}}const Gh=Hh;function Kh(){const{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:a,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:f}=(0,g.useCMEditViewDataManager)();return{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:a,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:f}}const Qh=Kh,Ai=(0,F.default)(Z.k)`
  text-align: center;
`,ji=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},initialData:o,isCreatingEntry:a,isSingleType:l,hasDraftAndPublish:i,layout:c,modifiedData:u,onPublish:d,onUnpublish:f,status:y,publishConfirmation:{show:m,draftCount:h},onPublishPromptDismissal:b})=>{const{goBack:E}=(0,X.useHistory)(),[k,O]=(0,r.useState)(!1),{formatMessage:P}=(0,V.useIntl)(),L=w()(c,["settings","mainField"],"id"),v=w()(c,["info","displayName"],"NOT FOUND"),R=!sn()(o,u)||a&&!Se()(u);let M=P({id:C("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!a&&!l&&(M=o[L]||v),l&&(M=v);let H=null;if(a&&t&&(H=r.createElement(ce.K,{horizontal:!0,spacing:2},i&&r.createElement(be.z,{disabled:!0,startIcon:r.createElement(ht.Z,null),variant:"secondary"},P({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(be.z,{disabled:!R,isLoading:y==="submit-pending",type:"submit"},P({id:C("containers.Edit.submit"),defaultMessage:"Save"})))),!a&&e){const G=i&&n,j=!Se()(o.publishedAt),D=j?y==="unpublish-pending":y==="publish-pending",Q=j?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},N=j?()=>O(!0):()=>d();H=r.createElement(Z.k,null,G&&r.createElement(be.z,{disabled:R,loading:D,onClick:N,startIcon:r.createElement(ht.Z,null),variant:"secondary"},P(Q)),r.createElement(T.x,{paddingLeft:G?2:0},r.createElement(be.z,{disabled:!R,loading:y==="submit-pending",type:"submit"},P({id:C("containers.Edit.submit"),defaultMessage:"Save"}))))}const W=()=>O(G=>!G),q=()=>{W(),f()},_=`${P({id:C("api.id"),defaultMessage:"API ID "})} : ${c.apiID}`;return r.createElement(r.Fragment,null,r.createElement(re.T,{title:M.toString(),primaryAction:H,subtitle:_,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(dn.Z,null),onClick:G=>{G.preventDefault(),E()},to:"/"},P({id:"global.back",defaultMessage:"Back"}))}),r.createElement(pn.V,{onClose:W,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:k},r.createElement(mn.a,{icon:r.createElement(It.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(Z.k,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(z.Z,{id:"confirm-description"},P({id:C("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(Z.k,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(z.Z,{id:"confirm-description"},P({id:C("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(fn.c,{startAction:r.createElement(be.z,{onClick:W,variant:"tertiary"},P({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(be.z,{variant:"danger-light",onClick:q},P({id:"components.popUpWarning.button.confirm",defaultMessage:"Confirm"}))})),r.createElement(pn.V,{onClose:b,title:P({id:C("popUpWarning.warning.has-draft-relations.title"),defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:m},r.createElement(mn.a,{icon:r.createElement(It.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(Ai,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},h,P({id:C("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, one { relation is} other { relations are}}</b> not published yet and might lead to unexpected behavior."},{b:G=>r.createElement(z.Z,{fontWeight:"bold"},G),count:h}))),r.createElement(Ai,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},P({id:C("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish?"}))))),r.createElement(fn.c,{startAction:r.createElement(be.z,{onClick:b,variant:"tertiary"},P({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(be.z,{variant:"success",onClick:d},P({id:C("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Publish"}))})))};ji.propTypes={allowedActions:s().shape({canUpdate:s().bool.isRequired,canCreate:s().bool.isRequired,canPublish:s().bool.isRequired}).isRequired,initialData:s().object.isRequired,isCreatingEntry:s().bool.isRequired,isSingleType:s().bool.isRequired,status:s().string.isRequired,layout:s().object.isRequired,hasDraftAndPublish:s().bool.isRequired,modifiedData:s().object.isRequired,onPublish:s().func.isRequired,onUnpublish:s().func.isRequired,publishConfirmation:s().shape({show:s().bool.isRequired,draftCount:s().number.isRequired}).isRequired,onPublishPromptDismissal:s().func.isRequired};const Yh=(0,r.memo)(ji,Ye()),Jh=Gh(Yh,Qh),Xh=(e,t)=>{const n=l=>(0,Y.get)(t,[l,"type"],"");let o=0;const a=[];for(let l of e){const i=l.some(({name:c})=>n(c)==="dynamiczone");a[o]||(a[o]=[]),i?(o=o===0&&(0,Y.isEmpty)(a[0])?0:o+1,a[o]||(a[o]=[]),a[o].push(l),o+=1):a[o].push(l)}return a.filter(l=>l.length>0)},eb=(e,t)=>{const n=o=>{const a=(0,g.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${o}`,subject:t}]);return(0,Y.uniq)((0,Y.flatMap)(a,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}};var tb=Object.defineProperty,$i=Object.getOwnPropertySymbols,nb=Object.prototype.hasOwnProperty,rb=Object.prototype.propertyIsEnumerable,Ni=(e,t,n)=>t in e?tb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vi=(e,t)=>{for(var n in t||(t={}))nb.call(t,n)&&Ni(e,n,t[n]);if($i)for(var n of $i(t))rb.call(t,n)&&Ni(e,n,t[n]);return e};function ob(e,t){return n=>{const o=t();return r.createElement(e,Vi(Vi({},n),o))}}const sb=ob;function ab(){const{hasDraftAndPublish:e,modifiedData:t}=(0,g.useCMEditViewDataManager)();let n={};return e&&(n=(0,Y.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const ib=ab;var lb=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const qi=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:o})=>{const[a,l]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),{formatMessage:u}=(0,V.useIntl)(),d=(0,g.useNotification)(),f=()=>l(m=>!m),y=()=>lb(void 0,null,function*(){try{c(!0),yield t(o),c(!1),f(),n()}catch(m){const h=w()(m,"response.payload.message",u({id:C("error.record.delete")}));c(!1),f(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(be.z,{onClick:f,size:"S",startIcon:r.createElement(We.default,null),variant:"danger-light"},u({id:C("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(g.ConfirmDialog,{isConfirmButtonLoading:i,isOpen:a,onConfirm:y,onToggleDialog:f}))};qi.propTypes={isCreatingEntry:s().bool.isRequired,onDelete:s().func.isRequired,onDeleteSucceeded:s().func.isRequired,trackerProperty:s().object.isRequired};const cb=(0,r.memo)(qi,Ye()),ub=sb(cb,ib),Bi=de.Z.contentManager,db=[{action:"plugin::content-type-builder.read",subject:null}],Zr=({allowedActions:e,isSingleType:t,goBack:n,layout:o,slug:a,id:l,origin:i,userPermissions:c})=>{const{trackUsage:u}=(0,g.useTracking)(),{formatMessage:d}=(0,V.useIntl)(),{createActionAllowedFields:f,readActionAllowedFields:y,updateActionAllowedFields:m}=(0,r.useMemo)(()=>eb(c,a),[c,a]),h=(0,r.useMemo)(()=>t?Bi.singleTypesConfigurations:Bi.collectionTypesConfigurations,[t]),b=`/content-manager/${t?"singleType":"collectionType"}/${a}/configurations/edit`,E=w()(o,["contentType"],{}),k=(0,r.useMemo)(()=>t?Th:jy,[t]),O=(0,r.useCallback)(L=>L.every(v=>v.every(R=>R.fieldSchema.type==="dynamiczone")),[]),P=(0,r.useMemo)(()=>E.layouts?Xh(E.layouts.edit,E.attributes):[],[E]);return r.createElement(k,{allLayoutData:o,slug:a,id:l,origin:i},({componentsDataStructure:L,contentTypeDataStructure:v,data:R,isCreatingEntry:I,isLoadingForData:M,onDelete:H,onDeleteSucceeded:W,onPost:q,onPublish:_,onDraftRelationCheck:G,onPut:j,onUnpublish:D,redirectionLink:Q,status:N})=>r.createElement(vh,{allowedActions:e,allLayoutData:o,createActionAllowedFields:f,componentsDataStructure:L,contentTypeDataStructure:v,from:Q,initialValues:R,isCreatingEntry:I,isLoadingForData:M,isSingleType:t,onPost:q,onPublish:_,onDraftRelationCheck:G,onPut:j,onUnpublish:D,readActionAllowedFields:y,redirectToPreviousPage:n,slug:a,status:N,updateActionAllowedFields:m},r.createElement(he.o,{"aria-busy":N!=="resolved"},r.createElement(Jh,{allowedActions:e}),r.createElement(ft.D,null,r.createElement(ze.r,{gap:4},r.createElement(Ce.P,{col:9,s:12},r.createElement(r.Suspense,{fallback:r.createElement(g.LoadingIndicatorPage,null)},r.createElement(ce.K,{spacing:6},P.map((B,S)=>{if(O(B)){const{0:{0:{name:$,fieldSchema:A,metadatas:x,labelAction:K}}}=B;return r.createElement(T.x,{key:S},r.createElement(ze.r,{gap:4},r.createElement(Ce.P,{col:12,s:12,xs:12},r.createElement(Ly,{name:$,fieldSchema:A,labelAction:K,metadatas:x}))))}return r.createElement(T.x,{key:S,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(ce.K,{spacing:6},B.map(($,A)=>r.createElement(ze.r,{gap:4,key:A},$.map(({fieldSchema:x,labelAction:K,metadatas:J,name:ie,size:oe,queryInfos:U})=>{if(x.type==="component"){const{component:Ne,max:ye,min:Ve,repeatable:we=!1,required:Fe=!1}=x;return r.createElement(Ce.P,{col:oe,s:12,xs:12,key:Ne},r.createElement(rn,{componentUid:Ne,labelAction:K,isRepeatable:we,intlLabel:{id:J.label,defaultMessage:J.label},max:ye,min:Ve,name:ie,required:Fe}))}return r.createElement(Ce.P,{col:oe,key:ie,s:12,xs:12},r.createElement(gr,{size:oe,fieldSchema:x,keys:ie,labelAction:K,metadatas:J,queryInfos:U}))})))))})))),r.createElement(Ce.P,{col:3,s:12},r.createElement(ce.K,{spacing:2},r.createElement(Bh,null),r.createElement(T.x,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(zh,null),r.createElement(Gt,{area:"contentManager.editView.informations"})),r.createElement(T.x,{as:"aside","aria-labelledby":"links"},r.createElement(ce.K,{spacing:2},r.createElement(Gt,{area:"contentManager.editView.right-links",slug:a}),a!=="strapi::administrator"&&r.createElement(g.CheckPermissions,{permissions:db},r.createElement(g.LinkButton,{onClick:()=>{u("willEditEditLayout")},size:"S",startIcon:r.createElement(mt.Z,null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${a}`,variant:"secondary"},d({id:C("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(g.CheckPermissions,{permissions:h},r.createElement(g.LinkButton,{size:"S",startIcon:r.createElement(dd.Z,null),style:{width:"100%"},to:b,variant:"secondary"},d({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(ub,{isCreatingEntry:I,onDelete:H,onDeleteSucceeded:W}))))))))))};Zr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},Zr.propTypes={allowedActions:s().shape({canRead:s().bool.isRequired,canUpdate:s().bool.isRequired,canCreate:s().bool.isRequired,canDelete:s().bool.isRequired}).isRequired,layout:s().shape({components:s().object.isRequired,contentType:s().shape({uid:s().string.isRequired,settings:s().object.isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,attributes:s().object.isRequired}).isRequired}).isRequired,id:s().string,isSingleType:s().bool,goBack:s().func.isRequired,origin:s().string,slug:s().string.isRequired,userPermissions:s().array};const pb=(0,r.memo)(Zr);var mb=Object.defineProperty,fb=Object.defineProperties,gb=Object.getOwnPropertyDescriptors,Zi=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable,zi=(e,t,n)=>t in e?mb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bb=(e,t)=>{for(var n in t||(t={}))yb.call(t,n)&&zi(e,n,t[n]);if(Zi)for(var n of Zi(t))hb.call(t,n)&&zi(e,n,t[n]);return e},vb=(e,t)=>fb(e,gb(t));const zr=e=>{const t=(0,r.useMemo)(()=>jo(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,g.useRBAC)(t,e.userPermissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(pb,vb(bb({},e),{allowedActions:o}))};zr.defaultProps={permissions:[]},zr.propTypes={permissions:s().array,slug:s().string.isRequired,userPermissions:s().array.isRequired};const Eb=(0,r.memo)(zr,Ye());var Cb=Object.defineProperty,Pb=Object.defineProperties,Ob=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertySymbols,Wi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable,Ui=(e,t,n)=>t in e?Cb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rb=(e,t)=>{for(var n in t||(t={}))Wi.call(t,n)&&Ui(e,n,t[n]);if(gn)for(var n of gn(t))_i.call(t,n)&&Ui(e,n,t[n]);return e},wb=(e,t)=>Pb(e,Ob(t)),Mb=(e,t)=>{var n={};for(var o in e)Wi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&gn)for(var o of gn(e))t.indexOf(o)<0&&_i.call(e,o)&&(n[o]=e[o]);return n};const Hi=e=>{var t=e,{layout:n}=t,o=Mb(t,["layout"]);const a=(0,ge.useSelector)(Mo),l=(0,ge.useDispatch)(),[{query:i}]=(0,g.useQueryParams)(),{runHookWaterfall:c}=(0,g.useStrapiApp)(),u=cs(i,o.slug,"editView");return(0,r.useEffect)(()=>{const d=c(Ut.Eo,{layout:n,query:i});return l(cd(d.layout,i)),()=>{l(ld())}},[n,l,i,c]),!a||!u?r.createElement(g.LoadingIndicatorPage,null):r.createElement(Eb,wb(Rb({},o),{layout:a,userPermissions:u}))};Hi.propTypes={layout:s().shape({components:s().object.isRequired,contentType:s().shape({uid:s().string.isRequired,settings:s().object.isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,attributes:s().object.isRequired}).isRequired}).isRequired};const yn=Hi;var Tb=p(23940),Ft=p.n(Tb),Ib=p(3704),Db=p.n(Ib),Lb=Object.defineProperty,Sb=Object.defineProperties,xb=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,kb=Object.prototype.hasOwnProperty,Fb=Object.prototype.propertyIsEnumerable,Ki=(e,t,n)=>t in e?Lb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ab=(e,t)=>{for(var n in t||(t={}))kb.call(t,n)&&Ki(e,n,t[n]);if(Gi)for(var n of Gi(t))Fb.call(t,n)&&Ki(e,n,t[n]);return e},jb=(e,t)=>Sb(e,xb(t));const Wr=e=>e.reduce((t,n)=>t+n.size,0),$b=e=>e.reduce((t,n,o)=>{const a={rowId:o,rowContent:n};return t.concat(a)},[]),bt=e=>e.reduce((t,n)=>{let o=[];const a=n.rowContent.reduce((c,u)=>{const d=Wr(c);return u.name==="_TEMP_"||(d+u.size<=12?c.push(u):o.push(u)),c},[]),l=t.length===0?0:Math.max.apply(Math,t.map(c=>c.rowId))+1,i=Wr(a);if(i<12&&a.push({name:"_TEMP_",size:12-i}),t.push({rowId:l,rowContent:a}),o.length>0){const c=Wr(o);c<12&&o.push({name:"_TEMP_",size:12-c}),t.push({rowId:l+1,rowContent:o}),o=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),Nb=e=>e.reduce((t,n)=>{const o=n.rowContent.filter(a=>a.name!=="_TEMP_");return t.concat([o])},[]),Qi=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},Vb=(e,t=[])=>t.reduce((n,{rowContent:o})=>{var a,l;const i=(l=(a=o.find(c=>c.name===e))==null?void 0:a.size)!=null?l:null;return i&&(n=i),n},null),qb=(e,t,n=[])=>n.map(o=>(o.rowContent=o.rowContent.map(a=>a.name===e?jb(Ab({},a),{size:t}):a),o)),_r={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},Bb=(e=_r,t)=>(0,Wt.default)(e,n=>{var o,a,l;const i=["modifiedData","layouts","edit"];switch(t.type){case"MOVE_ROW":{const c=w()(e,i,[]),{fromIndex:u,toIndex:d}=t;ee()(n,i,Vt(c,u,d));break}case"ON_ADD_FIELD":{const c=Ze()(e),u=Qi(w()(c,["modifiedData","attributes",t.name,"type"],"")),d=w()(c,i,[]).length,f=[...i,d-1,"rowContent"],y=w()(c,f,[]);let m=w()(c,i,[]);Array.isArray(y)?ee()(m,[d>0?d-1:0,"rowContent"],[...y,{name:t.name,size:u}]):ee()(m,[d>0?d-1:0,"rowContent"],[{name:t.name,size:u}]);const h=bt(m);ee()(n,i,h);break}case"ON_CHANGE":{ee()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{ee()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{ee()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const c=w()(e,[...i,t.rowIndex,"rowContent"],[]);let u=Ze()(e);if(c.length===1||c.length===2&&w()(c,[1,"name"],"")==="_TEMP_"){const f=w()(e,i,[]);ee()(u,i,f.filter((y,m)=>t.rowIndex!==m))}else ee()(u,[...i,t.rowIndex,"rowContent"],c.filter((f,y)=>y!==t.fieldIndex));const d=bt(w()(u,i,[]));ee()(n,i,d);break}case"REORDER_DIFF_ROW":{const c=w()(e,[...i,t.dragRowIndex,"rowContent"],[]),u=w()(e,[...i,t.hoverRowIndex,"rowContent"],[]),d=w()(e,[...i,t.dragRowIndex,"rowContent",t.dragIndex],{}),f=[...u,d];let y=Ze()(e);ee()(y,[...i,t.dragRowIndex,"rowContent"],c.filter((h,b)=>t.dragIndex!==b)),ee()(y,[...i,t.hoverRowIndex,"rowContent"],Vt(f,f.length-1,t.hoverIndex));const m=bt(w()(y,i,[]));ee()(n,i,m);break}case"REORDER_ROW":{const c=Ze()(e),u=w()(c,[...i,t.dragRowIndex,"rowContent"],[]);ee()(c,[...i,t.dragRowIndex,"rowContent"],Vt(u,t.dragIndex,t.hoverIndex));const d=bt(w()(c,i,[]));ee()(n,i,d);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:w()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(l=Vb(t.name,(a=(o=e.modifiedData)==null?void 0:o.layouts)==null?void 0:a.edit))!=null?l:Qi()};break}case"SUBMIT_META_FORM":{ee()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const c=Ze()(w()(e,i,[])),u=qb(e.metaToEdit,e.metaForm.size,c);u.length>0&&ee()(n,i,bt(u));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var Zb=Object.defineProperty,zb=Object.defineProperties,Wb=Object.getOwnPropertyDescriptors,Yi=Object.getOwnPropertySymbols,_b=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,Ji=(e,t,n)=>t in e?Zb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hb=(e,t)=>{for(var n in t||(t={}))_b.call(t,n)&&Ji(e,n,t[n]);if(Yi)for(var n of Yi(t))Ub.call(t,n)&&Ji(e,n,t[n]);return e},Gb=(e,t)=>zb(e,Wb(t));const Kb=(e,t,n)=>{let o=(0,Y.cloneDeep)(t);return(0,Y.set)(o,["layouts","edit"],bt($b(t.layouts.edit))),Gb(Hb({},e),{initialData:o,modifiedData:o,componentLayouts:n})};var Ue=p(34853),Xi=p(45112);const el=({componentUid:e})=>{const{componentLayouts:t}=ot(),{formatMessage:n}=(0,V.useIntl)(),o=w()(t,[e],{}),a=w()(o,["layouts","edit"],[]);return r.createElement(T.x,{padding:3},a.map((l,i)=>r.createElement(ze.r,{gap:4,key:i},l.map(c=>r.createElement(Ce.P,{key:c.name,col:c.size},r.createElement(T.x,{paddingTop:2},r.createElement(Z.k,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(z.Z,{textColor:"neutral800"},c.name))))))),r.createElement(T.x,{paddingTop:2},r.createElement(g.Link,{startIcon:r.createElement(Xi.Z,null),to:`/content-manager/components/${e}/configurations/edit`},n({id:C("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};el.propTypes={componentUid:s().string.isRequired};const Qb=el,tl=(0,F.default)(Z.k)`
  border-radius: 50%;
  svg {
    & > * {
      fill: ${({theme:e})=>e.colors.neutral500};
    }
    width: 12px;
    height: 12px;
  }
`,Yb=(0,F.default)(Z.k)`
  text-decoration: none;
  &:hover {
    ${({theme:e})=>`
      background: ${e.colors.primary100};
      svg {
        & > * {
          fill: ${e.colors.primary600};
        }
      }
      ${z.Z} {
          color: ${e.colors.primary600};
      }
      ${tl} {
        background: ${e.colors.primary200};
      }
      border-color: ${e.colors.primary200};
    `}
  }
`,nl=({components:e})=>{const{componentLayouts:t}=ot();return r.createElement(ce.K,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>r.createElement(Yb,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:X.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(tl,{width:`${32/16}rem`,height:`${32/16}rem`,background:"neutral150",justifyContent:"center",alignItems:"center",padding:2},r.createElement(Fn.G,{icon:w()(t,[n,"info","icon"],"")})),r.createElement(T.x,{paddingTop:1},r.createElement(z.Z,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},w()(t,[n,"info","displayName"],""))))))};nl.propTypes={components:s().arrayOf(s().string).isRequired};const Jb=nl,rl=(0,F.default)(Re.h)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Ur=({attribute:e,onEditField:t,onDeleteField:n,children:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(T.x,{overflow:"hidden",width:"100%"},r.createElement(Z.k,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},o),r.createElement(Z.k,null,r.createElement(rl,{label:a({id:C("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:o}),onClick:t,icon:r.createElement(mt.Z,null),noBorder:!0}),r.createElement(rl,{label:a({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:o}),"data-testid":"delete-field",onClick:n,icon:r.createElement(We.default,null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement(Qb,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(Jb,{components:e.components}))};Ur.defaultProps={attribute:void 0},Ur.propTypes={attribute:s().shape({components:s().array,component:s().string,type:s().string}),onEditField:s().func.isRequired,onDeleteField:s().func.isRequired,children:s().string.isRequired};const Xb=Ur,e0=(0,F.default)(Z.k)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,t0=(0,F.default)(pt.Z)`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,n0=(0,F.default)(Z.k)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,r0=(0,F.default)(Z.k)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Hr=({attribute:e,children:t,index:n,lastIndex:o,moveItem:a,moveRow:l,name:i,onDeleteField:c,onEditField:u,rowIndex:d,size:f})=>{const[y,m]=(0,r.useState)(!1),h=i==="_TEMP_",{setIsDraggingSibling:b}=ot(),E=f===12,k=(0,r.useRef)(null),O=(0,r.useRef)(null),[{clientOffset:P,isOver:L},v]=(0,je.useDrop)({accept:Le.EDIT_FIELD,hover(N,B){if(!O.current||N.size!==12)return;const S=B.getItem().index,$=n,A=B.getItem().rowIndex,x=d;if(S===$&&A===x)return;const K=O.current.getBoundingClientRect(),J=(K.bottom-K.top)/2,oe=B.getClientOffset().y-K.top;A<x&&oe<J||A>x&&oe>J||(l(A,x),N.rowIndex=x,N.itemIndex=$)},drop(N,B){if(!O.current)return;const S=B.getItem().index,$=n,A=B.getItem().rowIndex,x=d;if(N.size===12||S===$&&A===x)return;const K=O.current.getBoundingClientRect();if(Math.abs(B.getClientOffset().x-K.left)>K.width/1.8){a(S,$+1,A,x),N.itemIndex=$+1,N.rowIndex=x;return}a(S,$,A,x),N.itemIndex=$,N.rowIndex=x},collect:N=>({canDrop:N.canDrop(),clientOffset:N.getClientOffset(),isOver:N.isOver(),isOverCurrent:N.isOver({shallow:!0}),itemType:N.getItemType()})}),[{isDragging:R,getItem:I},M,H]=(0,je.useDrag)({type:Le.EDIT_FIELD,item(){return b(!0),{index:n,labelField:t,rowIndex:d,name:i,size:f}},canDrag(){return i!=="_TEMP_"},collect:N=>({isDragging:N.isDragging(),getItem:N.getItem()}),end(){b(!1)}});(0,r.useEffect)(()=>{H((0,hr.rX)(),{captureDraggingState:!0})},[H]);const W={dragRef:M(k),dropRef:v(O)};let q=!1,_=!1;if(O.current&&P){const N=O.current.getBoundingClientRect();q=L&&I.size!==12&&Math.abs(P.x-N.left)<N.width/2,_=L&&I.size!==12&&Math.abs(P.x-N.left)>N.width/2,i==="_TEMP_"&&(q=L&&I.size!==12,_=!1)}const G=()=>e&&E?`${74/16}rem`:`${32/16}rem`,j=n===0&&!E,D=n===o&&!E,Q=n!==0&&!E;return r.createElement(Ce.P,{col:f},r.createElement(e0,{ref:W.dropRef,showLeftCarret:q,showRightCarret:_,isFirst:j,isLast:D,hasHorizontalPadding:Q,onDrag:()=>{E&&!y&&m(!0)},onDragEnd:()=>{E&&m(!1)}},y&&E&&r.createElement(T.x,{width:"100%",height:"2px",background:"primary600"}),r.createElement(n0,{width:E&&y?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:G(),alignItems:"stretch",isDragging:R,dragStart:y,isFullSize:E,isHidden:h},r.createElement(r0,{as:"span",type:"button",ref:W.dragRef,onClick:N=>N.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(t0,null)),!h&&r.createElement(Xb,{attribute:e,onEditField:u,onDeleteField:c},t))))};Hr.defaultProps={attribute:void 0},Hr.propTypes={attribute:s().shape({components:s().array,component:s().string,type:s().string}),children:s().string.isRequired,index:s().number.isRequired,moveItem:s().func.isRequired,moveRow:s().func.isRequired,name:s().string.isRequired,onDeleteField:s().func.isRequired,onEditField:s().func.isRequired,rowIndex:s().number.isRequired,lastIndex:s().number.isRequired,size:s().number.isRequired};const o0=Hr,ol=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:o,index:a,lastIndex:l})=>{const{setEditFieldToSelect:i,attributes:c,modifiedData:u,moveRow:d,moveItem:f}=ot(),y=w()(c,[e.name],{}),m=w()(u,["metadatas",e.name,"edit","label"],"");return r.createElement(o0,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,a),attribute:y,index:a,lastIndex:l,rowIndex:o,name:e.name,size:e.size,moveRow:d,moveItem:f},m||e.name)};ol.propTypes={index:s().number.isRequired,lastIndex:s().number.isRequired,onRemoveField:s().func.isRequired,rowId:s().number.isRequired,rowIndex:s().number.isRequired,rowItem:s().object.isRequired};const s0=ol,sl=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(ze.r,null,e.rowContent.map((o,a)=>r.createElement(s0,{key:o.name,rowItem:o,index:a,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));sl.propTypes={onRemoveField:s().func.isRequired,row:s().object.isRequired,rowIndex:s().number.isRequired};const a0=sl,i0=[{action:"plugin::content-type-builder.read",subject:null}],l0=()=>{const{trackUsage:e}=(0,g.useTracking)(),{formatMessage:t}=(0,V.useIntl)(),{slug:n,modifiedData:o,isContentTypeView:a}=ot(),l=a?"content-types":"components",i=`/plugins/content-type-builder/${l==="content-types"?l:"component-categories"}`,c=w()(o,"category",""),u=l==="content-types"?n:`${c}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(g.CheckPermissions,{permissions:i0},r.createElement(g.LinkButton,{to:`${i}/${u}`,onClick:d,size:"S",startIcon:r.createElement(mt.Z,null),variant:"secondary"},t({id:C(`edit-settings-view.link-to-ctb.${l}`),defaultMessage:"Edit the content type"})))},al=({editLayout:e,fields:t,onRemoveField:n,onAddField:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(ce.K,{spacing:4},r.createElement(Z.k,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(T.x,null,r.createElement(z.Z,{fontWeight:"bold"},a({id:C("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(T.x,null,r.createElement(z.Z,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(l0,null)),r.createElement(T.x,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(ce.K,{spacing:2},e.map((l,i)=>r.createElement(a0,{key:l.rowId,row:l,rowIndex:i,onRemoveField:n})),r.createElement(Ue.O,{id:"label",label:a({id:C("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:be.z,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(St.default,null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(l=>r.createElement(Ue.s,{key:l,onClick:()=>o(l)},l))))))};al.propTypes={editLayout:s().array.isRequired,fields:s().array.isRequired,onAddField:s().func.isRequired,onRemoveField:s().func.isRequired};const c0=al;var il=p(85025),ll=p(55225),cl=p(31600),ul=p(11406),hn=p(88675),u0=p(73779),d0=p(22348),dl=p(7184),Gr=p(43475),p0=p(82512),Kr=p(83218),m0=p(17757),At=p(32031),f0=p(872),g0=p(1176),y0=p(15431);const pl={biginteger:r.createElement(At.Z,null),boolean:r.createElement(u0.Z,null),date:r.createElement(hn.Z,null),datetime:r.createElement(hn.Z,null),decimal:r.createElement(At.Z,null),email:r.createElement(d0.Z,null),enum:r.createElement(dl.Z,null),enumeration:r.createElement(dl.Z,null),file:r.createElement(Gr.Z,null),files:r.createElement(Gr.Z,null),float:r.createElement(At.Z,null),integer:r.createElement(At.Z,null),media:r.createElement(Gr.Z,null),number:r.createElement(At.Z,null),relation:r.createElement(p0.Z,null),string:r.createElement(Kr.Z,null),text:r.createElement(Kr.Z,null),richtext:r.createElement(Kr.Z,null),time:r.createElement(hn.Z,null),timestamp:r.createElement(hn.Z,null),json:r.createElement(f0.Z,null),uid:r.createElement(m0.Z,null),component:r.createElement(g0.Z,null),dynamiczone:r.createElement(y0.Z,null)},Qr=({type:e,customFieldUid:t})=>{const n=(0,g.useCustomFields)();let o=pl[e];if(t){const l=n.get(t).icon;l&&(o=r.createElement(T.x,{marginRight:3,width:7,height:6},r.createElement(l,null)))}return pl[e]?o:null};Qr.defaultProps={customFieldUid:null},Qr.propTypes={type:s().string.isRequired,customFieldUid:s().string};const ml=Qr,h0=e=>e.reduce((t,n)=>{const o=(0,Y.get)(n,["attributes"],{}),a=Object.keys(o).filter(l=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,Y.get)(o,[l,"type"],"")));return t[n.uid]=a,t},{}),fl=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=C(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var jt=p(9139),b0=Object.defineProperty,bn=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable,hl=(e,t,n)=>t in e?b0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yr=(e,t)=>{for(var n in t||(t={}))gl.call(t,n)&&hl(e,n,t[n]);if(bn)for(var n of bn(t))yl.call(t,n)&&hl(e,n,t[n]);return e},v0=(e,t)=>{var n={};for(var o in e)gl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&bn)for(var o of bn(e))t.indexOf(o)<0&&yl.call(e,o)&&(n[o]=e[o]);return n};const Jr=e=>{var t=e,{type:n,options:o,onChange:a,value:l,name:i}=t,c=v0(t,["type","options","onChange","value","name"]);const{formatMessage:u}=(0,V.useIntl)();switch(n){case"text":return r.createElement(Jn.o,Yr({onChange:a,value:l,name:i},c));case"bool":return r.createElement(jt.s,Yr({onChange:d=>{a({target:{name:i,value:d.target.checked}})},checked:l,name:i,onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},c));case"select":return r.createElement(_e.P,Yr({value:l,name:i,onChange:d=>a({target:{name:i,value:d}})},c),o.map(d=>r.createElement(Pe.W,{key:d,value:d},d)));default:return null}};Jr.defaultProps={options:void 0},Jr.propTypes={type:s().string.isRequired,options:s().arrayOf(s().string),onChange:s().func.isRequired,value:s().oneOfType([s().string,s().bool]).isRequired,name:s().string.isRequired};const E0=Jr,C0=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],P0=["dynamiczone","component","json","richtext"],O0=[1,5,10,15,30,60],R0=["datetime","time"],bl=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{modifiedData:o,selectedField:a,attributes:l,fieldForm:i}=ot(),c=(0,r.useMemo)(kn,[]),{schemas:u}=(0,ge.useSelector)(O=>c(O),ge.shallowEqual),d=(0,r.useMemo)(()=>{if(!a)return[];const O=w()(o,["metadatas",a,"edit"],{});return Object.keys(O).filter(P=>P!=="visible")},[a,o]),f=(0,r.useMemo)(()=>h0(u),[u]),y=(0,r.useCallback)(O=>{if(O!=="relation"&&O!=="component")return[];const P=O==="component"?"component":"targetModel",L=w()(o,["attributes",a,P],"");return w()(f,[L],[])},[a,f,o]),m=d.map(O=>{const P=w()(l,[a,"type"]);return["component","dynamiczone"].includes(P)&&!["label","description"].includes(O)||P==="component"&&O!=="label"||["media","json","boolean"].includes(P)&&O==="placeholder"||O==="step"?null:r.createElement(Ce.P,{col:6,key:O},r.createElement(E0,{type:fl(O).type,hint:O==="mainField"?n({id:C("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:w()(fl(O),"label.id","app.utils.defaultMessage")}),name:O,onChange:e,value:w()(i,["metadata",O],""),options:y(P)}))}),h=!P0.includes(l[a].type),b=r.createElement(Ce.P,{col:6,key:"size"},r.createElement(_e.P,{value:i==null?void 0:i.size,name:"size",onChange:O=>{t({name:a,value:O})},label:n({id:C("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},C0.map(([O,P])=>r.createElement(Pe.W,{key:O,value:O},P)))),E=R0.includes(l[a].type),k=r.createElement(Ce.P,{col:6,key:"step"},r.createElement(_e.P,{value:w()(i,["metadata","step"],1),name:"step",onChange:O=>e({target:{name:"step",value:O}}),label:n({id:C("containers.SettingPage.editSettings.step.label"),defaultMessage:"Time interval (minutes)"})},O0.map(O=>r.createElement(Pe.W,{key:O,value:O},O))));return r.createElement(r.Fragment,null,m,h&&b,E&&k)};bl.propTypes={onMetaChange:s().func.isRequired,onSizeChange:s().func.isRequired};const w0=bl,M0=(0,F.default)(Z.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Xr=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:o,type:a,customFieldUid:l})=>{const{selectedField:i}=ot(),{formatMessage:c}=(0,V.useIntl)(),u=()=>a==="timestamp"?"date":["decimal","float","integer","biginter"].includes(a)?"number":a;return r.createElement(il.P,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:o},r.createElement(ll.x,null,r.createElement(M0,null,r.createElement(ml,{type:u(),customFieldUid:l}),r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:C("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Ft()(i)})))),r.createElement(cl.f,null,r.createElement(ze.r,{gap:4},r.createElement(w0,{onMetaChange:t,onSizeChange:n}))),r.createElement(ul.m,{startActions:r.createElement(be.z,{onClick:e,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(be.z,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};Xr.defaultProps={customFieldUid:null},Xr.propTypes={customFieldUid:s().string,onSubmit:s().func.isRequired,onToggle:s().func.isRequired,onMetaChange:s().func.isRequired,onSizeChange:s().func.isRequired,type:s().string.isRequired};const T0=Xr,I0=(e,t,n)=>me.be.put(fe(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),eo=({mainLayout:e,components:t,isContentTypeView:n,slug:o,updateLayout:a})=>{const[l,i]=(0,r.useReducer)(Bb,_r,()=>Kb(_r,e,t)),[c,u]=(0,r.useState)(!1),{trackUsage:d}=(0,g.useTracking)(),f=(0,g.useNotification)(),{goBack:y}=(0,X.useHistory)(),[m,h]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),{componentLayouts:k,initialData:O,modifiedData:P,metaToEdit:L,metaForm:v}=l,{formatMessage:R}=(0,V.useIntl)(),I=w()(e,["info","displayName"],""),M=w()(P,["attributes"],{}),H=Object.keys(M).filter(U=>{const se=w()(M,[U,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(se)&&!!se}),W=w()(P,["layouts","edit"],[]),q=Db()(W,"rowContent"),_=Object.keys(P.attributes).filter(U=>w()(P,["metadatas",U,"edit","visible"],!1)===!0).filter(U=>q.findIndex(se=>se.name===U)===-1).sort(),G=({target:{name:U,value:se}})=>{i({type:"ON_CHANGE",keys:U.split("."),value:se})},j=()=>{h(U=>!U)},D=()=>{E(U=>!U)},Q=({target:{name:U,value:se}})=>{i({type:"ON_CHANGE_META",keys:U.split("."),value:se})},N=({name:U,value:se})=>{i({type:"ON_CHANGE_SIZE",name:U,value:se})},B=U=>{U.preventDefault(),i({type:"SUBMIT_META_FORM"}),j()},S=U=>{U.preventDefault(),D()},$=(0,at.useMutation)(U=>I0(U,o,n),{onSuccess({data:U}){a&&a(U.data),i({type:"SUBMIT_SUCCEEDED"}),D(),d("didEditEditSettings")},onError(){f({type:"warning",message:{id:"notification.error"}})}}),{isLoading:A}=$,x=()=>{const U=nr()(Ze()(P),["layouts","metadatas","settings"]);ee()(U,"layouts.edit",Nb(U.layouts.edit)),$.mutate(U)},K=(U,se)=>{i({type:"MOVE_RELATION",fromIndex:U,toIndex:se})},J=(U,se)=>{i({type:"MOVE_FIELD",fromIndex:U,toIndex:se})},ie=(U,se,Ne,ye)=>{i(Ne===ye?{type:"REORDER_ROW",dragRowIndex:Ne,dragIndex:U,hoverIndex:se}:{type:"REORDER_DIFF_ROW",dragIndex:U,hoverIndex:se,dragRowIndex:Ne,hoverRowIndex:ye})},oe=(U,se)=>{i({type:"MOVE_ROW",fromIndex:U,toIndex:se})};return r.createElement(Be,{isContentTypeView:n,attributes:M,modifiedData:P,slug:o,componentLayouts:k,selectedField:L,fieldForm:v,onMoveRelation:K,onMoveField:J,moveRow:oe,moveItem:ie,setEditFieldToSelect:U=>{i({type:"SET_FIELD_TO_EDIT",name:U}),j()},isDraggingSibling:c,setIsDraggingSibling:u},r.createElement(he.o,null,r.createElement("form",{onSubmit:S},r.createElement(re.T,{title:R({id:C("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${Ft()(I)}`},{name:Ft()(I)}),subtitle:R({id:C("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(g.Link,{startIcon:r.createElement(dn.Z,null),onClick:U=>{U.preventDefault(),y()},to:"/"},R({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(be.z,{disabled:sn()(O,P),startIcon:r.createElement(ht.Z,null),type:"submit"},R({id:"global.save",defaultMessage:"Save"}))}),r.createElement(ft.D,null,r.createElement(T.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(ce.K,{spacing:4},r.createElement(z.Z,{variant:"delta",as:"h2"},R({id:C("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(ze.r,null,r.createElement(Ce.P,{col:6,s:12},r.createElement(_e.P,{label:R({id:C("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:R({id:C("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:U=>{G({target:{name:"settings.mainField",value:U===""?null:U}})},value:P.settings.mainField},H.map(U=>r.createElement(Pe.W,{key:U,value:U},U))))),r.createElement(T.x,{paddingTop:2,paddingBottom:2},r.createElement(Vr.i,null)),r.createElement(z.Z,{variant:"delta",as:"h3"},R({id:C("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(c0,{attributes:M,editLayout:W,fields:_,onAddField:U=>{i({type:"ON_ADD_FIELD",name:U})},onRemoveField:(U,se)=>{i({type:"REMOVE_FIELD",rowIndex:U,fieldIndex:se})}})))),r.createElement(g.ConfirmDialog,{bodyText:{id:C("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht.Z,null),isConfirmButtonLoading:A,isOpen:b,onToggleDialog:D,onConfirm:x,variantRightButton:"success-light"})),m&&r.createElement(T0,{onSubmit:B,onToggle:j,onMetaChange:Q,onSizeChange:N,type:w()(M,[L,"type"],""),customFieldUid:w()(M,[L,"customField"],"")})))};eo.defaultProps={isContentTypeView:!1,updateLayout:null},eo.propTypes={components:s().object.isRequired,isContentTypeView:s().bool,mainLayout:s().shape({attributes:s().object.isRequired,info:s().object.isRequired,layouts:s().shape({list:s().array.isRequired,edit:s().array.isRequired}).isRequired,metadatas:s().object.isRequired,options:s().object.isRequired}).isRequired,slug:s().string.isRequired,updateLayout:s().func};const to=eo;var vt=p(37617);const D0=()=>({type:vt.ZA}),L0=(e,t)=>({type:vt.Id,pagination:e,data:t}),S0=()=>({type:vt.MP});function x0(){return{type:vt.c2}}const k0=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:vt.Zz}},no=e=>({type:vt.Rp,target:e});var vl=p(13055),El=p(99223),ro=p(94638),F0=p(70664);const A0=()=>e=>e["content-manager_listView"]||F0.E,j0=()=>(0,xn.P1)(A0(),e=>e),Cl=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},$0=j0;var N0=p(44426),V0=p(35658),q0=p(94547),oo=p(19786),B0=p(47765),Z0=p(69033),z0=Object.defineProperty,vn=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Rl=(e,t,n)=>t in e?z0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W0=(e,t)=>{for(var n in t||(t={}))Pl.call(t,n)&&Rl(e,n,t[n]);if(vn)for(var n of vn(t))Ol.call(t,n)&&Rl(e,n,t[n]);return e},_0=(e,t)=>{var n={};for(var o in e)Pl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&vn)for(var o of vn(e))t.indexOf(o)<0&&Ol.call(e,o)&&(n[o]=e[o]);return n};const U0=(0,F.default)(Z.k)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,wl=e=>{var t=e,{children:n}=t,o=_0(t,["children"]);return r.createElement(U0,W0({justifyContent:"center",alignItems:"center",as:"span"},o),r.createElement(z.Z,{variant:"sigma",textColor:"neutral600"},n))};wl.propTypes={children:s().string.isRequired};const Ml=wl,so=({url:e,mime:t,alternativeText:n,name:o,ext:a,formats:l})=>{var i;const c=(0,g.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const f=((i=l==null?void 0:l.thumbnail)==null?void 0:i.url)||null,y=(0,g.prefixFileUrlWithBackendUrl)(f)||c;return r.createElement(Z0.q,{src:y,alt:n||o,preview:!0})}const u=(0,g.getFileExtension)(a),d=o.length>100?`${o.substring(0,100)}...`:o;return r.createElement(Dt.u,{description:d},r.createElement(Ml,null,u))};so.defaultProps={alternativeText:null,formats:null},so.propTypes={alternativeText:s().string,ext:s().string.isRequired,formats:s().object,mime:s().string.isRequired,name:s().string.isRequired,url:s().string.isRequired};const Tl=so;var H0=p(25898),G0=Object.defineProperty,Il=Object.getOwnPropertySymbols,K0=Object.prototype.hasOwnProperty,Q0=Object.prototype.propertyIsEnumerable,Dl=(e,t,n)=>t in e?G0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y0=(e,t)=>{for(var n in t||(t={}))K0.call(t,n)&&Dl(e,n,t[n]);if(Il)for(var n of Il(t))Q0.call(t,n)&&Dl(e,n,t[n]);return e};const Ll=({value:e})=>r.createElement(H0.H,null,e.map((t,n)=>{const o=`${t.id}${n}`;if(n===3){const a=`+${e.length-3}`;return r.createElement(Ml,{key:o,preview:!1},a)}return n>3?null:r.createElement(Tl,Y0({key:o},t))}));Ll.propTypes={value:s().arrayOf(s().shape({alternativeText:s().string,ext:s().string.isRequired,formats:s().object,mime:s().string.isRequired,name:s().string.isRequired,url:s().string.isRequired})).isRequired};const J0=Ll;var Sl=p(6518),X0=p(97405),ev=p(51064),tv=p.n(ev);const xl=({type:e,value:t})=>{const{formatDate:n,formatTime:o,formatNumber:a}=(0,V.useIntl)();let l=t;if(e==="date"&&(l=n(tv()(t),{dateStyle:"full"})),e==="datetime"&&(l=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,c,u]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(c),d.setSeconds(u),l=o(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(l=a(t,{maximumFractionDigits:20})),["integer","biginteger"].includes(e)&&(l=a(t,{maximumFractionDigits:0})),Ba()(l)};xl.propTypes={type:s().string.isRequired,value:s().any.isRequired};const Et=xl;var nv=Object.defineProperty,kl=Object.getOwnPropertySymbols,rv=Object.prototype.hasOwnProperty,ov=Object.prototype.propertyIsEnumerable,Fl=(e,t,n)=>t in e?nv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sv=(e,t)=>{for(var n in t||(t={}))rv.call(t,n)&&Fl(e,n,t[n]);if(kl)for(var n of kl(t))ov.call(t,n)&&Fl(e,n,t[n]);return e},av=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const iv=(0,F.default)(z.Z)`
  max-width: 500px;
`,lv=(e,t)=>av(void 0,null,function*(){const{data:{results:n,pagination:o}}=yield me.be.get(e);return t(),{results:n,pagination:o}}),Al=({fieldSchema:e,metadatas:t,name:n,entityId:o,value:a,contentType:l})=>{const{formatMessage:i}=(0,V.useIntl)(),{notifyStatus:c}=(0,ro.G)(),u=(0,r.useMemo)(()=>fe(`relations/${l.uid}/${o}/${n.split(".")[0]}`),[o,n,l]),[d,f]=(0,r.useState)(!1),y=r.createElement(Z.k,{gap:1,wrap:"nowrap"},r.createElement(Sl.C,null,a.count),i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:a.count})),m=()=>{const E=i({id:C("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});c(E)},{data:h,status:b}=(0,at.useQuery)([e.targetModel,o],()=>lv(u,m),{enabled:d,staleTime:0});return r.createElement(T.x,sv({},g.stopPropagation),r.createElement(Ue.O,{label:y,size:"S",onOpen:()=>f(!0),onClose:()=>f(!1)},b!=="success"&&r.createElement(Ue.s,{"aria-disabled":!0},r.createElement(X0.a,{small:!0},i({id:C("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),b==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(E=>r.createElement(Ue.s,{key:E.id,"aria-disabled":!0},r.createElement(iv,{ellipsis:!0},r.createElement(Et,{type:t.mainField.schema.type,value:E[t.mainField.name]||E.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(Ue.s,{"aria-disabled":!0,"aria-label":i({id:C("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(z.Z,null,"\u2026")))))};Al.propTypes={contentType:s().shape({uid:s().string.isRequired}).isRequired,fieldSchema:s().shape({relation:s().string,targetModel:s().string,type:s().string.isRequired}).isRequired,metadatas:s().shape({mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired})}).isRequired,name:s().string.isRequired,entityId:s().oneOfType([s().string,s().number]).isRequired,value:s().object.isRequired};const cv=Al,uv=(0,F.default)(z.Z)`
  max-width: 500px;
`,jl=({metadatas:e,value:t})=>{var n;return r.createElement(uv,{textColor:"neutral800",ellipsis:!0},r.createElement(Et,{type:e.mainField.schema.type,value:(n=t[e.mainField.name])!=null?n:t.id}))};jl.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired})}).isRequired,value:s().object.isRequired};const dv=jl;var pv=Object.defineProperty,$l=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,fv=Object.prototype.propertyIsEnumerable,Nl=(e,t,n)=>t in e?pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gv=(e,t)=>{for(var n in t||(t={}))mv.call(t,n)&&Nl(e,n,t[n]);if($l)for(var n of $l(t))fv.call(t,n)&&Nl(e,n,t[n]);return e};const yv=(0,F.default)(z.Z)`
  max-width: 500px;
`,Vl=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{mainField:{type:o,name:a}}=t,l=r.createElement(r.Fragment,null,r.createElement(Sl.C,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(T.x,gv({},g.stopPropagation),r.createElement(Ue.O,{label:l,size:"S"},e.map(i=>r.createElement(Ue.s,{key:i.id,"aria-disabled":!0},r.createElement(yv,{ellipsis:!0},r.createElement(Et,{type:o,value:i[a]||i.id}))))))};Vl.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string,type:s().string,value:s().string})}).isRequired,value:s().array.isRequired};const hv=Vl,bv=(0,F.default)(z.Z)`
  max-width: 250px;
`,ql=({value:e,metadatas:t})=>{const{mainField:n}=t,o=e[n.name];return r.createElement(Dt.u,{label:o},r.createElement(bv,{textColor:"neutral800",ellipsis:!0},r.createElement(Et,{type:n.type,value:o})))};ql.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string,type:s().string,value:s().string})}).isRequired,value:s().object.isRequired};const vv=ql;var Ev=p(80022),Bl=p.n(Ev);function Zl(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function Cv(e,t,n,o){if(e==="component"){const{mainField:{name:a,type:l}}=n;if(o!=null&&o.repeatable)return t.length>0;const i=t==null?void 0:t[a];return a==="id"&&![void 0,null].includes(i)?!0:xt(l)&&l!=="biginteger"&&a!=="id"?Bl()(i):!Se()(i)}return e==="relation"?Zl(o.relation)?!Se()(t):(t==null?void 0:t.count)>0:xt(e)&&e!=="biginteger"?Bl()(t):e==="boolean"?t!==null:!Se()(t)}var Pv=Object.defineProperty,zl=Object.getOwnPropertySymbols,Ov=Object.prototype.hasOwnProperty,Rv=Object.prototype.propertyIsEnumerable,Wl=(e,t,n)=>t in e?Pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wv=(e,t)=>{for(var n in t||(t={}))Ov.call(t,n)&&Wl(e,n,t[n]);if(zl)for(var n of zl(t))Rv.call(t,n)&&Wl(e,n,t[n]);return e};const _l=(0,F.default)(z.Z)`
  max-width: 300px;
`,ao=({content:e,fieldSchema:t,metadatas:n,name:o,rowId:a,contentType:l})=>{const{type:i}=t;if(!Cv(i,e,n,t))return r.createElement(z.Z,{textColor:"neutral800"},"-");switch(i){case"media":return t.multiple?r.createElement(J0,{value:e}):r.createElement(Tl,wv({},e));case"relation":return Zl(t.relation)?r.createElement(dv,{metadatas:n,value:e}):r.createElement(cv,{fieldSchema:t,metadatas:n,value:e,name:o,entityId:a,contentType:l});case"component":return t.repeatable===!0?r.createElement(hv,{value:e,metadatas:n}):r.createElement(vv,{value:e,metadatas:n});case"string":return r.createElement(Dt.u,{description:e},r.createElement(_l,{ellipsis:!0,textColor:"neutral800"},r.createElement(Et,{type:i,value:e})));default:return r.createElement(_l,{ellipsis:!0,textColor:"neutral800"},r.createElement(Et,{type:i,value:e}))}};ao.defaultProps={content:void 0},ao.propTypes={content:s().any,contentType:s().shape({uid:s().string.isRequired}).isRequired,fieldSchema:s().shape({component:s().string,multiple:s().bool,type:s().string.isRequired,repeatable:s().bool,relation:s().string}).isRequired,metadatas:s().object.isRequired,name:s().string.isRequired,rowId:s().oneOfType([s().string,s().number]).isRequired};const Mv=ao;var Tv=Object.defineProperty,Iv=Object.defineProperties,Dv=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertySymbols,Ul=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Gl=(e,t,n)=>t in e?Tv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$t=(e,t)=>{for(var n in t||(t={}))Ul.call(t,n)&&Gl(e,n,t[n]);if(En)for(var n of En(t))Hl.call(t,n)&&Gl(e,n,t[n]);return e},Lv=(e,t)=>Iv(e,Dv(t)),Sv=(e,t)=>{var n={};for(var o in e)Ul.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&En)for(var o of En(e))t.indexOf(o)<0&&Hl.call(e,o)&&(n[o]=e[o]);return n};const io=({canCreate:e,canDelete:t,contentType:n,headers:o,entriesToDelete:a,onClickDelete:l,onSelectRow:i,withMainAction:c,withBulkActions:u,rows:d})=>{const{push:f,location:{pathname:y}}=(0,X.useHistory)(),{formatMessage:m}=(0,V.useIntl)(),{trackUsage:h}=(0,g.useTracking)(),b=is();return r.createElement(V0.p,null,d.map((E,k)=>{const O=a.findIndex(L=>L===E.id)!==-1,P=m({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:k});return r.createElement(q0.Tr,$t({key:E.id},(0,g.onRowClick)({fn(){h("willEditEntryFromList"),f({pathname:`${y}/${E.id}`,state:{from:y},search:b})},condition:u})),c&&r.createElement(oo.Td,$t({},g.stopPropagation),r.createElement(N0.C,{"aria-label":m({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,Si.Pp)(E.firstname,E.lastname)}),checked:O,onChange:()=>{i({name:E.id,value:!O})}})),o.map(L=>{var v=L,{key:R,cellFormatter:I,name:M}=v,H=Sv(v,["key","cellFormatter","name"]);return r.createElement(oo.Td,{key:R},typeof I=="function"?I(E,$t({key:R,name:M},H)):r.createElement(Mv,Lv($t({content:E[M.split(".")[0]],name:M,contentType:n},H),{rowId:E.id})))}),u&&r.createElement(oo.Td,null,r.createElement(Z.k,$t({justifyContent:"end"},g.stopPropagation),r.createElement(Re.h,{forwardedAs:X.Link,onClick:()=>{h("willEditEntryFromButton")},to:{pathname:`${y}/${E.id}`,state:{from:y},search:b},label:m({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:P}),noBorder:!0,icon:r.createElement(mt.Z,null)}),e&&r.createElement(T.x,{paddingLeft:1},r.createElement(Re.h,{forwardedAs:X.Link,to:{pathname:`${y}/create/clone/${E.id}`,state:{from:y},search:b},label:m({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:P}),noBorder:!0,icon:r.createElement(B0.Z,null)})),t&&r.createElement(T.x,{paddingLeft:1},r.createElement(Re.h,{onClick:()=>{h("willDeleteEntryFromList"),l(E.id)},label:m({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:P}),noBorder:!0,icon:r.createElement(We.default,null)})))))}))};io.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete(){},onSelectRow(){},rows:[],withBulkActions:!1,withMainAction:!1},io.propTypes={canCreate:s().bool,canDelete:s().bool,contentType:s().shape({uid:s().string.isRequired}).isRequired,entriesToDelete:s().array,headers:s().array.isRequired,onClickDelete:s().func,onSelectRow:s().func,rows:s().array,withBulkActions:s().bool,withMainAction:s().bool};const xv=io;var kv=Object.defineProperty,Cn=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Ql=Object.prototype.propertyIsEnumerable,Yl=(e,t,n)=>t in e?kv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fv=(e,t)=>{for(var n in t||(t={}))Kl.call(t,n)&&Yl(e,n,t[n]);if(Cn)for(var n of Cn(t))Ql.call(t,n)&&Yl(e,n,t[n]);return e},Av=(e,t)=>{var n={};for(var o in e)Kl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Cn)for(var o of Cn(e))t.indexOf(o)<0&&Ql.call(e,o)&&(n[o]=e[o]);return n};const Jl=e=>{var t=e,{area:n}=t,o=Av(t,["area"]);const a=ds(n);return a?r.createElement("ul",null,a.map(l=>l.Component(o)?r.createElement(T.x,{key:l.name,padding:3,style:{textAlign:"center"}},r.createElement(l.Component,Fv({},o))):null)):null};Jl.propTypes={area:s().string.isRequired};const Xl=Jl,ec=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(pn.V,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(mn.a,{icon:r.createElement(It.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(Z.k,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},a({id:C("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(Z.k,null,r.createElement(Xl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(fn.c,{startAction:r.createElement(be.z,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(be.z,{onClick:o,variant:"danger-light",startIcon:r.createElement(We.default,null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};ec.propTypes={isConfirmButtonLoading:s().bool.isRequired,isOpen:s().bool.isRequired,onConfirm:s().func.isRequired,onToggleDialog:s().func.isRequired};const jv=ec,tc=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(pn.V,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(mn.a,{icon:r.createElement(It.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(Z.k,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},a({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(Z.k,null,r.createElement(Xl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(fn.c,{startAction:r.createElement(be.z,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(be.z,{onClick:o,variant:"danger-light",startIcon:r.createElement(We.default,null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};tc.propTypes={isConfirmButtonLoading:s().bool.isRequired,isOpen:s().bool.isRequired,onConfirm:s().func.isRequired,onToggleDialog:s().func.isRequired};const $v=tc;var Nv=Object.defineProperty,Vv=Object.defineProperties,qv=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,Bv=Object.prototype.hasOwnProperty,Zv=Object.prototype.propertyIsEnumerable,rc=(e,t,n)=>t in e?Nv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pn=(e,t)=>{for(var n in t||(t={}))Bv.call(t,n)&&rc(e,n,t[n]);if(nc)for(var n of nc(t))Zv.call(t,n)&&rc(e,n,t[n]);return e},On=(e,t)=>Vv(e,qv(t));const zv=(0,F.default)(ta.q)`
  width: min-content;
`,lo=({canCreate:e,canDelete:t,contentTypeName:n,action:o,isBulkable:a,isLoading:l,onConfirmDelete:i,onConfirmDeleteAll:c,layout:u,rows:d})=>{const{runHookWaterfall:f}=(0,g.useStrapiApp)(),y=u.contentType.options.draftAndPublish||!1,{formatMessage:m}=(0,V.useIntl)(),h=(0,ge.useSelector)(Cl),b=(0,r.useMemo)(()=>{const k=f(Ut.No,{displayedHeaders:h,layout:u}).displayedHeaders.map(O=>{const{metadatas:P}=O;if(O.fieldSchema.type==="relation"){const L=`${O.name}.${O.metadatas.mainField.name}`;return On(Pn({},O),{metadatas:On(Pn({},P),{label:m({id:C(`containers.ListPage.table-headers.${O.name}`),defaultMessage:P.label})}),name:L})}return On(Pn({},O),{metadatas:On(Pn({},P),{label:m({id:C(`containers.ListPage.table-headers.${O.name}`),defaultMessage:P.label})})})});return y?[...k,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:m({id:C("containers.ListPage.table-headers.publishedAt"),defaultMessage:"publishedAt"}),searchable:!1,sortable:!0},cellFormatter(O){const P=O.publishedAt,L=P?"success":"secondary";return r.createElement(zv,{showBullet:!1,variant:L,size:"S"},r.createElement(z.Z,{fontWeight:"bold",textColor:`${L}700`},m({id:C(`containers.List.${P?"published":"draft"}`),defaultMessage:P?"Published":"Draft"})))}}]:k},[f,h,u,y,m]);return r.createElement(g.DynamicTable,{components:{ConfirmDialogDelete:$v,ConfirmDialogDeleteAll:jv},contentType:n,action:o,isLoading:l,headers:b,onConfirmDelete:i,onConfirmDeleteAll:c,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&a},r.createElement(xv,{canCreate:e,canDelete:t,contentType:u.contentType,headers:b,rows:d,withBulkActions:!0,withMainAction:t&&a}))};lo.defaultProps={action:void 0},lo.propTypes={canCreate:s().bool.isRequired,canDelete:s().bool.isRequired,contentTypeName:s().string.isRequired,action:s().node,isBulkable:s().bool.isRequired,isLoading:s().bool.isRequired,layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired,onConfirmDelete:s().func.isRequired,onConfirmDeleteAll:s().func.isRequired,rows:s().array.isRequired};const Wv=lo,_v=["json","component","media","richtext","dynamiczone","password"],Uv=["createdAt","updatedAt"],Hv=(e,t)=>{const{allPermissions:n}=(0,g.useRBACProvider)(),o=(0,g.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),a=w()(o,["0","properties","fields"],[]);return Object.keys(w()(e,["attributes"]),{}).filter(c=>{const u=w()(e,["attributes",c],{});return!(!u.type||_v.includes(u.type)||!a.includes(c)&&c!=="id"&&!Uv.includes(c))}).sort()};var Gv=p(5644);const oc=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:o}=(0,V.useIntl)(),a=(0,r.useRef)(),{trackUsage:l}=(0,g.useTracking)(),i=()=>{t||l("willFilterEntries"),n(c=>!c)};return r.createElement(r.Fragment,null,r.createElement(T.x,{paddingTop:1,paddingBottom:1},r.createElement(be.z,{variant:"tertiary",ref:a,startIcon:r.createElement(Gv.Z,null),onClick:i,size:"S"},o({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(g.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:a})),r.createElement(g.FilterListURLQuery,{filtersSchema:e}))};oc.propTypes={displayedFilters:s().arrayOf(s().shape({name:s().string.isRequired,metadatas:s().shape({label:s().string}),fieldSchema:s().shape({type:s().string})})).isRequired};const Kv=oc,sc=({contentType:e,slug:t,metadatas:n})=>{const{formatMessage:o}=(0,V.useIntl)(),l=Hv(e,t).map(i=>{const c=e.attributes[i],{type:u,enum:d}=c,f={name:"didFilterEntries",properties:{useRelation:u==="relation"}},{mainField:y,label:m}=n[i].list;return{name:i,metadatas:{label:o({id:m,defaultMessage:m})},fieldSchema:{type:u,options:d,mainField:y},trackedEvent:f}});return r.createElement(Kv,{displayedFilters:l})};sc.propTypes={contentType:s().object.isRequired,metadatas:s().object.isRequired,slug:s().string.isRequired};const Qv=sc,Yv=e=>Object.keys(e).reduce((n,o)=>{const a=e[o];return Do(a)&&n.push(o),n},[]).sort(),ac=({layout:e})=>{const t=(0,ge.useDispatch)(),n=(0,ge.useSelector)(Cl),{trackUsage:o}=(0,g.useTracking)(),{formatMessage:a}=(0,V.useIntl)(),l=Yv(e.contentType.attributes).map(u=>{const d=e.contentType.metadatas[u].list;return{name:u,intlLabel:{id:d.label,defaultMessage:d.label}}}),i=n.map(({name:u})=>u),c=u=>{if(o("didChangeDisplayedFields"),u.length<i.length){const d=i.filter(f=>u.indexOf(f)===-1);t(no({name:d[0],value:!0}))}else{const d=u.filter(f=>i.indexOf(f)===-1);t(no({name:d[0],value:!1}))}};return r.createElement(T.x,{paddingTop:1,paddingBottom:1},r.createElement(_e.P,{"aria-label":"change displayed fields",value:i,onChange:c,customizeContent:u=>a({id:C("select.currently.selected"),defaultMessage:"{count} currently selected"},{count:u.length}),multi:!0,size:"S"},l.map(u=>r.createElement(Pe.W,{key:u.name,value:u.name},a({id:u.intlLabel.id||u.name,defaultMessage:u.intlLabel.defaultMessage||u.name})))))};ac.propTypes={layout:s().shape({contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired};const Jv=(0,r.memo)(ac),co=({pagination:e})=>r.createElement(T.x,{paddingTop:4},r.createElement(Z.k,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(g.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(g.PaginationURLQuery,{pagination:e})));co.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},co.propTypes={pagination:s().shape({page:s().number,pageCount:s().number,pageSize:s().number,total:s().number})};const Xv=co;var eE=p(98399),tE=Object.defineProperty,nE=Object.defineProperties,rE=Object.getOwnPropertyDescriptors,ic=Object.getOwnPropertySymbols,oE=Object.prototype.hasOwnProperty,sE=Object.prototype.propertyIsEnumerable,lc=(e,t,n)=>t in e?tE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aE=(e,t)=>{for(var n in t||(t={}))oE.call(t,n)&&lc(e,n,t[n]);if(ic)for(var n of ic(t))sE.call(t,n)&&lc(e,n,t[n]);return e},iE=(e,t)=>nE(e,rE(t)),uo=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const lE=de.Z.contentManager,cE=(0,F.default)(T.x)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function cc({canCreate:e,canDelete:t,canRead:n,data:o,getData:a,getDataSucceeded:l,isLoading:i,layout:c,pagination:u,slug:d}){const{total:f}=u,{contentType:{metadatas:y,settings:{bulkable:m,filterable:h,searchable:b}}}=c,E=(0,g.useNotification)(),{trackUsage:k}=(0,g.useTracking)(),{refetchPermissions:O}=(0,g.useRBACProvider)(),P=(0,r.useRef)(k),L=(0,r.useRef)(O),{notifyStatus:v}=(0,ro.G)();(0,g.useFocusWhenNavigate)();const[{query:R}]=(0,g.useQueryParams)(),I=vi(R),M=(0,Ge.stringify)({plugins:R.plugins},{encode:!1}),{pathname:H}=(0,X.useLocation)(),{push:W}=(0,X.useHistory)(),{formatMessage:q}=(0,V.useIntl)(),_=c.contentType,G=w()(_,"options.draftAndPublish",!1),j=(0,r.useRef)(""),D=(0,r.useCallback)((x,K)=>uo(this,null,function*(){a();try{const J=K?{cancelToken:K.token}:null,{data:{results:ie,pagination:oe}}=yield me.be.get(x,J);v(q({id:C("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:oe.count})),l(oe,ie)}catch(J){if($e().isCancel(J))return;if(w()(J,"response.status",null)===403){yield L.current(),E({type:"info",message:{id:C("permissions.not-allowed.update")}}),W("/");return}eE.error(J),E({type:"warning",message:{id:C("error.model.fetch")}})}}),[q,a,l,v,W,E]),Q=(0,r.useCallback)(x=>uo(this,null,function*(){try{yield me.be.post(fe(`collection-types/${d}/actions/bulkDelete`),{ids:x});const K=fe(`collection-types/${d}${I}`);D(K),P.current("didBulkDeleteEntries")}catch(K){E({type:"warning",message:{id:C("error.record.delete")}})}}),[D,I,d,E]),N=(0,r.useCallback)(x=>uo(this,null,function*(){try{yield me.be.delete(fe(`collection-types/${d}/${x}`));const K=fe(`collection-types/${d}${I}`);D(K),E({type:"success",message:{id:C("success.record.delete")}})}catch(K){const J=w()(K,"response.payload.message",q({id:C("error.record.delete")}));E({type:"warning",message:J})}}),[d,I,D,E,q]);(0,r.useEffect)(()=>{const K=$e().CancelToken.source(),J=n,ie=fe(`collection-types/${d}${I}`);return J&&ie.includes(j.current)&&D(ie,K),()=>{j.current=d,K.cancel("Operation canceled by the user.")}},[n,a,d,I,l,D]);const B=q({id:C("header.name"),defaultMessage:"Content"}),S=q({id:_.info.displayName,defaultMessage:_.info.displayName||B}),$=n?q({id:C("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:f}):null,A=x=>e?r.createElement(be.z,iE(aE({},x),{forwardedAs:X.Link,onClick:()=>{const K=G?{status:"draft"}:{};P.current("willCreateEntry",K)},to:{pathname:`${H}/create`,search:R.plugins?M:""},startIcon:r.createElement(St.default,null),style:{textDecoration:"none"}}),q({id:C("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(he.o,{"aria-busy":i},r.createElement(re.T,{primaryAction:A(),subtitle:$,title:S,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(dn.Z,null),to:"/content-manager/"},q({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(El.Z,{endActions:r.createElement(Gt,{area:"contentManager.listView.actions"})}),n&&r.createElement(El.Z,{endActions:r.createElement(r.Fragment,null,r.createElement(Gt,{area:"contentManager.listView.actions"}),r.createElement(Jv,{layout:c}),r.createElement(g.CheckPermissions,{permissions:lE.collectionTypesConfigurations},r.createElement(cE,{paddingTop:1,paddingBottom:1},r.createElement(Re.h,{onClick:()=>{k("willEditListLayout")},forwardedAs:X.Link,to:{pathname:`${d}/configurations/list`,search:M},icon:r.createElement(Xi.Z,null),label:q({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,b&&r.createElement(g.SearchURLQuery,{label:q({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:S}),placeholder:q({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),h&&r.createElement(Qv,{contentType:_,slug:d,metadatas:y}))}),r.createElement(ft.D,null,n?r.createElement(r.Fragment,null,r.createElement(Wv,{canCreate:e,canDelete:t,contentTypeName:S,onConfirmDeleteAll:Q,onConfirmDelete:N,isBulkable:m,isLoading:i,layout:c,rows:o,action:A({variant:"secondary"})}),r.createElement(Xv,{pagination:{pageCount:(u==null?void 0:u.pageCount)||1}})):r.createElement(g.NoPermissions,null)))}cc.propTypes={canCreate:s().bool.isRequired,canDelete:s().bool.isRequired,canRead:s().bool.isRequired,data:s().array.isRequired,layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,info:s().shape({displayName:s().string.isRequired}).isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired,isLoading:s().bool.isRequired,getData:s().func.isRequired,getDataSucceeded:s().func.isRequired,pagination:s().shape({total:s().number.isRequired,pageCount:s().number}).isRequired,slug:s().string.isRequired};const uE=$0();function dE(e){return(0,vl.bindActionCreators)({getData:D0,getDataSucceeded:L0,onChangeListHeaders:no,onResetListHeaders:S0},e)}const pE=(0,ge.connect)(uE,dE),mE=(0,vl.compose)(pE)((0,r.memo)(cc,Ye()));var fE=Object.defineProperty,uc=Object.getOwnPropertySymbols,gE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable,dc=(e,t,n)=>t in e?fE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pc=(e,t)=>{for(var n in t||(t={}))gE.call(t,n)&&dc(e,n,t[n]);if(uc)for(var n of uc(t))yE.call(t,n)&&dc(e,n,t[n]);return e};const po=e=>{const t=(0,r.useMemo)(()=>jo(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,g.useRBAC)(t,e.permissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(mE,pc(pc({},e),o))};po.defaultProps={permissions:[]},po.propTypes={permissions:s().array,slug:s().string.isRequired};const hE=(0,r.memo)(po,(e,t)=>{const n=(0,g.difference)(e,t);return Object.keys(n).filter(a=>a!=="state").length>0});var bE=Object.defineProperty,vE=Object.defineProperties,EE=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,mc=Object.prototype.hasOwnProperty,fc=Object.prototype.propertyIsEnumerable,gc=(e,t,n)=>t in e?bE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CE=(e,t)=>{for(var n in t||(t={}))mc.call(t,n)&&gc(e,n,t[n]);if(Rn)for(var n of Rn(t))fc.call(t,n)&&gc(e,n,t[n]);return e},PE=(e,t)=>vE(e,EE(t)),OE=(e,t)=>{var n={};for(var o in e)mc.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Rn)for(var o of Rn(e))t.indexOf(o)<0&&fc.call(e,o)&&(n[o]=e[o]);return n};const yc=e=>{var t=e,{layout:n}=t,o=OE(t,["layout"]);const a=(0,ge.useDispatch)(),{replace:l}=(0,X.useHistory)(),[{query:i,rawQuery:c}]=(0,g.useQueryParams)(),u=cs(i,o.slug,"listView"),d=as(o.slug);return(0,r.useEffect)(()=>{c||l(d)},[c,l,d]),(0,r.useEffect)(()=>{a(k0(n))},[a,n]),(0,r.useEffect)(()=>()=>{a(x0())},[a]),u?r.createElement(hE,PE(CE({},o),{layout:n,permissions:u})):null};yc.propTypes={layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired,pluginOptions:s().object}).isRequired}).isRequired,slug:s().string.isRequired};const RE=yc,wE=(e,t)=>me.be.put(fe(`content-types/${t}/configuration`),e),mo=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:o}=(0,V.useIntl)(),{settings:a,metadatas:l}=e;return r.createElement(ce.K,{spacing:4},r.createElement(z.Z,{variant:"delta",as:"h2"},o({id:C("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(ce.K,{horizontal:!0,justifyContent:"space-between",spacing:4},r.createElement(T.x,{width:"100%"},r.createElement(jt.s,{label:o({id:C("form.Input.search"),defaultMessage:"Enable search"}),onChange:i=>{t({target:{name:"settings.searchable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:a.searchable})),r.createElement(T.x,{width:"100%"},r.createElement(jt.s,{label:o({id:C("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:i=>{t({target:{name:"settings.filterable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:a.filterable})),r.createElement(T.x,{width:"100%"},r.createElement(jt.s,{label:o({id:C("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:i=>{t({target:{name:"settings.bulkable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:a.bulkable}))),r.createElement(ze.r,{gap:4},r.createElement(Ce.P,{s:12,col:6},r.createElement(_e.P,{label:o({id:C("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:o({id:C("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:i=>t({target:{name:"settings.pageSize",value:i}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(i=>r.createElement(Pe.W,{key:i,value:i},i)))),r.createElement(Ce.P,{s:12,col:3},r.createElement(_e.P,{label:o({id:C("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:i=>t({target:{name:"settings.defaultSortBy",value:i}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(i=>r.createElement(Pe.W,{key:i,value:i},l[i].list.label||i)))),r.createElement(Ce.P,{s:12,col:3},r.createElement(_e.P,{label:o({id:C("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:i=>t({target:{name:"settings.defaultSortOrder",value:i}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(i=>r.createElement(Pe.W,{key:i,value:i},i))))))};mo.defaultProps={modifiedData:{},sortOptions:[]},mo.propTypes={modifiedData:s().object,onChange:s().func.isRequired,sortOptions:s().array};const ME=mo,fo=F.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,hc=(0,F.default)(fo)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,TE=(0,F.default)(Z.k)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${hc} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,IE=(0,F.default)(T.x)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,bc=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:o,onMoveField:a,onRemoveField:l,name:i,setIsDraggingSibling:c})=>{const{formatMessage:u}=(0,V.useIntl)(),d=(0,r.useRef)(null),f=(0,r.useRef)(null),[,y]=(0,r.useState)(!1),m=(0,r.useRef)(),h=Po(n),b=()=>{m.current&&m.current.click()},[,E]=(0,je.useDrop)({accept:Le.FIELD,hover(v,R){if(!f.current)return;const I=v.index,M=e;if(I===M)return;const H=f.current.getBoundingClientRect(),W=(H.right-H.left)/2,_=R.getClientOffset().x-H.left;I>M&&_>W||I<M&&_<W||(a(I,M),v.index=M)}}),[{isDragging:k},O,P]=(0,je.useDrag)({type:Le.FIELD,item(){return{index:e,labelField:n,name:i}},collect:v=>({isDragging:v.isDragging()}),end(){c(!1)}});(0,r.useEffect)(()=>{P((0,hr.rX)(),{captureDraggingState:!1})},[P]),(0,r.useEffect)(()=>{k&&c(!0)},[k,c]),(0,r.useEffect)(()=>{t||y(v=>!v)},[t]);const L={dragRef:O(d),dropRef:E(f)};return r.createElement(IE,{ref:L?L.dropRef:null},k&&r.createElement(Dn,{transparent:!0,labelField:h}),!k&&t&&r.createElement(Dn,{isSibling:!0,labelField:h}),!k&&!t&&r.createElement(TE,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:b,isDragging:k},r.createElement(ce.K,{horizontal:!0,spacing:3},r.createElement(hc,{as:"span","aria-label":u({id:C("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:n}),onClick:v=>v.stopPropagation(),ref:L.dragRef,type:"button"},r.createElement(pt.Z,null)),r.createElement(z.Z,{fontWeight:"bold"},h)),r.createElement(Z.k,{paddingLeft:3},r.createElement(fo,{ref:m,onClick:v=>{v.stopPropagation(),o(i)},"aria-label":u({id:C("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:n}),type:"button"},r.createElement(mt.Z,null)),r.createElement(fo,{onClick:l,"data-testid":`delete-${i}`,"aria-label":u({id:C("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:n}),type:"button"},r.createElement(Mn.default,null)))))};bc.propTypes={index:s().number.isRequired,isDraggingSibling:s().bool.isRequired,labelField:s().string.isRequired,name:s().string.isRequired,onClickEditField:s().func.isRequired,onMoveField:s().func.isRequired,onRemoveField:s().func.isRequired,setIsDraggingSibling:s().func.isRequired};const DE=bc,vc=(0,F.default)(T.x)`
  flex: ${({size:e})=>e};
`,LE=(0,F.default)(vc)`
  overflow-x: scroll;
  overflow-y: hidden;
`,SE=(0,F.default)(vc)`
  max-width: ${32/16}rem;
`,Ec=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:o,onClickEditField:a,onMoveField:l,onRemoveField:i})=>{const{formatMessage:c}=(0,V.useIntl)(),[u,d]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),m=(0,r.useRef)();function h(...E){y("add"),o(...E)}function b(...E){y("remove"),i(...E)}return(0,r.useEffect)(()=>{f==="add"&&(m==null?void 0:m.current)&&(m.current.scrollLeft=m.current.scrollWidth)},[e,f]),r.createElement(r.Fragment,null,r.createElement(T.x,{paddingBottom:4},r.createElement(z.Z,{variant:"delta",as:"h2"},c({id:C("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(Z.k,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(LE,{size:"1",paddingBottom:4,ref:m},r.createElement(ce.K,{horizontal:!0,spacing:3},e.map((E,k)=>r.createElement(DE,{key:E,index:k,isDraggingSibling:u,onMoveField:l,onClickEditField:a,onRemoveField:O=>b(O,k),name:E,labelField:n[E].list.label||E,setIsDraggingSibling:d})))),r.createElement(SE,{size:"auto",paddingBottom:4},r.createElement(Ue.O,{label:c({id:C("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Re.h,icon:r.createElement(St.default,null),disabled:t.length<=0,"data-testid":"add-field"},t.map(E=>r.createElement(Ue.s,{key:E,onClick:()=>h(E)},n[E].list.label||E))))))};Ec.propTypes={displayedFields:xe.PropTypes.array.isRequired,listRemainingFields:xe.PropTypes.array.isRequired,metadatas:xe.PropTypes.objectOf(xe.PropTypes.shape({list:xe.PropTypes.shape({label:xe.PropTypes.string})})).isRequired,onAddField:xe.PropTypes.func.isRequired,onClickEditField:xe.PropTypes.func.isRequired,onMoveField:xe.PropTypes.func.isRequired,onRemoveField:xe.PropTypes.func.isRequired};const xE=Ec,kE=(0,F.default)(Z.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Cc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:o,onChangeEditLabel:a,onSubmit:l,type:i})=>{const{formatMessage:c}=(0,V.useIntl)(),u=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(u)&&(d=!0),r.createElement(il.P,{onClose:o,labelledBy:"title"},r.createElement("form",{onSubmit:l},r.createElement(ll.x,null,r.createElement(kE,null,r.createElement(ml,{type:i}),r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:C("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Ft()(n)})))),r.createElement(cl.f,null,r.createElement(ze.r,{gap:4},r.createElement(Ce.P,{s:12,col:6},r.createElement(Jn.o,{id:"label-input",label:c({id:C("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:f=>a(f),value:t.label,hint:c({id:C("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(Ce.P,{s:12,col:6},r.createElement(jt.s,{"data-testid":"Enable sort on this field",checked:t.sortable,label:c({id:C("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:f=>a({target:{name:"sortable",value:f.target.checked}}),onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(ul.m,{startActions:r.createElement(be.z,{onClick:o,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(be.z,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};Cc.propTypes={attributes:s().objectOf(s().shape({relationType:s().string})).isRequired,fieldForm:s().shape({label:s().string,sortable:s().bool}).isRequired,fieldToEdit:s().string.isRequired,onChangeEditLabel:s().func.isRequired,onCloseModal:s().func.isRequired,onSubmit:s().func.isRequired,type:s().string.isRequired};const FE=Cc;var AE=Object.defineProperty,jE=Object.defineProperties,$E=Object.getOwnPropertyDescriptors,Pc=Object.getOwnPropertySymbols,NE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable,Oc=(e,t,n)=>t in e?AE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qE=(e,t)=>{for(var n in t||(t={}))NE.call(t,n)&&Oc(e,n,t[n]);if(Pc)for(var n of Pc(t))VE.call(t,n)&&Oc(e,n,t[n]);return e},BE=(e,t)=>jE(e,$E(t));const ZE=(e,t)=>BE(qE({},e),{initialData:t,modifiedData:t}),go={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},zE=(e=go,t)=>(0,Wt.default)(e,n=>{const o=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const a=w()(e,o,[]);ee()(n,o,[...a,t.item]);break}case"MOVE_FIELD":{const a=w()(e,o,[]),{originalIndex:l,atIndex:i}=t;ee()(n,o,Vt(a,l,i));break}case"ON_CHANGE":{ee()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{ee()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const a=w()(e,o,[]);ee()(n,o,a.filter((l,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:a}=t;n.fieldToEdit=a,n.fieldForm.label=w()(n,["modifiedData","metadatas",a,"list","label"],""),n.fieldForm.sortable=w()(n,["modifiedData","metadatas",a,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const a=["modifiedData","metadatas",e.fieldToEdit,"list"];ee()(n,[...a,"label"],e.fieldForm.label),ee()(n,[...a,"sortable"],e.fieldForm.sortable);break}default:return n}}),WE=["media","richtext","dynamiczone","relation","component","json"];var _E=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Rc=({layout:e,slug:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{trackUsage:o}=(0,g.useTracking)(),a=is(),l=(0,g.useNotification)(),{refetchData:i}=(0,r.useContext)(Ro),[c,u]=(0,r.useState)(!1),d=()=>u(A=>!A),[f,y]=(0,r.useState)(!1),m=()=>y(A=>!A),[h,b]=(0,r.useReducer)(zE,go,()=>ZE(go,e)),{fieldToEdit:E,fieldForm:k,initialData:O,modifiedData:P}=h,{attributes:L}=e,v=P.layouts.list,R=()=>{const{settings:{pageSize:A,defaultSortBy:x,defaultSortOrder:K},kind:J,uid:ie}=O,oe=`${x}:${K}`,U=`${(0,Ge.stringify)({page:1,pageSize:A,sort:oe},{encode:!1})}${a?`&${a}`:""}`;return`/content-manager/${J}/${ie}?${U}`},I=({target:{name:A,value:x}})=>{b({type:"ON_CHANGE",keys:A,value:A==="settings.pageSize"?parseInt(x,10):x})},M=()=>_E(void 0,null,function*(){const A=nr()(P,["layouts","settings","metadatas"]);D.mutate(A)}),H=A=>{b({type:"ADD_FIELD",item:A})},W=(A,x)=>{A.stopPropagation(),v.length===1?l({type:"info",message:{id:C("notification.info.minimumFields")}}):b({type:"REMOVE_FIELD",index:x})},q=A=>{A.preventDefault(),d(),o("willSaveContentTypeLayout")},_=A=>{b({type:"SET_FIELD_TO_EDIT",fieldToEdit:A}),m()},G=()=>{b({type:"UNSET_FIELD_TO_EDIT"}),m()},j=A=>{A.preventDefault(),m(),b({type:"SUBMIT_FIELD_FORM"})},D=(0,at.useMutation)(A=>wE(A,t),{onSuccess(){o("didEditListSettings"),i()},onError(){l({type:"warning",message:{id:"notification.error"}})}}),{isLoading:Q}=D,N=({target:{name:A,value:x}})=>{b({type:"ON_CHANGE_FIELD_METAS",name:A,value:x})},B=Object.entries(L).reduce((A,x)=>{const[K,J]=x,ie=Do(J),oe=v.includes(K);return ie&&!oe&&A.push(K),A},[]).sort(),S=Object.entries(L).reduce((A,x)=>{const[K,{type:J}]=x;return WE.includes(J)||A.push(K),A},[]),$=(A,x)=>{b({type:"MOVE_FIELD",originalIndex:A,atIndex:x})};return r.createElement(ue.A,null,r.createElement(he.o,{"aria-busy":Q},r.createElement("form",{onSubmit:q},r.createElement(re.T,{navigationAction:r.createElement(g.Link,{startIcon:r.createElement(dn.Z,null),to:R,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(be.z,{size:"S",startIcon:r.createElement(ht.Z,null),disabled:sn()(P,O),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:C("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:C("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:Ft()(P.info.displayName)})}),r.createElement(ft.D,null,r.createElement(T.x,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(ME,{modifiedData:P,onChange:I,sortOptions:S}),r.createElement(T.x,{paddingTop:6,paddingBottom:6},r.createElement(Vr.i,null)),r.createElement(xE,{listRemainingFields:B,displayedFields:v,onAddField:H,onClickEditField:_,onMoveField:$,onRemoveField:W,metadatas:P.metadatas}))),r.createElement(g.ConfirmDialog,{bodyText:{id:C("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht.Z,null),isConfirmButtonLoading:Q,isOpen:c,onToggleDialog:d,onConfirm:M,variantRightButton:"success-light"})),f&&r.createElement(FE,{attributes:L,fieldForm:k,fieldToEdit:E,onChangeEditLabel:N,onCloseModal:G,onSubmit:j,type:w()(L,[E,"type"],"text")})))};Rc.propTypes={layout:s().shape({uid:s().string.isRequired,settings:s().shape({bulkable:s().bool,defaultSortBy:s().string,defaultSortOrder:s().string,filterable:s().bool,pageSize:s().number,searchable:s().bool}).isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,attributes:s().objectOf(s().shape({type:s().string})).isRequired}).isRequired,slug:s().string.isRequired};const UE=(0,r.memo)(Rc),wc=de.Z.contentManager,Mc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:a}=ts(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let f={},y={};return o.contentType&&(f=Zt(o.contentType)),o.components&&(y=Object.keys(o.components).reduce((m,h)=>(m[h]=Zt(o.components[h]),m),{})),{rawContentTypeLayout:f,rawComponentsLayouts:y}},[o]);if((0,Y.get)(o,["contentType","uid"],null)!==e||n)return r.createElement(g.LoadingIndicatorPage,null);const u=({location:{state:f},history:{goBack:y},match:{params:{id:m,origin:h}}},b)=>r.createElement(b,{slug:e,layout:o,state:f,goBack:y,id:m,origin:h}),d=[{path:"create/clone/:origin",comp:yn},{path:"create",comp:yn},{path:":id",comp:yn},{path:"",comp:RE}].map(({path:f,comp:y})=>r.createElement(X.Route,{key:f,path:`${t}/${f}`,render:m=>u(m,y)}));return r.createElement(Gc.ErrorBoundary,{FallbackComponent:g.ErrorFallback},r.createElement(wo.Provider,{value:o},r.createElement(X.Switch,null,r.createElement(X.Route,{path:`${t}/configurations/list`},r.createElement(g.CheckPagePermissions,{permissions:wc.collectionTypesConfigurations},r.createElement(UE,{layout:l,slug:e,updateLayout:a}))),r.createElement(X.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:wc.collectionTypesConfigurations},r.createElement(to,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),d)))};Mc.propTypes={match:s().shape({url:s().string.isRequired,params:s().shape({slug:s().string.isRequired}).isRequired}).isRequired};const HE=(0,r.memo)(Mc);var Tc=p(57678),GE=p(98399),KE=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const QE=de.Z.contentManager,YE=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(Tc.Z,Tc.q),o=(0,r.useMemo)(kn,[]),{schemas:a}=(0,ge.useSelector)(i=>o(i),ge.shallowEqual),{uid:l}=(0,X.useParams)();return(0,r.useEffect)(()=>{const c=$e().CancelToken.source();return(d=>KE(void 0,null,function*(){try{n(on());const{data:{data:f}}=yield me.be.get(fe(`components/${l}/configuration`),{cancelToken:d.token});n(xr(Bo(f,a,"component")))}catch(f){if($e().isCancel(f))return;GE.error(f)}}))(c),()=>{c.cancel("Operation canceled by the user.")}},[l,a]),e?r.createElement(g.LoadingIndicatorPage,null):r.createElement(g.CheckPagePermissions,{permissions:QE.componentsConfigurations},r.createElement(to,{components:t.components,mainLayout:t.component,slug:l}))},JE=(0,r.memo)(YE);var XE=p(9695),eC=p(54725);const tC=()=>{const{formatMessage:e}=(0,V.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(he.o,null,r.createElement(re.T,{title:e({id:C("header.name"),defaultMessage:"Content"})}),r.createElement(ft.D,null,r.createElement(XE.x,{action:r.createElement(g.LinkButton,{variant:"secondary",startIcon:r.createElement(St.default,null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(eC.default,{width:"10rem"}),shadow:"tableShadow"})))},nC=()=>{const{formatMessage:e}=(0,V.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(he.o,null,r.createElement(re.T,{title:e({id:C("header.name"),defaultMessage:"Content"})}),r.createElement(ft.D,null,r.createElement(g.NoPermissions,null)))},rC=de.Z.contentManager,Ic=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:a}=ts(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let c={},u={};return o.contentType&&(u=Zt(o.contentType)),o.components&&(c=Object.keys(o.components).reduce((d,f)=>(d[f]=Zt(o.components[f]),d),{})),{rawContentTypeLayout:u,rawComponentsLayouts:c}},[o]);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(wo.Provider,{value:o},r.createElement(X.Switch,null,r.createElement(X.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:rC.singleTypesConfigurations},r.createElement(to,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),r.createElement(X.Route,{path:t,render:({location:{state:c},history:{goBack:u}})=>r.createElement(yn,{layout:o,slug:e,isSingleType:!0,state:c,goBack:u})})))};Ic.propTypes={match:s().shape({url:s().string.isRequired,params:s().shape({slug:s().string.isRequired}).isRequired}).isRequired};const oC=(0,r.memo)(Ic);var sC=p(58469),aC=p(59578),Dc=p.n(aC),iC=p(90700),lC=p(8598),cC=p(77013),uC=p(79318),dC=p(66618),pC=Object.defineProperty,mC=Object.defineProperties,fC=Object.getOwnPropertyDescriptors,Lc=Object.getOwnPropertySymbols,gC=Object.prototype.hasOwnProperty,yC=Object.prototype.propertyIsEnumerable,Sc=(e,t,n)=>t in e?pC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hC=(e,t)=>{for(var n in t||(t={}))gC.call(t,n)&&Sc(e,n,t[n]);if(Lc)for(var n of Lc(t))yC.call(t,n)&&Sc(e,n,t[n]);return e},bC=(e,t)=>mC(e,fC(t));const xc=(e,t)=>(0,sC.ZP)(e,Dc()(t),{keys:[n=>Dc()(n.title)]}),vC=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,V.useIntl)(),o=(0,r.useMemo)(zu,[]),{collectionTypeLinks:a,singleTypeLinks:l}=(0,ge.useSelector)(h=>o(h),ge.shallowEqual),i=h=>h.map(b=>bC(hC({},b),{title:n({id:b.title,defaultMessage:b.title})})),c=i(a),u=i(l),d=[{id:"collectionTypes",title:{id:C("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:Ae()(xc(c,e),h=>h.title.toLowerCase())},{id:"singleTypes",title:{id:C("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:Ae()(xc(u,e),h=>h.title.toLowerCase())}],f=()=>{t("")},y=({target:{value:h}})=>{t(h)},m=n({id:C("header.name"),defaultMessage:"Content"});return r.createElement(iC.m,{ariaLabel:m},r.createElement(lC.p,{label:m,searchable:!0,value:e,onChange:y,onClear:f,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(cC.Z,null,d.map(h=>{const b=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(uC.D,{key:h.id,label:b,badgeLabel:h.links.length.toString()},h.links.map(E=>{const k=E.search?`?${E.search}`:"";return r.createElement(dC.E,{as:X.NavLink,key:E.uid,to:`${E.to}${k}`},E.title)}))})))};var yo=p(92886);const EC=()=>({type:yo.ZA}),CC=()=>({type:yo.c2}),PC=(e,t,n,o)=>({type:yo.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:o,contentTypeSchemas:n}}),kc=(e,t,n=[])=>e.filter(o=>o.isDisplayed).map(o=>{const a=[{action:"plugin::content-manager.explorer.create",subject:o.uid},{action:"plugin::content-manager.explorer.read",subject:o.uid}],l=[{action:"plugin::content-manager.explorer.read",subject:o.uid}],i=t==="collectionTypes"?a:l,c=n.find(({uid:d})=>d===o.uid);let u=null;if(c){const d={page:1,pageSize:c.settings.pageSize,sort:`${c.settings.defaultSortBy}:${c.settings.defaultSortOrder}`};u=(0,Ge.stringify)(d,{encode:!1})}return{permissions:i,search:u,kind:o.kind,title:o.info.displayName,to:`/content-manager/${o.kind}/${o.uid}`,uid:o.uid,name:o.uid,isDisplayed:o.isDisplayed}}),OC=(e,t)=>{const[n,o]=(0,Y.chain)(e).groupBy("kind").map((a,l)=>({name:l,links:a})).sortBy("name").value();return{collectionTypesSectionLinks:kc((0,Y.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:kc((0,Y.get)(o,"links",[]),"singleTypes")}},Fc=(e,t)=>t.map(({permissions:n})=>(0,g.hasPermissions)(e,n));var RC=p(98399),wC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const MC=(e,t,n)=>wC(void 0,null,function*(){try{const{data:{data:o}}=yield me.be.get(fe("content-types-settings")),{collectionTypesSectionLinks:a,singleTypesSectionLinks:l}=OC(e,o),i=Fc(t,a),c=yield Promise.all(i),u=a.filter((m,h)=>c[h]),d=Fc(t,l),f=yield Promise.all(d),y=l.filter((m,h)=>f[h]);return{authorizedCtLinks:u,authorizedStLinks:y}}catch(o){return RC.error(o),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var TC=p(98399),IC=Object.defineProperty,DC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,Ac=Object.getOwnPropertySymbols,SC=Object.prototype.hasOwnProperty,xC=Object.prototype.propertyIsEnumerable,jc=(e,t,n)=>t in e?IC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kC=(e,t)=>{for(var n in t||(t={}))SC.call(t,n)&&jc(e,n,t[n]);if(Ac)for(var n of Ac(t))xC.call(t,n)&&jc(e,n,t[n]);return e},FC=(e,t)=>DC(e,LC(t)),AC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const jC=()=>{const e=(0,ge.useDispatch)(),t=(0,g.useNotification)(),n=(0,ge.useSelector)(Tt()),o=(0,r.useRef)(),{allPermissions:a}=(0,g.useRBACProvider)(),{runHookWaterfall:l}=(0,g.useStrapiApp)(),c=$e().CancelToken.source(),{notifyStatus:u}=(0,ro.G)(),{formatMessage:d}=(0,V.useIntl)(),f=()=>AC(void 0,null,function*(){e(EC());try{const[{data:{data:y}},{data:{data:m}}]=yield Promise.all(["components","content-types"].map(P=>me.be.get(fe(P),{cancelToken:c.token})));u(d({id:C("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:b}=yield MC(m,a,t),{ctLinks:E}=l(Ut.LK,{ctLinks:h,models:m}),{stLinks:k}=l(Ut.dV,{stLinks:b,models:m}),O=PC(E,k,m,y);e(O)}catch(y){if($e().isCancel(y))return;TC.error(y),t({type:"warning",message:{id:"notification.error"}})}});return o.current=f,(0,r.useEffect)(()=>(o.current(),()=>{c.cancel("Operation canceled by the user."),e(CC())}),[e,t]),FC(kC({},n),{refetchData:o.current})},$C=de.Z.contentManager,$c=()=>{const e=(0,X.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:o,models:a,refetchData:l}=jC(),i=Ae()([...n,...o],m=>m.title.toLowerCase()),{pathname:c}=(0,X.useLocation)(),{formatMessage:u}=(0,V.useIntl)(),{startSection:d}=(0,g.useGuidedTour)(),f=(0,r.useRef)(d);if((0,r.useEffect)(()=>{f.current&&f.current("contentManager")},[]),t==="loading")return r.createElement(he.o,{"aria-busy":"true"},r.createElement(re.T,{title:u({id:C("header.name"),defaultMessage:"Content"})}),r.createElement(g.LoadingIndicatorPage,null));const y=a.filter(({isDisplayed:m})=>m);return i.length===0&&y.length>0&&c!=="/content-manager/403"?r.createElement(X.Redirect,{to:"/content-manager/403"}):y.length===0&&c!=="/content-manager/no-content-types"?r.createElement(X.Redirect,{to:"/content-manager/no-content-types"}):!e&&i.length>0?r.createElement(X.Redirect,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):r.createElement(ue.A,{sideNav:r.createElement(vC,null)},r.createElement(Hc,null),r.createElement(Ro.Provider,{value:{refetchData:l}},r.createElement(X.Switch,null,r.createElement(X.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(g.CheckPagePermissions,{permissions:$C.componentsConfigurations},r.createElement(JE,null))),r.createElement(X.Route,{path:"/content-manager/collectionType/:slug",component:HE}),r.createElement(X.Route,{path:"/content-manager/singleType/:slug",component:oC}),r.createElement(X.Route,{path:"/content-manager/403"},r.createElement(nC,null)),r.createElement(X.Route,{path:"/content-manager/no-content-types"},r.createElement(tC,null)),r.createElement(X.Route,{path:"",component:g.NotFound}))))};function NC(){const{formatMessage:e}=(0,V.useIntl)();return r.createElement(r.Fragment,null,r.createElement(dt.Helmet,{title:e({id:C("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement($c,null))}},57544:()=>{},59599:()=>{},42310:()=>{},33842:()=>{},85695:()=>{}}]);
