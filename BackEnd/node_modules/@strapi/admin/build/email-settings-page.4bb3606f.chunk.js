"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[1495],{15857:(V,Z,t)=>{t.r(Z),t.d(Z,{default:()=>oe});var e=t(32735),x=t(5636),s=t(92891),d=t(88425),f=t(27649),M=t(17e3),R=t(27677),I=t(62345),b=t(15335),m=t(5803),y=t(88860),A=t(10369),c=t(41415),u=t(94638),g=t(7961),E=t(60216),D=t.n(E),k=t(83292),Y=t(70218),z=t(84967),p=t(85684);const w=k.default.a`
  color: ${({theme:n})=>n.colors.primary600};
`,a=({config:n})=>{const{formatMessage:v}=(0,x.useIntl)();return e.createElement(R.K,{spacing:4},e.createElement(R.K,{spacing:1},e.createElement(y.Z,{variant:"delta",as:"h2"},v({id:(0,p.Z)("Settings.email.plugin.title.config"),defaultMessage:"Configuration"})),e.createElement(y.Z,null,v({id:(0,p.Z)("Settings.email.plugin.text.configuration"),defaultMessage:"The plugin is configured through the {file} file, checkout this {link} for the documentation."},{file:"./config/plugins.js",link:e.createElement(w,{href:"https://docs.strapi.io/developer-docs/latest/plugins/email.html",target:"_blank",rel:"noopener noreferrer"},v({id:(0,p.Z)("link"),defaultMessage:"Link"}))}))),e.createElement(b.r,{gap:5},e.createElement(m.P,{col:6,s:12},e.createElement(A.o,{name:"shipper-email",label:v({id:(0,p.Z)("Settings.email.plugin.label.defaultFrom"),defaultMessage:"Default sender email"}),placeholder:v({id:(0,p.Z)("Settings.email.plugin.placeholder.defaultFrom"),defaultMessage:"ex: Strapi No-Reply '<'no-reply@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:n.settings.defaultFrom})),e.createElement(m.P,{col:6,s:12},e.createElement(A.o,{name:"response-email",label:v({id:(0,p.Z)("Settings.email.plugin.label.defaultReplyTo"),defaultMessage:"Default response email"}),placeholder:v({id:(0,p.Z)("Settings.email.plugin.placeholder.defaultReplyTo"),defaultMessage:"ex: Strapi '<'example@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:n.settings.defaultReplyTo})),e.createElement(m.P,{col:6,s:12},e.createElement(Y.P,{name:"email-provider",label:v({id:(0,p.Z)("Settings.email.plugin.label.provider"),defaultMessage:"Email provider"}),disabled:!0,onChange:()=>{},value:n.provider},e.createElement(z.W,{value:n.provider},n.provider)))))};a.propTypes={config:D().shape({provider:D().string,settings:D().shape({defaultFrom:D().string,defaultReplyTo:D().string})}).isRequired};const i=a;var l=t(5173);const O=l.Ry().shape({email:l.Z_().email(d.translatedErrors.email).required(d.translatedErrors.required)});var C=t(59990),B=t(43653),$=t.n(B),J=(n,v,h)=>new Promise((S,L)=>{var F=o=>{try{P(h.next(o))}catch(T){L(T)}},j=o=>{try{P(h.throw(o))}catch(T){L(T)}},P=o=>o.done?S(o.value):Promise.resolve(o.value).then(F,j);P((h=h.apply(n,v)).next())});const W=$().create({baseURL:"http://localhost:1337"});W.interceptors.request.use(n=>J(void 0,null,function*(){return n.headers={Authorization:`Bearer ${d.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},n}),n=>{Promise.reject(n)}),W.interceptors.response.use(n=>n,n=>{var v;throw((v=n.response)==null?void 0:v.status)===401&&(d.auth.clearAppStorage(),window.location.reload()),n});const U=W;var N=(n,v,h)=>new Promise((S,L)=>{var F=o=>{try{P(h.next(o))}catch(T){L(T)}},j=o=>{try{P(h.throw(o))}catch(T){L(T)}},P=o=>o.done?S(o.value):Promise.resolve(o.value).then(F,j);P((h=h.apply(n,v)).next())});const ae=()=>N(void 0,null,function*(){const{data:n}=yield U.get("/email/settings");return n.config}),ne=n=>N(void 0,null,function*(){yield U.post("/email/test",n)});var le=t(28356);const Q=()=>{const{formatMessage:n}=(0,x.useIntl)();return e.createElement(e.Fragment,null,e.createElement(d.SettingsPageTitle,{name:n({id:(0,p.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"})}),e.createElement(le.T,{id:"title",title:n({id:(0,p.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"}),subtitle:n({id:(0,p.Z)("Settings.email.plugin.subTitle"),defaultMessage:"Test the settings for the Email plugin"})}))};var ie=(n,v,h)=>new Promise((S,L)=>{var F=o=>{try{P(h.next(o))}catch(T){L(T)}},j=o=>{try{P(h.throw(o))}catch(T){L(T)}},P=o=>o.done?S(o.value):Promise.resolve(o.value).then(F,j);P((h=h.apply(n,v)).next())});const re=()=>e.createElement(d.CheckPagePermissions,{permissions:C.Z.settings},e.createElement(se,null)),se=()=>{var n,v;const h=(0,d.useNotification)(),{formatMessage:S}=(0,x.useIntl)(),{lockApp:L,unlockApp:F}=(0,d.useOverlayBlocker)(),{notifyStatus:j}=(0,u.G)();(0,d.useFocusWhenNavigate)();const[P,o]=(0,e.useState)({}),[T,X]=(0,e.useState)(!1),[q,_]=(0,e.useState)(!1),[H,ee]=(0,e.useState)(""),[de,te]=(0,e.useState)(!1),[ce,ue]=(0,e.useState)({provider:"",settings:{defaultFrom:"",defaultReplyTo:"",testAddress:""}});(0,e.useEffect)(()=>{X(!0),ae().then(K=>{j(S({id:(0,p.Z)("Settings.email.plugin.notification.data.loaded"),defaultMessage:"Email settings data has been loaded"})),ue(K);const G=(0,s.get)(K,"settings.testAddress");G&&ee(G)}).catch(()=>h({type:"warning",message:S({id:(0,p.Z)("Settings.email.plugin.notification.config.error"),defaultMessage:"Failed to retrieve the email config"})})).finally(()=>X(!1))},[S,h,j]),(0,e.useEffect)(()=>{P.email&&document.querySelector("#test-address-input").focus()},[P]),(0,e.useEffect)(()=>{O.validate({email:H},{abortEarly:!1}).then(()=>te(!0)).catch(()=>te(!1))},[H]);const pe=K=>{ee(()=>K.target.value)},me=K=>ie(void 0,null,function*(){K.preventDefault();try{yield O.validate({email:H},{abortEarly:!1}),_(!0),L(),ne({to:H}).then(()=>{h({type:"success",message:S({id:(0,p.Z)("Settings.email.plugin.notification.test.success"),defaultMessage:"Email test succeeded, check the {to} mailbox"},{to:H})})}).catch(()=>{h({type:"warning",message:S({id:(0,p.Z)("Settings.email.plugin.notification.test.error"),defaultMessage:"Failed to send a test mail to {to}"},{to:H})})}).finally(()=>{_(!1),F()})}catch(G){o((0,d.getYupInnerErrors)(G))}});return T?e.createElement(f.o,{labelledBy:"title","aria-busy":"true"},e.createElement(Q,null),e.createElement(M.D,null,e.createElement(d.LoadingIndicatorPage,null))):e.createElement(f.o,{labelledBy:"title","aria-busy":q},e.createElement(Q,null),e.createElement(M.D,null,e.createElement("form",{onSubmit:me},e.createElement(R.K,{spacing:7},e.createElement(I.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(i,{config:ce})),e.createElement(I.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(R.K,{spacing:4},e.createElement(y.Z,{variant:"delta",as:"h2"},S({id:(0,p.Z)("Settings.email.plugin.title.test"),defaultMessage:"Test email delivery"})),e.createElement(b.r,{gap:5,alignItems:"end"},e.createElement(m.P,{col:6,s:12},e.createElement(A.o,{id:"test-address-input",name:"test-address",onChange:pe,label:S({id:(0,p.Z)("Settings.email.plugin.label.testAddress"),defaultMessage:"Recipient email"}),value:H,error:((n=P.email)==null?void 0:n.id)&&S({id:(0,p.Z)(`${(v=P.email)==null?void 0:v.id}`),defaultMessage:"This is an invalid email"}),placeholder:S({id:(0,p.Z)("Settings.email.plugin.placeholder.testAddress"),defaultMessage:"ex: developer@example.com"})})),e.createElement(m.P,{col:7,s:12},e.createElement(c.z,{loading:q,disabled:!de,type:"submit",startIcon:e.createElement(g.Z,null)},S({id:(0,p.Z)("Settings.email.plugin.button.test-email"),defaultMessage:"Send test email"}))))))))))},oe=re},17e3:(V,Z,t)=>{t.d(Z,{D:()=>d});var e=t(32735),x=t(60216),s=t(62345);const d=({children:f})=>e.createElement(s.x,{paddingLeft:10,paddingRight:10},f);d.propTypes={children:x.node.isRequired}},28356:(V,Z,t)=>{t.d(Z,{T:()=>z});var e=t(32735),x=t(83292),s=t(60216),d=t(88860),f=t(62345),M=t(36320);const R=a=>{const i=(0,e.useRef)(null),[l,r]=(0,e.useState)(!0),O=([C])=>{r(C.isIntersecting)};return(0,e.useEffect)(()=>{const C=i.current,B=new IntersectionObserver(O,a);return C&&B.observe(i.current),()=>{C&&B.disconnect()}},[i,a]),[i,l]},I=(a,i)=>{(0,e.useLayoutEffect)(()=>{const l=new ResizeObserver(i);return Array.isArray(a)?a.map(r=>{r.current&&l.observe(r.current)}):a.current&&l.observe(a.current),()=>{l.disconnect()}},[])};var b=Object.defineProperty,m=Object.defineProperties,y=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,g=(a,i,l)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[i]=l,E=(a,i)=>{for(var l in i||(i={}))c.call(i,l)&&g(a,l,i[l]);if(A)for(var l of A(i))u.call(i,l)&&g(a,l,i[l]);return a},D=(a,i)=>m(a,y(i)),k=(a,i)=>{var l={};for(var r in a)c.call(a,r)&&i.indexOf(r)<0&&(l[r]=a[r]);if(a!=null&&A)for(var r of A(a))i.indexOf(r)<0&&u.call(a,r)&&(l[r]=a[r]);return l};const Y=()=>{const a=(0,e.useRef)(null),[i,l]=(0,e.useState)(null),[r,O]=R({root:null,rootMargin:"0px",threshold:0});return I(r,()=>{r.current&&l(r.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&l(a.current.getBoundingClientRect())},[a]),{containerRef:r,isVisible:O,baseHeaderLayoutRef:a,headerSize:i}},z=a=>{const{containerRef:i,isVisible:l,baseHeaderLayoutRef:r,headerSize:O}=Y();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:O==null?void 0:O.height},ref:i},l&&e.createElement(w,E({ref:r},a))),!l&&e.createElement(w,D(E({},a),{sticky:!0,width:O==null?void 0:O.width})))};z.displayName="HeaderLayout";const p=(0,x.default)(f.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,w=e.forwardRef((a,i)=>{var l=a,{navigationAction:r,primaryAction:O,secondaryAction:C,subtitle:B,title:$,sticky:J,width:W}=l,U=k(l,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const N=typeof B=="string";return J?e.createElement(p,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:W,"data-strapi-header-sticky":!0},e.createElement(M.k,{justifyContent:"space-between"},e.createElement(M.k,null,r&&e.createElement(f.x,{paddingRight:3},r),e.createElement(f.x,null,e.createElement(d.Z,E({variant:"beta",as:"h1"},U),$),N?e.createElement(d.Z,{variant:"pi",textColor:"neutral600"},B):B),C?e.createElement(f.x,{paddingLeft:4},C):null),e.createElement(M.k,null,O?e.createElement(f.x,{paddingLeft:2},O):void 0))):e.createElement(f.x,{ref:i,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:r?6:8,background:"neutral100","data-strapi-header":!0},r?e.createElement(f.x,{paddingBottom:2},r):null,e.createElement(M.k,{justifyContent:"space-between"},e.createElement(M.k,null,e.createElement(d.Z,E({as:"h1",variant:"alpha"},U),$),C?e.createElement(f.x,{paddingLeft:4},C):null),O),N?e.createElement(d.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},B):B)});w.displayName="BaseHeaderLayout",w.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},w.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},z.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},z.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},27649:(V,Z,t)=>{t.d(Z,{o:()=>A});var e=t(32735),x=t(60216),s=t(83292),d=Object.defineProperty,f=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,I=(c,u,g)=>u in c?d(c,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):c[u]=g,b=(c,u)=>{for(var g in u||(u={}))M.call(u,g)&&I(c,g,u[g]);if(f)for(var g of f(u))R.call(u,g)&&I(c,g,u[g]);return c},m=(c,u)=>{var g={};for(var E in c)M.call(c,E)&&u.indexOf(E)<0&&(g[E]=c[E]);if(c!=null&&f)for(var E of f(c))u.indexOf(E)<0&&R.call(c,E)&&(g[E]=c[E]);return g};const y=s.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,A=c=>{var u=c,{labelledBy:g}=u,E=m(u,["labelledBy"]);const D=g||"main-content-title";return e.createElement(y,b({"aria-labelledby":D,id:"main-content",tabIndex:-1},E))};A.defaultProps={labelledBy:void 0},A.propTypes={labelledBy:x.string}},7961:(V,Z,t)=>{t.d(Z,{Z:()=>I});var e=t(32735),x=Object.defineProperty,s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,M=(b,m,y)=>m in b?x(b,m,{enumerable:!0,configurable:!0,writable:!0,value:y}):b[m]=y,R=(b,m)=>{for(var y in m||(m={}))d.call(m,y)&&M(b,y,m[y]);if(s)for(var y of s(m))f.call(m,y)&&M(b,y,m[y]);return b};function I(b){return e.createElement("svg",R({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b),e.createElement("path",{d:"M0 2.8A.8.8 0 01.8 2h22.4a.8.8 0 01.8.8v2.71a1 1 0 01-1 1H1a1 1 0 01-1-1V2.8z",fill:"#32324D"}),e.createElement("path",{d:"M1.922 7.991C.197 6.675 0 6.252 0 5.289h23.953c.305 1.363-1.594 2.506-2.297 3.125-1.953 1.363-6.253 4.36-7.828 5.45-1.575 1.09-3.031.455-3.562 0-2.063-1.41-6.62-4.557-8.344-5.873zM22.8 18H1.2c-.663 0-1.2.471-1.2 1.053v1.894C0 21.529.537 22 1.2 22h21.6c.663 0 1.2-.471 1.2-1.053v-1.894c0-.582-.537-1.053-1.2-1.053z",fill:"#32324D"}),e.createElement("path",{d:"M0 9.555v10.972h24V9.554c-2.633 1.95-8.367 6.113-9.96 7.166-1.595 1.052-3.352.438-4.032 0L0 9.555z",fill:"#32324D"}))}}}]);
